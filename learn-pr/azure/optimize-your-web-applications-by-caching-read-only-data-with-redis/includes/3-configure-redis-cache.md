<span data-ttu-id="fa439-101">Ditt utvecklingsteam för sportstatistik har kommit fram till att cachelagring avsevärt skulle kunna förbättra prestanda för nyligen begärda data.</span><span class="sxs-lookup"><span data-stu-id="fa439-101">Your sports statistics development team has decided that caching could dramatically improve performance for recently requested data.</span></span> <span data-ttu-id="fa439-102">Nästa steg är att skapa och konfigurera en Azure Redis Cache-instans.</span><span class="sxs-lookup"><span data-stu-id="fa439-102">Your next step is to create and configure an Azure Redis Cache instance.</span></span>

### <a name="create-and-configure-the-azure-redis-cache-instance"></a><span data-ttu-id="fa439-103">Skapa och konfigurera Azure Redis Cache-instansen</span><span class="sxs-lookup"><span data-stu-id="fa439-103">Create and configure the Azure Redis Cache instance</span></span>

1. <span data-ttu-id="fa439-104">Du kan lägga till en Azure Redis Cache-instans från databasresurser i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="fa439-104">You can add an Azure Redis Cache instance from the database resources in the Azure portal.</span></span>

1. <span data-ttu-id="fa439-105">Ange ett globalt unikt namn.</span><span class="sxs-lookup"><span data-stu-id="fa439-105">Provide a globally unique name.</span></span> <span data-ttu-id="fa439-106">Namnet måste vara en sträng mellan 1 och 63 tecken och får endast innehålla siffror, bokstäver och tecknet ”-”.</span><span class="sxs-lookup"><span data-stu-id="fa439-106">The name must be a string between 1 and 63 characters and include only numbers, letters, and the '-' character.</span></span> <span data-ttu-id="fa439-107">Cachenamnet får inte inledas eller avslutas med tecknet ”-” eller ha flera ”-” i följd.</span><span class="sxs-lookup"><span data-stu-id="fa439-107">The cache name can't start or end with the '-' character, and consecutive '-' characters aren't valid.</span></span>

1. <span data-ttu-id="fa439-108">Ange prenumerationen där den nya Azure Redis Cache-instansen ska skapas.</span><span class="sxs-lookup"><span data-stu-id="fa439-108">Provide the subscription under which this new Azure Redis Cache instance is created.</span></span>

1. <span data-ttu-id="fa439-109">Namnge den resursgrupp där du vill skapa din cache.</span><span class="sxs-lookup"><span data-stu-id="fa439-109">Name the resource group in which to create your cache.</span></span> <span data-ttu-id="fa439-110">Genom att samla alla resurser för en app i en grupp kan du hantera dem tillsammans.</span><span class="sxs-lookup"><span data-stu-id="fa439-110">By putting all the resources for an app in a group, you can manage them together.</span></span>

1. <span data-ttu-id="fa439-111">Välj en plats som ligger nära datakonsumenten.</span><span class="sxs-lookup"><span data-stu-id="fa439-111">Choose a location that is close to the consumer of the data.</span></span>

    > [!NOTE]
    > <span data-ttu-id="fa439-112">Det är mycket viktigare att cachen är nära datakonsumenten än datalagret.</span><span class="sxs-lookup"><span data-stu-id="fa439-112">It's far more important that the cache is close to the data consumer than the data store.</span></span>

1. <span data-ttu-id="fa439-113">Välj prisnivå.</span><span class="sxs-lookup"><span data-stu-id="fa439-113">Select the pricing tier.</span></span> <span data-ttu-id="fa439-114">Kom ihåg att du måste välja en Premium-nivå för att kunna använda datapersistens.</span><span class="sxs-lookup"><span data-stu-id="fa439-114">Remember, to take advantage of data persistence, you'll need to choose a premium tier.</span></span>

    - <span data-ttu-id="fa439-115">Med Premium-nivån kan du bevara data på ett av två sätt för att tillhandahålla katastrofåterställning:</span><span class="sxs-lookup"><span data-stu-id="fa439-115">The premium tier allows you to persist data in one of two ways to provide disaster recovery:</span></span>

        - <span data-ttu-id="fa439-116">RDB-persistens tar en periodisk ögonblicksbild och kan återskapa cachen med hjälp av ögonblicksbilden om fel uppstår.</span><span class="sxs-lookup"><span data-stu-id="fa439-116">RDB persistence takes a periodic snapshot and can rebuild the cache using the snapshot in case of failure.</span></span>

            ![Skärmbild av Azure Portal med alternativen för RDB-persistens på en ny Redis Cache-instans.](../media/3-redis-persistence-1.png)

        - <span data-ttu-id="fa439-118">AOF-persistens sparar alla skrivåtgärder till en logg som sparas minst en gång per sekund.</span><span class="sxs-lookup"><span data-stu-id="fa439-118">AOF persistence saves every write operation to a log that is saved at least once per second.</span></span> <span data-ttu-id="fa439-119">Detta skapar större filer än RDB men har mindre dataförlust.</span><span class="sxs-lookup"><span data-stu-id="fa439-119">This creates bigger files than RDB but has less data loss.</span></span>

            ![Skärmbild av Azure Portal med alternativen för AOF-persistens på en ny Redis Cache-instans.](../media/3-redis-persistence-2.png)

    - <span data-ttu-id="fa439-121">Skydda din cache med ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="fa439-121">Secure your cache with a virtual network.</span></span>
      <span data-ttu-id="fa439-122">Om du har en Redis Cache på Premium-nivå kan du distribuera den till ett virtuellt nätverk i molnet.</span><span class="sxs-lookup"><span data-stu-id="fa439-122">If you have a premium tier Redis cache, you can deploy it to a virtual network in the cloud.</span></span> <span data-ttu-id="fa439-123">Cachen blir bara tillgänglig för andra virtuella datorer och program i samma virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="fa439-123">Your cache will be available to only other virtual machines and applications in the same virtual network.</span></span>

    - <span data-ttu-id="fa439-124">Distribuera din cache med klustring.</span><span class="sxs-lookup"><span data-stu-id="fa439-124">Distribute your cache with clustering.</span></span>
      <span data-ttu-id="fa439-125">Med en Redis Cache på Premium-nivå kan du implementera klustring för att automatiskt fördela din datamängd mellan flera noder.</span><span class="sxs-lookup"><span data-stu-id="fa439-125">With a premium tier Redis cache, you can implement clustering to automatically split your dataset among multiple nodes.</span></span> <span data-ttu-id="fa439-126">Implementera klustring genom att ange antalet shards till högst 10.</span><span class="sxs-lookup"><span data-stu-id="fa439-126">To implement clustering, you specify the number of shards to a maximum of 10.</span></span> <span data-ttu-id="fa439-127">Kostnaden är kostnaden för den ursprungliga noden multiplicerat med antalet shards.</span><span class="sxs-lookup"><span data-stu-id="fa439-127">The cost is the cost of the original node multiplied by the number of shards.</span></span>

    - <span data-ttu-id="fa439-128">Migrera från Azure Managed Cache Service.</span><span class="sxs-lookup"><span data-stu-id="fa439-128">Migrate from Azure Managed Cache Service.</span></span>
      <span data-ttu-id="fa439-129">Beroende på vilka Managed Cache Service-funktioner du använder går det att migrera program som använder Azure Managed Cache Service till Azure Redis Cache med minimala ändringar i ditt program.</span><span class="sxs-lookup"><span data-stu-id="fa439-129">Depending on the Managed Cache Service features you use, migrating applications that use Azure Managed Cache Service to Azure Redis Cache can be accomplished with minimal changes to your application.</span></span> <span data-ttu-id="fa439-130">API:erna inte är exakt samma, men de liknar varandra.</span><span class="sxs-lookup"><span data-stu-id="fa439-130">While the APIs aren't exactly the same, they're similar.</span></span> <span data-ttu-id="fa439-131">Mycket av din befintliga kod som använder cachen via Managed Cache Service kan återanvändas med minimala ändringar.</span><span class="sxs-lookup"><span data-stu-id="fa439-131">Much of your existing code that accesses the cache with Managed Cache Service can be reused with minimal changes.</span></span>

### <a name="configure-your-client"></a><span data-ttu-id="fa439-132">Konfigurera din klient</span><span class="sxs-lookup"><span data-stu-id="fa439-132">Configure your client</span></span>

<span data-ttu-id="fa439-133">Klientprogrammen måste konfigureras för att använda Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="fa439-133">Client applications need to be configured to use the Redis cache.</span></span> <span data-ttu-id="fa439-134">**StackExchange.Redis** är en populär Redis-klient med höga prestanda för språket .NET.</span><span class="sxs-lookup"><span data-stu-id="fa439-134">A popular high-performance Redis client for the .NET language is **StackExchange.Redis**.</span></span> <span data-ttu-id="fa439-135">Du lägger till Redis-klienten med hjälp av **NuGet Package Manager** i Visual Studio via kommandot **Install-Package**.</span><span class="sxs-lookup"><span data-stu-id="fa439-135">You add the Redis client using the **NuGet Package Manager** in Visual Studio using the **Install-Package** command.</span></span>

<span data-ttu-id="fa439-136">Du behöver sedan konfigurera klienten att ansluta till din cache.</span><span class="sxs-lookup"><span data-stu-id="fa439-136">You then need to configure your client to connect to your cache.</span></span> <span data-ttu-id="fa439-137">Skapa en textfil med filnamnstillägget **.config** som innehåller inställningarna för värdnamnet och primär eller sekundär nyckel.</span><span class="sxs-lookup"><span data-stu-id="fa439-137">Create a text file with a **.config** file extension that contains the settings for the host name and primary, or secondary, key.</span></span> <span data-ttu-id="fa439-138">Filen ska ha följande struktur:</span><span class="sxs-lookup"><span data-stu-id="fa439-138">The file should have the following structure:</span></span>

```XML
    <appSettings>
        <add key="CacheConnection" value="HOST-NAME.redis.cache.windows.net,abortConnect=false,ssl=true,password=PRIMARY-KEY"/>
    </appSettings>
```

<span data-ttu-id="fa439-139">Du redigerar **App.config**-filen och uppdaterar den med ett **appSettings**-filattribut som refererar till den config-fil som du nyss skapade.</span><span class="sxs-lookup"><span data-stu-id="fa439-139">You will then edit your **App.config** file and update it to include an **appSettings** file attribute that references the config file that you just created.</span></span>

### <a name="what-are-access-keys"></a><span data-ttu-id="fa439-140">Vad är åtkomstnycklar?</span><span class="sxs-lookup"><span data-stu-id="fa439-140">What are access keys?</span></span>

<span data-ttu-id="fa439-141">När du ansluter till en Azure Redis Cache-instans behöver cacheklienter värdnamnet, portarna och nycklarna för cachen.</span><span class="sxs-lookup"><span data-stu-id="fa439-141">When connecting to an Azure Redis Cache instance, cache clients need the host name, ports, and a key for the cache.</span></span> <span data-ttu-id="fa439-142">Du kan hämta den här informationen i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="fa439-142">You can retrieve this information in the Azure portal.</span></span>

### <a name="connection-settings"></a><span data-ttu-id="fa439-143">Inställningar för anslutning</span><span class="sxs-lookup"><span data-stu-id="fa439-143">Connection settings</span></span>

<span data-ttu-id="fa439-144">För att kunna ansluta till din Azure Redis Cache behöver du värdnamnet och åtkomstnyckeln.</span><span class="sxs-lookup"><span data-stu-id="fa439-144">To connect to your Azure Redis Cache, you'll need the host name and access key.</span></span> <span data-ttu-id="fa439-145">Värdnamnet är Internetadressen för din cache, till exempel *sportsresults.redis.cache.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="fa439-145">The host name is the internet address of your cache, for example *sportsresults.redis.cache.windows.net*.</span></span> <span data-ttu-id="fa439-146">Åtkomstnyckeln fungerar som lösenord för cachen.</span><span class="sxs-lookup"><span data-stu-id="fa439-146">The access key acts as a password for your cache.</span></span> <span data-ttu-id="fa439-147">Det finns primära och sekundära åtkomstnycklar.</span><span class="sxs-lookup"><span data-stu-id="fa439-147">There are primary and secondary access keys.</span></span> <span data-ttu-id="fa439-148">Du kan använda endera av nycklarna, men två nycklar tillhandahålls två ifall du behöver ändra den primära nyckeln.</span><span class="sxs-lookup"><span data-stu-id="fa439-148">You can use either key, but two are provided in case you need to change the primary key.</span></span> <span data-ttu-id="fa439-149">Du kan växla alla dina klienter till den sekundära nyckeln och sedan ändra till den primära nyckeln, vilket kan förhindra förlust av tjänsten.</span><span class="sxs-lookup"><span data-stu-id="fa439-149">You can switch all of your clients to the secondary key and then make the change to the primary key, which would prevent any loss of service.</span></span>
