<span data-ttu-id="b0a33-101">Ditt utvecklingsteam för sportstatistik har kommit fram till att cachelagring avsevärt skulle kunna förbättra prestanda för nyligen begärda data.</span><span class="sxs-lookup"><span data-stu-id="b0a33-101">Your sports statistics development team has decided that caching could dramatically improve performance for recently requested data.</span></span> <span data-ttu-id="b0a33-102">Nästa steg är att skapa och konfigurera en Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="b0a33-102">Your next step is to create and configure an Azure Redis Cache.</span></span>

### <a name="create-and-configure-the-redis-cache"></a><span data-ttu-id="b0a33-103">Skapa och konfigurera Redis Cache</span><span class="sxs-lookup"><span data-stu-id="b0a33-103">Create and configure the Redis Cache</span></span>

1. <span data-ttu-id="b0a33-104">Du kan lägga till en Redis Cache från databasresurser i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="b0a33-104">You can add a Redis Cache from the Database Resources in the Azure Portal.</span></span>

1. <span data-ttu-id="b0a33-105">Ange ett globalt unikt namn.</span><span class="sxs-lookup"><span data-stu-id="b0a33-105">Provide a globally unique name.</span></span> <span data-ttu-id="b0a33-106">Namnet måste vara en sträng mellan 1 och 63 tecken och får endast innehålla siffror, bokstäver och tecknet ”-”.</span><span class="sxs-lookup"><span data-stu-id="b0a33-106">The name must be a string between 1 and 63 characters and include only numbers, letters, and the '-' character.</span></span> <span data-ttu-id="b0a33-107">Cachenamnet får inte inledas eller avslutas med tecknet ”-” eller ha flera ”-” i följd.</span><span class="sxs-lookup"><span data-stu-id="b0a33-107">The cache name can't start or end with the '-' character, and consecutive '-' characters aren't valid.</span></span>

1. <span data-ttu-id="b0a33-108">Ange prenumerationen där den här nya Azure Redis Cache-instansen skapas.</span><span class="sxs-lookup"><span data-stu-id="b0a33-108">Provide the subscription under which this new Azure Redis Cache instance is created.</span></span>

1. <span data-ttu-id="b0a33-109">Namnet på den resursgrupp där du vill skapa din cache.</span><span class="sxs-lookup"><span data-stu-id="b0a33-109">Name for the resource group in which to create your cache.</span></span> <span data-ttu-id="b0a33-110">Genom att lägga alla resurser för en app i en grupp kan du hantera dem tillsammans.</span><span class="sxs-lookup"><span data-stu-id="b0a33-110">By putting all the resources for an app in a group, you can manage them together.</span></span>

1. <span data-ttu-id="b0a33-111">Välj en plats som ligger nära datakonsumenten.</span><span class="sxs-lookup"><span data-stu-id="b0a33-111">Choose a location that is close to the consumer of the data.</span></span>

    > [!Note]
    > <span data-ttu-id="b0a33-112">Den är mycket viktigare att cachen är nära datakonsumenten än datalagret.</span><span class="sxs-lookup"><span data-stu-id="b0a33-112">It's far more important the cache is close to the data consumer than the data store.</span></span>

1. <span data-ttu-id="b0a33-113">Välj prisnivå.</span><span class="sxs-lookup"><span data-stu-id="b0a33-113">Select the pricing tier.</span></span> <span data-ttu-id="b0a33-114">Kom ihåg att dra nytta av den datapersistens som du behöver för att välja en premiumnivå.</span><span class="sxs-lookup"><span data-stu-id="b0a33-114">Remember, to take advantage of data persistence you'll need to choose a premium tier.</span></span>

    - <span data-ttu-id="b0a33-115">Med Premium-nivån kan du bevara data på ett av två sätt för att tillhandahålla katastrofåterställning:</span><span class="sxs-lookup"><span data-stu-id="b0a33-115">The Premium tier allows you to persist data in one of two ways to provide disaster recovery:</span></span>
        - <span data-ttu-id="b0a33-116">RDB-persistens tar en periodisk ögonblicksbild och kan återskapa cachen med hjälp av ögonblicksbilden om fel uppstår.</span><span class="sxs-lookup"><span data-stu-id="b0a33-116">RDB persistence takes a periodic snapshot and can rebuild the cache using the snapshot in case of failure.</span></span>

            ![RDB-persistens](../media-draft/3-redis-persistence-1.png)

        - <span data-ttu-id="b0a33-118">AOF-persistens sparar varje skrivåtgärd till en logg som sparas minst en gång per sekund.</span><span class="sxs-lookup"><span data-stu-id="b0a33-118">AOF persistence saves every write operation to a log that is saved at least once per second.</span></span> <span data-ttu-id="b0a33-119">Detta skapar större filer än RDB men har mindre dataförlust.</span><span class="sxs-lookup"><span data-stu-id="b0a33-119">This creates bigger files than RDB, but has less data loss.</span></span>

            ![AOF-persistens](../media-draft/3-redis-persistence-2.png)

    - <span data-ttu-id="b0a33-121">Skydda din cache med ett virtuellt nätverk Om du har en Redis Cache på Premium-nivå kan du distribuera den till ett virtuellt nätverk i molnet.</span><span class="sxs-lookup"><span data-stu-id="b0a33-121">Secure your cache with a virtual network If you have a Premium tier Redis cache, you can deploy it to a virtual network in the cloud.</span></span> <span data-ttu-id="b0a33-122">Cachen blir bara tillgänglig för andra virtuella datorer och program i samma virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="b0a33-122">Your cache will be available to only other virtual machines and applications in the same virtual network.</span></span>

    - <span data-ttu-id="b0a33-123">Distribuera din cache med klustring Med en Redis Cache på Premium-nivå kan du implementera klustring för att automatiskt dela din datamängd bland flera noder.</span><span class="sxs-lookup"><span data-stu-id="b0a33-123">Distribute your cache with clustering With a Premium tier Redis cache you can implement clustering to automatically split your dataset among multiple nodes.</span></span> <span data-ttu-id="b0a33-124">För att implementera klustring anger du antalet shards till högst 10.</span><span class="sxs-lookup"><span data-stu-id="b0a33-124">To implement clustering, you specify the number of shards to a maximum of 10.</span></span> <span data-ttu-id="b0a33-125">Kostnaden är kostnaden för den ursprungliga noden multiplicerat med antalet shards.</span><span class="sxs-lookup"><span data-stu-id="b0a33-125">The cost is the cost of the original node multiplied by the number of shards.</span></span>

    - <span data-ttu-id="b0a33-126">Migrera från Managed Cache Service Beroende på de Managed Cache Service-funktioner du använder går det att migrera program som använder Azure Managed Cache Service till Azure Redis Cache med minimala ändringar i ditt program.</span><span class="sxs-lookup"><span data-stu-id="b0a33-126">Migrate from Managed Cache Service Depending on the Managed Cache Service features you use, migrating applications that use Azure Managed Cache Service to Azure Redis Cache can be accomplished with minimal changes to your application.</span></span> <span data-ttu-id="b0a33-127">API:erna inte är exakt samma, men de liknar varandra.</span><span class="sxs-lookup"><span data-stu-id="b0a33-127">While the APIs aren't exactly the same, they're similar.</span></span> <span data-ttu-id="b0a33-128">Mycket av din befintliga kod som kommer åt cachen med Managed Cache Service kan återanvändas med minimala ändringar.</span><span class="sxs-lookup"><span data-stu-id="b0a33-128">Much of your existing code that accesses the cache with Managed Cache Service can be reused with minimal changes.</span></span>

### <a name="configure-your-client"></a><span data-ttu-id="b0a33-129">Konfigurera din klient</span><span class="sxs-lookup"><span data-stu-id="b0a33-129">Configure your Client</span></span>

<span data-ttu-id="b0a33-130">Klientprogrammet behöver konfigureras för att använda Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="b0a33-130">The client applications need to be configured to use the Redis Cache.</span></span> <span data-ttu-id="b0a33-131">**StackExchange.Redis** är en populär Redis-klient för höga prestanda för språket .NET.</span><span class="sxs-lookup"><span data-stu-id="b0a33-131">A popular high-performance Redis client for the .NET language is **StackExchange.Redis**.</span></span> <span data-ttu-id="b0a33-132">Du lägger till Redis-klienten med hjälp av **NuGet Package Manager** i Visual Studio via kommandot **Install-Package**.</span><span class="sxs-lookup"><span data-stu-id="b0a33-132">You add the Redis client using the **NuGet Package Manager** in Visual Studio using the **Install-Package** command.</span></span>

<span data-ttu-id="b0a33-133">Du behöver sedan konfigurera klienten att ansluta till din cache.</span><span class="sxs-lookup"><span data-stu-id="b0a33-133">You then need to configure your client to connect to your cache.</span></span> <span data-ttu-id="b0a33-134">Skapa en textfil med filnamnstillägget .config som innehåller inställningarna för värdnamnet och primär eller sekundär nyckel.</span><span class="sxs-lookup"><span data-stu-id="b0a33-134">Create a text file with a .config file extension that contains the settings for the host name and primary, or secondary, key.</span></span> <span data-ttu-id="b0a33-135">Filen ska ha följande struktur:</span><span class="sxs-lookup"><span data-stu-id="b0a33-135">The file should have the following structure:</span></span>

```XML
    <appSettings>
    <add key="CacheConnection" value="HOST-NAME.redis.cache.windows.net,abortConnect=false,ssl=true,password=PRIMARY-KEY"/>
    </appSettings>
```

<span data-ttu-id="b0a33-136">Du redigerar **App.config**-filen och uppdaterar den med ett appSettings-filattribut som refererar till den config-fil som du nyss skapade.</span><span class="sxs-lookup"><span data-stu-id="b0a33-136">You will then edit your **App.config** file and update it to include an appSettings file attribute that references the config file that you just created.</span></span>

### <a name="what-are-access-keys"></a><span data-ttu-id="b0a33-137">Vad är åtkomstnycklar?</span><span class="sxs-lookup"><span data-stu-id="b0a33-137">What are Access Keys?</span></span>

<span data-ttu-id="b0a33-138">När du ansluter till en Azure Redis Cache-instans behöver cacheklienter värdnamnet, portarna och nycklarna för cachen.</span><span class="sxs-lookup"><span data-stu-id="b0a33-138">When connecting to an Azure Redis Cache instance, cache clients need the host name, ports, and a key for the cache.</span></span> <span data-ttu-id="b0a33-139">Du kan hämta den här informationen i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="b0a33-139">You can retrieve this information in the Azure portal.</span></span>

### <a name="connection-settings"></a><span data-ttu-id="b0a33-140">Inställningar för anslutning</span><span class="sxs-lookup"><span data-stu-id="b0a33-140">Connection Settings</span></span>

<span data-ttu-id="b0a33-141">För att ansluta till din Azure Redis Cache behöver du värdnamnet och åtkomstnyckeln.</span><span class="sxs-lookup"><span data-stu-id="b0a33-141">To connect to your Azure Redis Cache, you'll need the host name and access key.</span></span> <span data-ttu-id="b0a33-142">Värdnamnet är Internetadressen för din cache, till exempel *sportsresults.redis.cache.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="b0a33-142">The host name is the Internet address of your cache, for example *sportsresults.redis.cache.windows.net*.</span></span> <span data-ttu-id="b0a33-143">Åtkomstnyckeln fungerar som ett lösenord för cachen.</span><span class="sxs-lookup"><span data-stu-id="b0a33-143">The access key acts as a password for your cache.</span></span> <span data-ttu-id="b0a33-144">Det finns primära och sekundära åtkomstnycklar.</span><span class="sxs-lookup"><span data-stu-id="b0a33-144">There are Primary and Secondary access keys.</span></span> <span data-ttu-id="b0a33-145">Du kan använda endera av nycklarna, men det tillhandahålls två ifall du behöver ändra den primära nyckeln.</span><span class="sxs-lookup"><span data-stu-id="b0a33-145">You can use either key, but two are provided in case you need to change the primary key.</span></span> <span data-ttu-id="b0a33-146">Du kan växla alla dina klienter till den sekundära nyckeln och sedan ändra till den primära nyckeln, vilket kan förhindra förlust av tjänsten.</span><span class="sxs-lookup"><span data-stu-id="b0a33-146">You can switch all of your clients to the secondary key and then make the change to the primary key, which would prevent any loss of service.</span></span>
