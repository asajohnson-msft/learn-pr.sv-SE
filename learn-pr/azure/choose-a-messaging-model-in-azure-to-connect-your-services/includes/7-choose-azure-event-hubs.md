<span data-ttu-id="12ade-101">Det finns vissa program som producerar ett enormt antal händelser från nästan lika många källor.</span><span class="sxs-lookup"><span data-stu-id="12ade-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="12ade-102">Termen ”Stordata” tillämpas ofta på sådana situationer, och det krävs unik infrastruktur för att hantera dem.</span><span class="sxs-lookup"><span data-stu-id="12ade-102">We often hear the term "Big Data" applied to these situations and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="12ade-103">Anta att du arbetar på Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="12ade-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="12ade-104">Motorerna som din arbetsgivare tillverkar har hundratals sensorer.</span><span class="sxs-lookup"><span data-stu-id="12ade-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="12ade-105">Innan ett flygplan kan tas upp varje morgon, kopplas motorerna till en testmiljö och gås igenom.</span><span class="sxs-lookup"><span data-stu-id="12ade-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="12ade-106">Dessutom strömmas cachelagrade flygdata när flygplanet är anslutet till markutrustning.</span><span class="sxs-lookup"><span data-stu-id="12ade-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="12ade-107">Nu vill du använda historiska sensordata för att hitta mönster i sensoravläsningarna som indikerar att motorfel troligen kommer att inträffa snart.</span><span class="sxs-lookup"><span data-stu-id="12ade-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="12ade-108">Du vill också att sensoravläsningarna i realtid ska jämföras mot de här felmönstren.</span><span class="sxs-lookup"><span data-stu-id="12ade-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="12ade-109">Sedan kan du varna användarna nära nog i realtid om en motor visar oroväckande värden.</span><span class="sxs-lookup"><span data-stu-id="12ade-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="12ade-110">Vad är Azure Event Hubs?</span><span class="sxs-lookup"><span data-stu-id="12ade-110">What is Azure Event Hubs</span></span>

<span data-ttu-id="12ade-111">Azure Event Hub är en mellanhand för kommunikationsmönstret publicera-prenumerera, men till skillnad från Event Grid är det optimerat för mycket stora dataflöden, ett stort antal utgivare, säkerhet och återhämtning.</span><span class="sxs-lookup"><span data-stu-id="12ade-111">Azure Event Hub is an intermediary for the publish-subscribe communication pattern, but unlike Event Grid it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="12ade-112">Medan Event Grid passar in mer eller mindre perfekt i mönstret publicera-prenumerera eftersom det bara hanterar prenumerationer och dirigerar kommunikation till de prenumeranterna, utför Händelsehubben ett stort antal ytterligare tjänster så att det mer liknar en Service Bus eller meddelandekö mer än en enkel händelseleverantör.</span><span class="sxs-lookup"><span data-stu-id="12ade-112">Whereas Event Grid fits more or less perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hub performs quite a few additional services that in some ways make it resemble a service bus or message queue more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="12ade-113">Partitioner</span><span class="sxs-lookup"><span data-stu-id="12ade-113">Partitions</span></span> ####
<span data-ttu-id="12ade-114">När Händelsehubben tar emot meddelanden delar den upp dem i partitioner.</span><span class="sxs-lookup"><span data-stu-id="12ade-114">As Event Hub receives communications it divides them into partitions.</span></span> <span data-ttu-id="12ade-115">Partitioner är buffertar där meddelandena sparas.</span><span class="sxs-lookup"><span data-stu-id="12ade-115">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="12ade-116">Händelsebuffertarna gör att händelserna inte är flyktiga, och en händelse missas inte om en prenumerant är upptagen eller offline.</span><span class="sxs-lookup"><span data-stu-id="12ade-116">Because of the event buffers, events are not completely ephemeral and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="12ade-117">Prenumeranten kan alltid använda bufferten för att ”komma ikapp”.</span><span class="sxs-lookup"><span data-stu-id="12ade-117">The subscriber can always use the buffer to "catch up".</span></span> <span data-ttu-id="12ade-118">Som standard lagras händelserna i bufferten i 24 timmar. Sedan tas de bort automatiskt.</span><span class="sxs-lookup"><span data-stu-id="12ade-118">By default events stay in the buffer for 24 hours then automatically expire.</span></span>

<span data-ttu-id="12ade-119">Buffertarna kallas partitioner eftersom data delas upp mellan dem.</span><span class="sxs-lookup"><span data-stu-id="12ade-119">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="12ade-120">Varje Händelsehubb har minst två partitioner, och varje partition har en separat uppsättning prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="12ade-120">Every Event Hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="12ade-121">Capture</span><span class="sxs-lookup"><span data-stu-id="12ade-121">Capture</span></span> ####
<span data-ttu-id="12ade-122">Händelsehubben kan skicka alla händelser direkt till Azure Data Lake eller Blob Storage för prisvärd permanent lagring.</span><span class="sxs-lookup"><span data-stu-id="12ade-122">Event Hub can send all your events immediately to Azure Data Lake or Blob Storage for inexpensive permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="12ade-123">Autentisering</span><span class="sxs-lookup"><span data-stu-id="12ade-123">Authentication</span></span> ####
<span data-ttu-id="12ade-124">Alla utgivare autentiseras och får ett token utfärdat.</span><span class="sxs-lookup"><span data-stu-id="12ade-124">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="12ade-125">Det innebär att Händelsehubben kan ta emot händelser från externa enheter och mobilappar utan att falska data kan förstöra analysen.</span><span class="sxs-lookup"><span data-stu-id="12ade-125">This means Event Hub can accept events from external devices and mobile apps without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-azure-event-hub"></a><span data-ttu-id="12ade-126">Använda en Azure-händelsehubb</span><span class="sxs-lookup"><span data-stu-id="12ade-126">Using Azure Event Hub</span></span>

<span data-ttu-id="12ade-127">Händelsehubbar har stöd för pipelining av händelseströmmar till andra Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="12ade-127">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="12ade-128">Om det används med Stream Analytics möjliggörs till exempel komplexa dataanalyser nära nog i realtid, eftersom flera händelser kan korreleras och mönster upptäckas.</span><span class="sxs-lookup"><span data-stu-id="12ade-128">Using it with Stream Analytics for instance allows complex analysis of data in near real time with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="12ade-129">I det här fallet anses Stream Analytics som en prenumerant.</span><span class="sxs-lookup"><span data-stu-id="12ade-129">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="12ade-130">När det gäller våra flygplansmotorer konfigurerar vi arkitekturen så att Händelsehubbar autentiserar informationen från våra motorer.</span><span class="sxs-lookup"><span data-stu-id="12ade-130">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="12ade-131">Vi låter då Händelsehubbar spara alla data i Azure Data Lake, och vi kan senare använda dessa data för att träna upp och förbättra våra maskininlärningsmodeller.</span><span class="sxs-lookup"><span data-stu-id="12ade-131">We will then have it use Capture to save all the data to Azure Data Lake, later we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="12ade-132">Slutligen hämtas våra händelseströmmar av Azure Stream Analytics-prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="12ade-132">Finally, our event streams will be picked up by Azure Stream Analytics subscribers.</span></span> <span data-ttu-id="12ade-133">Stream Analytics använder vår maskininlärningsmodell för att leta efter mönster i sensorinformationen som kan indikera problem.</span><span class="sxs-lookup"><span data-stu-id="12ade-133">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="12ade-134">Eftersom vi har flera partitioner och varje motor skickar sina data endast till en partition behöver varje instans av Stream Analytics-prenumeranten endast hantera en delmängd av den fullständiga datamängden i stället för att filtrera och korrelera samtliga data.</span><span class="sxs-lookup"><span data-stu-id="12ade-134">Because we have several partitions, and each engine sends all its data to only one partition each instance of our Stream Analytics subscriber only need deal with a subset of our overall data instead of filtering and correlating over all of it.</span></span>

## <a name="choose-event-grid-or-event-hub"></a><span data-ttu-id="12ade-135">Välj Event Grid eller Händelsehubb</span><span class="sxs-lookup"><span data-stu-id="12ade-135">Choose Event Grid or Event Hub</span></span>

<span data-ttu-id="12ade-136">Båda har stöd för *At Least Once*-semantik.</span><span class="sxs-lookup"><span data-stu-id="12ade-136">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="12ade-137">Om du behöver en enkel händelseinfrastruktur med publicera-prenumerera och betrodda utgivare (till exempel din egen webbserver), bör du välja Azure Event Grid.</span><span class="sxs-lookup"><span data-stu-id="12ade-137">If you need a simple event publish-subscribe infrastructure with trusted publishers (for instance your own web server), you should choose Azure Event Grid.</span></span>

### <a name="consider-event-hub-if"></a><span data-ttu-id="12ade-138">Överväg att använda Händelsehubb om</span><span class="sxs-lookup"><span data-stu-id="12ade-138">Consider Event Hub if</span></span>
* <span data-ttu-id="12ade-139">du behöver kunna autentisera ett stort antal utgivare</span><span class="sxs-lookup"><span data-stu-id="12ade-139">You need to support authenticating a large number of publishers</span></span>
* <span data-ttu-id="12ade-140">du måste spara en händelseström i Azure Data Lake eller Blob Storage</span><span class="sxs-lookup"><span data-stu-id="12ade-140">You need to save a stream of events to Azure Data Lake or Blob Storage</span></span>
* <span data-ttu-id="12ade-141">du behöver aggregering eller analys av din händelseström</span><span class="sxs-lookup"><span data-stu-id="12ade-141">You need aggregation or analytics on your event stream</span></span>
* <span data-ttu-id="12ade-142">du behöver tillförlitlig meddelandehantering eller återhämtning</span><span class="sxs-lookup"><span data-stu-id="12ade-142">You need reliable messaging or resiliency</span></span> 