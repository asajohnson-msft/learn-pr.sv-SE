<span data-ttu-id="4cae7-101">Det finns vissa program som producerar ett stort antal händelser från nästan lika många källor.</span><span class="sxs-lookup"><span data-stu-id="4cae7-101">There are certain applications that produce a massive number of events from almost as many sources.</span></span> <span data-ttu-id="4cae7-102">Termen ”stordata” tillämpas ofta på dessa situationer och det krävs en unik infrastruktur för att hantera dem.</span><span class="sxs-lookup"><span data-stu-id="4cae7-102">We often hear the term "Big Data" applied to these situations, and they require unique infrastructure to handle them.</span></span>

<span data-ttu-id="4cae7-103">Anta att du arbetar på Contoso Aircraft Engines.</span><span class="sxs-lookup"><span data-stu-id="4cae7-103">Imagine you work for Contoso Aircraft Engines.</span></span> <span data-ttu-id="4cae7-104">Motorerna som din arbetsgivare tillverkar har hundratals sensorer.</span><span class="sxs-lookup"><span data-stu-id="4cae7-104">The engines your employer manufactures have hundreds of sensors.</span></span> <span data-ttu-id="4cae7-105">Varje dag innan ett flygplan kan flygas ansluts motorerna till en testmiljö där de gås igenom.</span><span class="sxs-lookup"><span data-stu-id="4cae7-105">Before an aircraft can be flown each morning, its engines are connected to a test harness and put through their paces.</span></span> <span data-ttu-id="4cae7-106">Dessutom strömmas cachelagrade flygdata när flygplanet är anslutet till en markutrustning.</span><span class="sxs-lookup"><span data-stu-id="4cae7-106">Additionally, cached in-flight data is streamed when the aircraft is connected to ground equipment.</span></span>

<span data-ttu-id="4cae7-107">Nu vill du använda historiska sensordata för att hitta mönster i sensoravläsningarna som indikerar att ett motorfel troligen kommer att inträffa snart.</span><span class="sxs-lookup"><span data-stu-id="4cae7-107">You want to use historic sensor data to find patterns in the sensor readings that indicate engine failure is likely to happen soon.</span></span> <span data-ttu-id="4cae7-108">Du vill också att sensoravläsningarna i realtid ska jämföras mot de här felmönstren.</span><span class="sxs-lookup"><span data-stu-id="4cae7-108">You want the real-time sensor readings to be compared against these failure patterns.</span></span> <span data-ttu-id="4cae7-109">Därefter kommer du att kunna varna användarna nära nog i realtid om en motor visar oroväckande värden.</span><span class="sxs-lookup"><span data-stu-id="4cae7-109">You can then warn users in near real time if an engine is showing worrisome readings.</span></span>

## <a name="what-is-azure-event-hubs"></a><span data-ttu-id="4cae7-110">Vad är Azure Event Hubs?</span><span class="sxs-lookup"><span data-stu-id="4cae7-110">What is Azure Event Hubs?</span></span>

<span data-ttu-id="4cae7-111">Event Hubs är en mellanhand för kommunikationsmönstret publicera/prenumerera.</span><span class="sxs-lookup"><span data-stu-id="4cae7-111">Event Hubs is an intermediary for the publish-subscribe communication pattern.</span></span> <span data-ttu-id="4cae7-112">Men till skillnad från Event Grid är det optimerat för mycket stora dataflöden, ett stort antal utgivare, säkerhet och återhämtning.</span><span class="sxs-lookup"><span data-stu-id="4cae7-112">Unlike Event Grid, however, it is optimized for extremely high throughput, a large number of publishers, security, and resiliency.</span></span>

<span data-ttu-id="4cae7-113">Medan Event Grid passar in perfekt i mönstret publicera-prenumerera eftersom det bara hanterar prenumerationer och dirigerar kommunikation till de prenumeranterna, utför Event Hubs ett stort antal ytterligare tjänster.</span><span class="sxs-lookup"><span data-stu-id="4cae7-113">Whereas Event Grid fits perfectly into the publish-subscribe pattern in that it simply manages subscriptions and routes communications to those subscribers, Event Hubs performs quite a few additional services.</span></span> <span data-ttu-id="4cae7-114">Dessa ytterligare tjänster gör att det snarare liknar en tjänstebuss eller meddelandekö, mer än en enkel händelseavsändare.</span><span class="sxs-lookup"><span data-stu-id="4cae7-114">These additional services make it resemble a service bus or message queue, more than a simple event broadcaster.</span></span>

#### <a name="partitions"></a><span data-ttu-id="4cae7-115">Partitioner</span><span class="sxs-lookup"><span data-stu-id="4cae7-115">Partitions</span></span> ####
<span data-ttu-id="4cae7-116">När Event Hubs tar emot kommunikation delas den upp i partitioner.</span><span class="sxs-lookup"><span data-stu-id="4cae7-116">As Event Hubs receives communications, it divides them into partitions.</span></span> <span data-ttu-id="4cae7-117">Partitioner är buffertar där kommunikationen sparas.</span><span class="sxs-lookup"><span data-stu-id="4cae7-117">Partitions are buffers into which the communications are saved.</span></span> <span data-ttu-id="4cae7-118">Händelsebuffertarna innebär att händelserna inte är helt tillfälliga, samt att en händelse inte missas om en prenumerant är upptagen eller offline.</span><span class="sxs-lookup"><span data-stu-id="4cae7-118">Because of the event buffers, events are not completely ephemeral, and an event isn't missed just because a subscriber is busy or even offline.</span></span> <span data-ttu-id="4cae7-119">Prenumeranten kan alltid använda bufferten för att ”komma ikapp”.</span><span class="sxs-lookup"><span data-stu-id="4cae7-119">The subscriber can always use the buffer to "catch up."</span></span> <span data-ttu-id="4cae7-120">Som standard lagras händelserna i bufferten i 24 timmar. Sedan tas de bort automatiskt.</span><span class="sxs-lookup"><span data-stu-id="4cae7-120">By default, events stay in the buffer for 24 hours before they automatically expire.</span></span>

<span data-ttu-id="4cae7-121">Buffertarna kallas partitioner eftersom data delas upp mellan dem.</span><span class="sxs-lookup"><span data-stu-id="4cae7-121">The buffers are called partitions because the data is divided amongst them.</span></span> <span data-ttu-id="4cae7-122">Varje händelsehubb har minst två partitioner, och varje partition har en separat uppsättning prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="4cae7-122">Every event hub has at least two partitions, and each partition has a separate set of subscribers.</span></span>

#### <a name="capture"></a><span data-ttu-id="4cae7-123">Capture</span><span class="sxs-lookup"><span data-stu-id="4cae7-123">Capture</span></span> ####
<span data-ttu-id="4cae7-124">Event Hubs kan skicka alla händelser direkt till Azure Data Lake eller Azure Blob Storage för prisvärd och permanent lagring.</span><span class="sxs-lookup"><span data-stu-id="4cae7-124">Event Hubs can send all your events immediately to Azure Data Lake or Azure Blob storage for inexpensive, permanent persistence.</span></span>

#### <a name="authentication"></a><span data-ttu-id="4cae7-125">Autentisering</span><span class="sxs-lookup"><span data-stu-id="4cae7-125">Authentication</span></span> ####
<span data-ttu-id="4cae7-126">Alla utgivare autentiseras och får en token utfärdad.</span><span class="sxs-lookup"><span data-stu-id="4cae7-126">All publishers are authenticated and issued a token.</span></span> <span data-ttu-id="4cae7-127">Det innebär att Event Hubs kan ta emot händelser från externa enheter och mobilappar, utan att bedrägeridata riskerar att förstöra analysen.</span><span class="sxs-lookup"><span data-stu-id="4cae7-127">This means Event Hubs can accept events from external devices and mobile apps, without worrying that fraudulent data from pranksters could ruin our analysis.</span></span> 

## <a name="using-event-hubs"></a><span data-ttu-id="4cae7-128">Använda Event Hubs</span><span class="sxs-lookup"><span data-stu-id="4cae7-128">Using Event Hubs</span></span>

<span data-ttu-id="4cae7-129">Event Hubs har stöd för pipelining av händelseströmmar till andra Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="4cae7-129">Event Hubs has support for pipelining event streams to other Azure services.</span></span> <span data-ttu-id="4cae7-130">Om det används med Azure Stream Analytics möjliggörs till exempel komplexa dataanalyser nära nog i realtid, där flera händelser kan korreleras och mönster upptäckas.</span><span class="sxs-lookup"><span data-stu-id="4cae7-130">Using it with Azure Stream Analytics, for instance, allows complex analysis of data in near real time, with the ability to correlate multiple events and look for patterns.</span></span> <span data-ttu-id="4cae7-131">I det här fallet anses Stream Analytics vara en prenumerant.</span><span class="sxs-lookup"><span data-stu-id="4cae7-131">In this case, Stream Analytics would be considered a subscriber.</span></span>

<span data-ttu-id="4cae7-132">När det gäller våra flygplansmotorer konfigurerar vi arkitekturen så att Event Hubs autentiserar kommunikationen från motorerna.</span><span class="sxs-lookup"><span data-stu-id="4cae7-132">For our aircraft engines, we'll set up our architecture so that Event Hubs will authenticate the communications from our engines.</span></span> <span data-ttu-id="4cae7-133">Sedan låter vi den använda Capture för att spara alla data i Data Lake.</span><span class="sxs-lookup"><span data-stu-id="4cae7-133">We will then have it use capture to save all the data to Data Lake.</span></span> <span data-ttu-id="4cae7-134">Senare kan vi använda alla data för att träna och förbättra våra maskininlärningsmodeller.</span><span class="sxs-lookup"><span data-stu-id="4cae7-134">Later, we can use all that data to retrain and improve our machine learning models.</span></span> <span data-ttu-id="4cae7-135">Slutligen hämtas våra händelseströmmar av Stream Analytics-prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="4cae7-135">Finally, our event streams will be picked up by Stream Analytics subscribers.</span></span> <span data-ttu-id="4cae7-136">Stream Analytics använder vår maskininlärningsmodell för att leta efter mönster i sensorinformationen som kan indikera problem.</span><span class="sxs-lookup"><span data-stu-id="4cae7-136">Stream Analytics will use our machine learning model to look for patterns in the sensor data that might indicate problems.</span></span>

<span data-ttu-id="4cae7-137">Eftersom vi har flera partitioner och varje motor endast skickar sina data till en partition, behöver varje instans av Stream Analytics-prenumeranten endast hantera en delmängd av den fullständiga datamängden.</span><span class="sxs-lookup"><span data-stu-id="4cae7-137">Because we have several partitions, and each engine sends all its data to only one partition, each instance of our Stream Analytics subscriber only need deal with a subset of our overall data.</span></span> <span data-ttu-id="4cae7-138">Den behöver inte filtrera och korrelera dem alla.</span><span class="sxs-lookup"><span data-stu-id="4cae7-138">It does not have to filter and correlate over all of it.</span></span>

## <a name="choose-event-grid-or-event-hubs"></a><span data-ttu-id="4cae7-139">Välja Event Grid eller Event Hubs</span><span class="sxs-lookup"><span data-stu-id="4cae7-139">Choose Event Grid or Event Hubs</span></span>

<span data-ttu-id="4cae7-140">Båda har stöd för *minst en gång*-semantik.</span><span class="sxs-lookup"><span data-stu-id="4cae7-140">Both support *At Least Once* semantics.</span></span>

<span data-ttu-id="4cae7-141">Om du behöver en enkel händelseinfrastruktur med publicera-prenumerera och betrodda utgivare (till exempel din egen webbserver), bör du välja Event Grid.</span><span class="sxs-lookup"><span data-stu-id="4cae7-141">If you need a simple event publish-subscribe infrastructure, with trusted publishers (for instance, your own web server), you should choose Event Grid.</span></span>

<span data-ttu-id="4cae7-142">Överväg att använda Event Hubs om</span><span class="sxs-lookup"><span data-stu-id="4cae7-142">Consider Event Hubs if:</span></span>
* <span data-ttu-id="4cae7-143">du behöver kunna autentisera ett stort antal utgivare</span><span class="sxs-lookup"><span data-stu-id="4cae7-143">You need to support authenticating a large number of publishers.</span></span>
* <span data-ttu-id="4cae7-144">Du behöver kunna spara en händelseström i Data Lake eller i blobblagringen.</span><span class="sxs-lookup"><span data-stu-id="4cae7-144">You need to save a stream of events to Data Lake or Blob storage.</span></span>
* <span data-ttu-id="4cae7-145">Du behöver kunna aggregera eller analysera din händelseström.</span><span class="sxs-lookup"><span data-stu-id="4cae7-145">You need aggregation or analytics on your event stream.</span></span>
* <span data-ttu-id="4cae7-146">du behöver tillförlitlig meddelandehantering eller återhämtning.</span><span class="sxs-lookup"><span data-stu-id="4cae7-146">You need reliable messaging or resiliency.</span></span> 