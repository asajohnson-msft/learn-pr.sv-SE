<span data-ttu-id="6f615-101">Anta att du planerar arkitekturen till ett distribuerat program för delning av musik.</span><span class="sxs-lookup"><span data-stu-id="6f615-101">Suppose you are planning the architecture of a distributed music-sharing application.</span></span> <span data-ttu-id="6f615-102">Du vill att programmet ska vara så tillförlitligt och skalbart som möjligt och du planerar att använda Azure-tekniker till att bygga en robust kommunikationsinfrastruktur.</span><span class="sxs-lookup"><span data-stu-id="6f615-102">You want to ensure that the application is as reliable and scalable as possible and you intend to use Azure technologies to build a robust communication infrastructure.</span></span>

<span data-ttu-id="6f615-103">Innan du kan välja rätt Azure-teknik, måste du förstå varje enskild kommunikation som komponenterna i programmet utbyter.</span><span class="sxs-lookup"><span data-stu-id="6f615-103">Before you can choose the right Azure technology, you must understand each individual communication that the components of the application exchange.</span></span> <span data-ttu-id="6f615-104">Du kan välja olika Azure-tekniker för olika sorters kommunikation.</span><span class="sxs-lookup"><span data-stu-id="6f615-104">For each communication you can choose a different Azure technology.</span></span>

<span data-ttu-id="6f615-105">Det första du ska ta reda på är om en kommunikation skickar meddelanden eller händelser.</span><span class="sxs-lookup"><span data-stu-id="6f615-105">The first thing to understand about a communication is whether it sends messages or events.</span></span> <span data-ttu-id="6f615-106">Vissa Azure-tekniker skickar händelser och andra skickar meddelanden, så detta är ett viktigt val.</span><span class="sxs-lookup"><span data-stu-id="6f615-106">Some Azure technologies target events and other target messages so this is a fundamental choice.</span></span>

## <a name="what-is-a-message"></a><span data-ttu-id="6f615-107">Vad är ett meddelande?</span><span class="sxs-lookup"><span data-stu-id="6f615-107">What is a message?</span></span>

<span data-ttu-id="6f615-108">I terminologin för distribuerade program har **meddelanden** följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="6f615-108">In the terminology of distributed applications, **messages** have the following characteristics:</span></span>

- <span data-ttu-id="6f615-109">Meddelandet innehåller rådata som genereras av en komponent och som ska användas av en annan komponent.</span><span class="sxs-lookup"><span data-stu-id="6f615-109">A message contains raw data, produced by one component, that will be consumed by another component.</span></span>
- <span data-ttu-id="6f615-110">Ett meddelande innehåller själva informationen, inte bara en referens till dessa data.</span><span class="sxs-lookup"><span data-stu-id="6f615-110">A message contains the data itself, not just a reference to that data.</span></span>
- <span data-ttu-id="6f615-111">Den sändande komponenten förväntar sig att meddelandeinnehållet ska bearbetas på ett visst sätt av målkomponenten.</span><span class="sxs-lookup"><span data-stu-id="6f615-111">The sending component expects the message content to be processed in a certain way by the destination component.</span></span> <span data-ttu-id="6f615-112">Det övergripande systemets integritet kan vara beroende av att både avsändaren och mottagaren utför ett specifikt jobb.</span><span class="sxs-lookup"><span data-stu-id="6f615-112">The integrity of the overall system may depend on both sender and receiver doing a specific job.</span></span>

<span data-ttu-id="6f615-113">Anta exempelvis att en användare laddar upp en ny låt med hjälp av mobilappen för musikdelning.</span><span class="sxs-lookup"><span data-stu-id="6f615-113">For example, suppose a user uploads a new song by using the mobile music-sharing app.</span></span> <span data-ttu-id="6f615-114">Mobilappen måste skicka låten till den webb-API som körs i Azure.</span><span class="sxs-lookup"><span data-stu-id="6f615-114">The mobile app must send that song to the web API that runs in Azure.</span></span> <span data-ttu-id="6f615-115">Själva mediefilen måste skickas, inte bara en avisering som anger att en ny låt har lagts till.</span><span class="sxs-lookup"><span data-stu-id="6f615-115">The song media file itself must be sent, not just an alert that indicates that a new song has been added.</span></span> <span data-ttu-id="6f615-116">Mobilappen förväntar sig att webb-API:n sparar den nya låten i databasen och gör den tillgänglig för andra användare.</span><span class="sxs-lookup"><span data-stu-id="6f615-116">The mobile app expects that the web API will store the new song in the database and make it available to other users.</span></span> <span data-ttu-id="6f615-117">Detta är ett exempel på ett meddelande.</span><span class="sxs-lookup"><span data-stu-id="6f615-117">This is an example of a message.</span></span>

## <a name="what-is-an-event"></a><span data-ttu-id="6f615-118">Vad är en händelse?</span><span class="sxs-lookup"><span data-stu-id="6f615-118">What is an event?</span></span>

<span data-ttu-id="6f615-119">**Händelser** är enklare än meddelanden och används oftast för sändningskommunikation.</span><span class="sxs-lookup"><span data-stu-id="6f615-119">**Events** are lighter-weight than messages and are most often used for broadcast communications.</span></span> <span data-ttu-id="6f615-120">De komponenter som skickar händelsen kallas för **utgivare** och mottagare kallas för **prenumeranter**.</span><span class="sxs-lookup"><span data-stu-id="6f615-120">The components sending the event are known as **publishers** and receivers are known as **subscribers**.</span></span>

<span data-ttu-id="6f615-121">Med händelser avgör mottagande komponenter i allmänhet vilken kommunikation man är intresserad av och därefter ”prenumererar” man på den.</span><span class="sxs-lookup"><span data-stu-id="6f615-121">With events, receiving components will generally decide in which communications they are interested and "subscribe" to those.</span></span> <span data-ttu-id="6f615-122">Prenumerationen hanteras vanligtvis av en mellanhand som Azure Event Grid eller Azure Event Hub.</span><span class="sxs-lookup"><span data-stu-id="6f615-122">The subscription is usually managed by an intermediary like Azure Event Grid or Azure Event Hub.</span></span> <span data-ttu-id="6f615-123">När utgivaren skickar en händelse kommer mellanhanden att dirigera händelsen till intresserade prenumeranter.</span><span class="sxs-lookup"><span data-stu-id="6f615-123">When publishers send an event, the intermediary will route that event to interested subscribers.</span></span> <span data-ttu-id="6f615-124">Detta kallas för en ”publicera/prenumerera-arkitektur”. Det är inte det enda sättet att hantera händelser på, men det är det vanligaste.</span><span class="sxs-lookup"><span data-stu-id="6f615-124">This is known as a "publish-subscribe architecture", it is not the only way to deal with events, but it is the most common.</span></span>

<span data-ttu-id="6f615-125">Händelser har följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="6f615-125">Events have the following characteristics:</span></span>

- <span data-ttu-id="6f615-126">En händelse är ett förenklat meddelande som anger att något har inträffat.</span><span class="sxs-lookup"><span data-stu-id="6f615-126">An event is a lightweight notification that indicates that something happened.</span></span>
- <span data-ttu-id="6f615-127">Händelsen kan skickas till flera mottagare eller inte till någon alls.</span><span class="sxs-lookup"><span data-stu-id="6f615-127">The event may be sent to multiple receivers or to none at all.</span></span>
- <span data-ttu-id="6f615-128">Händelser är ofta avsedda att ”förgrenas” eller har ett stort antal prenumeranter för varje utgivare.</span><span class="sxs-lookup"><span data-stu-id="6f615-128">Events are often intended to "fan-out" or have a large number of subscribers for each publisher.</span></span>
- <span data-ttu-id="6f615-129">Utgivaren av händelsen har ingen förväntan på åtgärder från den mottagande komponenten.</span><span class="sxs-lookup"><span data-stu-id="6f615-129">The publisher of the event has no expectation about the action a receiving component takes.</span></span>
- <span data-ttu-id="6f615-130">Vissa händelser är diskreta enheter som inte är relaterade till andra händelser.</span><span class="sxs-lookup"><span data-stu-id="6f615-130">Some events are discrete units and unrelated to other events.</span></span> 
- <span data-ttu-id="6f615-131">Vissa händelser är en del av en relaterad och ordnad serie.</span><span class="sxs-lookup"><span data-stu-id="6f615-131">Some events are part of a related and ordered series.</span></span>  

<span data-ttu-id="6f615-132">Anta exempelvis att filöverföringen av musik har slutförts och att en ny låt har lagts till i databasen.</span><span class="sxs-lookup"><span data-stu-id="6f615-132">For example, suppose the music file upload has been completed and the new song has been added to the database.</span></span> <span data-ttu-id="6f615-133">För att kunna informera användarna om den nya filen måste webb-API:n meddela webbklientdelen och mobilappanvändarna om detta.</span><span class="sxs-lookup"><span data-stu-id="6f615-133">In order to inform users of the new file, the web API must inform the web front-end and mobile app users of the new file.</span></span> <span data-ttu-id="6f615-134">Användarna kan välja om de vill lyssna på den nya låten. Därför innehåller den första aviseringen inte musikfilen, utan meddelar bara användarna om att låten finns.</span><span class="sxs-lookup"><span data-stu-id="6f615-134">The users can choose whether to listen to the new song, so the initial notification does not include the music file but only notifies users that the song exists.</span></span> <span data-ttu-id="6f615-135">Avsändaren har inte någon specifik förväntan på att händelsemottagarna ska göra något särskilt som svar på mottagandet av händelsen.</span><span class="sxs-lookup"><span data-stu-id="6f615-135">The sender does not have a specific expectation that the event receivers will do anything particular in response the receiving this event.</span></span>

<span data-ttu-id="6f615-136">Detta är ett exempel på en diskret händelse.</span><span class="sxs-lookup"><span data-stu-id="6f615-136">This is an example of a discrete event.</span></span>

## <a name="how-to-choose-messages-or-events"></a><span data-ttu-id="6f615-137">Att välja meddelanden eller händelser</span><span class="sxs-lookup"><span data-stu-id="6f615-137">How to choose messages or events</span></span>

<span data-ttu-id="6f615-138">Ett program använder troligen händelser för vissa syften och meddelanden för andra.</span><span class="sxs-lookup"><span data-stu-id="6f615-138">A single application is likely to use events for some purposes and messages for others.</span></span> <span data-ttu-id="6f615-139">Innan du väljer måste du analysera din programarkitektur och dess användning för att identifiera de olika syften som dess komponenter har för att kommunicera med varandra.</span><span class="sxs-lookup"><span data-stu-id="6f615-139">Before you choose, you must analyze your application architecture and all its use cases to identify all the different purposes its components have to communicate with each other.</span></span> 

<span data-ttu-id="6f615-140">Händelser används troligen för sändningar och är ofta tillfälliga, vilket innebär att ett meddelande kanske inte hanteras av någon mottagare om ingen prenumererar för närvarande.</span><span class="sxs-lookup"><span data-stu-id="6f615-140">Events are more likely to be used for broadcasts and are often ephemeral, meaning a communication might not be handled by any receiver if none are currently subscribing.</span></span> <span data-ttu-id="6f615-141">Det är sannolikt att meddelanden används där det distribuerade programmet kräver en garanti för att kommunikationen kommer att bearbetas.</span><span class="sxs-lookup"><span data-stu-id="6f615-141">Messages are more likely to be used where the distributed application requires a guarantee that the communication will be processed.</span></span>

<span data-ttu-id="6f615-142">För varje typ av kommunikation bör du ställa dig frågan: Förväntar den sändande komponenten att kommunikationen ska bearbetas på ett visst sätt av målkomponenten?</span><span class="sxs-lookup"><span data-stu-id="6f615-142">For each communication consider the question: Does the sending component expect the communication to be processed in a particular way by the destination component?</span></span>

<span data-ttu-id="6f615-143">Om svaret är Ja bör du välja att använda ett meddelande.</span><span class="sxs-lookup"><span data-stu-id="6f615-143">If the answer is yes, choose to use a message.</span></span> <span data-ttu-id="6f615-144">Om svaret är Nej kan du använda händelser.</span><span class="sxs-lookup"><span data-stu-id="6f615-144">If the answer is no, you may be able to use events.</span></span>

## <a name="summary"></a><span data-ttu-id="6f615-145">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="6f615-145">Summary</span></span>

<span data-ttu-id="6f615-146">Komponenterna i ett distribuerat program kommunicerar med varandra i många olika syften.</span><span class="sxs-lookup"><span data-stu-id="6f615-146">The components of a distributed application communicate with each other for many different purposes.</span></span> <span data-ttu-id="6f615-147">För vart och ett av dessa syften måste du välja om du vill använda händelser eller meddelanden, för att du ska kunna använda en Azure-teknik som har utformats för ändamålet.</span><span class="sxs-lookup"><span data-stu-id="6f615-147">For each of these purposes, you must choose whether to use events or messages so that you can choose an Azure technology that is designed for that purpose.</span></span> 

<span data-ttu-id="6f615-148">När du har förstått varför dina komponenter kommunicerar och om de använder händelser eller meddelanden, kan du fortsätta med att välja mellan Azure Storage-köer, Event Hubs, Event Grid eller Service Bus för att utbyta informationen.</span><span class="sxs-lookup"><span data-stu-id="6f615-148">Having understood why your components communicate and whether they use events or messages, you can proceed to choose from Azure Storage queues, Event Hubs, Event Grids, or Service Bus to exchange the information.</span></span>