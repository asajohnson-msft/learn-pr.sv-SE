<span data-ttu-id="4ee5e-101">Vårt mål är alltså att flytta en befintlig Linux-server som kör Apache till Azure.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-101">Recall that our goal is to move an existing Linux server running Apache to Azure.</span></span> <span data-ttu-id="4ee5e-102">Vi börjar med att skapa en Ubuntu Linux-server.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-102">We'll start by creating an Ubuntu Linux server.</span></span>

## <a name="create-a-new-linux-virtual-machine"></a><span data-ttu-id="4ee5e-103">Skapa en ny virtuell Linux-dator</span><span class="sxs-lookup"><span data-stu-id="4ee5e-103">Create a new Linux virtual machine</span></span>

<span data-ttu-id="4ee5e-104">Vi kan skapa en virtuell Linux-dator via Microsoft Azure-portalen, Azure CLI eller Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-104">We can create Linux VMs with the Azure portal, the Azure CLI, or Azure PowerShell.</span></span> <span data-ttu-id="4ee5e-105">Den enklaste metoden när du börjar med Azure är att använda portalen, eftersom den går igenom den information som krävs samt visar tips och användbara meddelanden medan du skapar den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-105">The easiest approach when you are starting with Azure is to use the portal because it walks you through the required information and provides hints and helpful messages during the creation:</span></span>

1. <span data-ttu-id="4ee5e-106">Logga in på [Microsoft Azure-portalen](https://portal.azure.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="4ee5e-106">Sign into the [Azure portal](https://portal.azure.com?azure-portal=true).</span></span>

1. <span data-ttu-id="4ee5e-107">Klicka på **Skapa en resurs** längst upp till vänster i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-107">Click **Create a resource** in the upper-left corner of the Azure portal.</span></span>

1. <span data-ttu-id="4ee5e-108">I sökrutan anger du **Ubuntu Server** för att se de olika versionerna som finns tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-108">In the search box, enter  **Ubuntu Server** to see the different versions available.</span></span> <span data-ttu-id="4ee5e-109">Välj **Ubuntu Server 18.04** från den visade listan.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-109">Select **Ubuntu Server 18.04** from the presented list.</span></span>

1. <span data-ttu-id="4ee5e-110">Klicka på knappen **Skapa** för att börja konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-110">Click the **Create** button to start configuring the VM.</span></span>

## <a name="configure-the-vm-settings"></a><span data-ttu-id="4ee5e-111">Konfigurera inställningar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="4ee5e-111">Configure the VM settings</span></span>

<span data-ttu-id="4ee5e-112">När du skapar en virtuell dator via portalen går du igenom en **guide** där du vägleds genom alla konfigurationsområden.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-112">The VM creation experience in the portal is presented in a **wizard** format to walk you through all the configuration areas for the VM.</span></span> <span data-ttu-id="4ee5e-113">När du klickar på **Nästa** kommer du till nästa konfigurerbara avsnitt.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-113">Clicking the **Next** button will take you to the next configurable section.</span></span> <span data-ttu-id="4ee5e-114">Du kan dock förflytta dig mellan avsnitten när du vill med hjälp av flikarna som visas längs överkanten och som identifierar varje del.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-114">However, you can move between the sections at will with the tabs running across the top that identify each part.</span></span>

![Skärmbild av Microsoft Azure-portalen som visar första bladet för att skapa en virtuell dator för en Ubuntu Server-dator.](../media/3-azure-portal-create-vm.png)

<span data-ttu-id="4ee5e-116">När du har fyllt i alla obligatoriska alternativ (som anges med röda stjärnor) kan du hoppa över resten av guiden och börja skapa den virtuella datorn med hjälp av knappen **Granska + skapa**, som visas längst ned.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-116">Once you fill in all the required options (identified with red stars), you can skip the remainder of the wizard experience and start creating the VM through the **Review + Create** button at the bottom.</span></span>

<span data-ttu-id="4ee5e-117">Vi börjar med avsnittet **Grundläggande inställningar**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-117">We'll start with the **Basics** section.</span></span>

### <a name="configure-basic-vm-settings"></a><span data-ttu-id="4ee5e-118">Konfigurera grundläggande inställningar för en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="4ee5e-118">Configure basic VM settings</span></span>

1. <span data-ttu-id="4ee5e-119">Välj den **prenumeration** som den virtuella datorns körningstimmar ska debiteras mot.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-119">Select the **Subscription** that should be billed for VM hours.</span></span>

1. <span data-ttu-id="4ee5e-120">Välj **Skapa ny** under **Resursgrupp** och ge resursgruppen namnet **ExerciseResources**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-120">For **Resource group**, select **Create new** and give the resource group the name **ExerciseResources**.</span></span>

> [!NOTE]  
> <span data-ttu-id="4ee5e-121">När du ändrar inställningar och flyttar från fälten valideras värdena automatiskt av Azure, och en grön bock visas bredvid dem om de är giltiga.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-121">As you change settings and tab out of each field, Azure will validate each value automatically and place a green check mark next to it when it's good.</span></span> <span data-ttu-id="4ee5e-122">Du kan hålla muspekaren över felindikatorerna om du vill visa mer information om upptäckta problem.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-122">You can hover over error indicators to get more information on issues it discovers.</span></span>

1. <span data-ttu-id="4ee5e-123">I avsnittet **INSTANSINFORMATION** anger du ett namn på den virtuella webbserverdatorn, till exempel **test-web-eus-vm1**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-123">In the **INSTANCE DETAILS** section, enter a name for your web server VM, such as **test-web-eus-vm1**.</span></span> <span data-ttu-id="4ee5e-124">Detta anger miljön (**test**), rollen (**web**), platsen (**East US**), tjänsten (**vm**) och instansnumret (**1**).</span><span class="sxs-lookup"><span data-stu-id="4ee5e-124">This indicates the environment (**test**), the role (**web**), location (**East US**), service (**vm**), and instance number (**1**).</span></span>
    - <span data-ttu-id="4ee5e-125">Det är bästa praxis att standardisera resursnamnen så att du snabbt kan identifiera deras syfte.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-125">It's a best practice to standardize your resource names, so you can quickly identify their purpose.</span></span> <span data-ttu-id="4ee5e-126">Namn på virtuella Linux-datorer måste vara mellan 1 och 64 tecken långa, och måste bestå av siffror, bokstäver och bindestreck.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-126">Linux VM names must be between 1 and 64 characters and be comprised of numbers, letters, and dashes.</span></span>

1. <span data-ttu-id="4ee5e-127">Välj en region nära dig; vi har valt **USA, östra**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-127">Select a region close to you; we've chosen **East US**.</span></span>

1. <span data-ttu-id="4ee5e-128">Låt **Inga** stå kvar under **Tillgänglighetsalternativ**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-128">Leave **Availability options** as **None**.</span></span> <span data-ttu-id="4ee5e-129">Det här alternativet säkerställer att den virtuella datorn har hög tillgänglighet genom att gruppera flera virtuella datorer, vilket underlättar hanteringen av planerade eller oplanerade underhållsåtgärder eller avbrott.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-129">This option is used to ensure the VM is highly available by grouping multiple VMs together as a set to deal with planned or unplanned maintenance events or outages.</span></span>

1. <span data-ttu-id="4ee5e-130">Se till att avbildningen är inställd på **Ubuntu Server 18.04 LTS**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-130">Ensure that the image is set to **Ubuntu Server 18.04 LTS**.</span></span> <span data-ttu-id="4ee5e-131">Du kan öppna listrutan om du vill visa alla tillgängliga alternativ.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-131">You can open the drop-down list to see all the options available.</span></span>

1. <span data-ttu-id="4ee5e-132">Fältet **Storlek** kan inte redigeras direkt och har en standardstorlek på **DS2_v3**, vilket är ett av alternativen för generella beräkningar.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-132">The **Size** field is not directly editable and has a **DS2_v3** default size, which is one of the general-purpose computing selections.</span></span> <span data-ttu-id="4ee5e-133">Det här valet är perfekt för en offentlig webbserver, men klicka gärna på länken **Ändra storlek** om du vill utforska andra storlekar för virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-133">This choice is perfect for a public web server, but click the **Change size** link to explore other VM sizes.</span></span> <span data-ttu-id="4ee5e-134">I dialogrutan som visas kan du filtrera baserat på **antal processorer**, **namn** och **disktyp**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-134">The resulting dialog allows you to filter based on **# of CPUs**, **Name**, and **Disk Type**.</span></span> <span data-ttu-id="4ee5e-135">Välj samma **DS2_v3**-alternativ, så får du två virtuella processorer med 8 GB RAM.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-135">Select the same **DS2_v3** choice, which gives you two vCPUs with 8 GB of RAM.</span></span>

    > [!TIP]
    > <span data-ttu-id="4ee5e-136">Du kan även dra vyn åt vänster om du vill gå tillbaka till inställningarna för den virtuella datorn, eftersom ett nytt fönster öppnades till höger och hamnade ovanpå inställningsfönstret.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-136">You can also slide the view to the left to get back to the VM settings as it opened a new window off to the right and slid the window over to view it.</span></span>

1. <span data-ttu-id="4ee5e-137">I avsnittet **ADMINISTRATÖRSÅTKOMST** väljer du alternativet offentlig SSH-nyckel för **Autentiseringstyp**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-137">In the **ADMINISTRATOR ACCESS** section, select the SSH public key option for **Authentication type**.</span></span>

1. <span data-ttu-id="4ee5e-138">Ange ett **användarnamn** som du kommer att använda för att logga in med SSH.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-138">Enter a **username** you'll use to sign in with SSH.</span></span>

1. <span data-ttu-id="4ee5e-139">Kopiera SSH-nyckeln från filen med din offentliga nyckel och klistra in den i fältet **Offentlig SSH-nyckel**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-139">Copy the SSH key from your public key file and paste it into the **SSH public key** field.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4ee5e-140">När du kopierar den offentliga nyckeln till Microsoft Azure-portalen ska du se till att inte lägga till några extra blanksteg eller radmatningstecken.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-140">When you copy the public key into the Azure portal, make sure not to add any additional whitespace or linefeed characters.</span></span>

1. <span data-ttu-id="4ee5e-141">I avsnittet **REGLER FÖR INKOMMANDE PORTAR** öppnar du listan och avmarkerar **Inga**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-141">In the **INBOUND PORT RULES** section, open the list and uncheck **None**.</span></span> <span data-ttu-id="4ee5e-142">Eftersom det här är en virtuell Linux-dator vill vi kunna komma åt den virtuella datorn via SSH med fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-142">Since this is a Linux VM, we want to be able to access the VM using SSH remotely.</span></span> <span data-ttu-id="4ee5e-143">Vid behov kan du bläddra i listan tills du hittar alternativet **ssh (22)**, som du sedan väljer.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-143">Scroll the list if necessary until you find **ssh (22)** and select it.</span></span> <span data-ttu-id="4ee5e-144">Som anmärkningen i användargränssnittet anger kan vi även ändra nätverksportarna efter att vi har skapat den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-144">As the note in the UI indicates, we can also adjust the network ports after we create the VM.</span></span>

    ![Skärmbild av Microsoft Azure-portalen som visar administratörskontot och inställningarna för inkommande port som används vid öppnande av en virtuell Linux-dator för SSH-åtkomst.](../media/3-open-ports.png) 

## <a name="configure-disks-for-the-vm"></a><span data-ttu-id="4ee5e-146">Konfigurera diskar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="4ee5e-146">Configure disks for the VM</span></span>

1. <span data-ttu-id="4ee5e-147">Gå till avsnittet **Diskar** genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-147">Click **Next** to move to the **Disks** section.</span></span>

    ![Skärmbild av Microsoft Azure-portalen som visar avsnittet Diskar i bladet Skapa en virtuell dator.](../media/3-configure-disks.png) 

1. <span data-ttu-id="4ee5e-149">Ange **Premium SSD** som **OS-disktyp**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-149">Choose **Premium SSD** for the **OS disk type**.</span></span>

1. <span data-ttu-id="4ee5e-150">Använd hanterade diskar så att vi inte behöver arbeta med lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-150">Use managed disks, so we don't have to work with storage accounts.</span></span> <span data-ttu-id="4ee5e-151">Om du vill kan du växla inställningen i det grafiska användargränssnittet för att se skillnaden mellan vilken information Azure behöver.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-151">You can flip the switch in the GUI to see the difference in information that Azure needs if you like.</span></span>

### <a name="create-a-data-disk"></a><span data-ttu-id="4ee5e-152">Skapa en datadisk</span><span class="sxs-lookup"><span data-stu-id="4ee5e-152">Create a data disk</span></span>

<span data-ttu-id="4ee5e-153">Som du kanske minns har vi en operativsystemdisk (/dev/sda) och en tillfällig disk (/dev/sdb).</span><span class="sxs-lookup"><span data-stu-id="4ee5e-153">Recall that we will get an OS disk (/dev/sda) and a temporary disk (/dev/sdb).</span></span> <span data-ttu-id="4ee5e-154">Nu ska vi lägga till en datadisk också:</span><span class="sxs-lookup"><span data-stu-id="4ee5e-154">Let's add a data disk as well:</span></span>

1. <span data-ttu-id="4ee5e-155">Klicka på länken **Create and attach a new disk** (Skapa och koppla en ny disk) i avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-155">Click the **Create and attach a new disk** link in the **DATA DISKS** section.</span></span>

    ![Skärmbild av Microsoft Azure-portalen som visar bladet Skapa en ny disk.](../media/3-add-data-disk.png) 

1. <span data-ttu-id="4ee5e-157">Du kan använda alla standardvärden: Premium SSD, 1023 GB och **Ingen** (tom disk). Observera att det är här vi skulle kunna använda en ögonblicksbild eller Storage Blob för att skapa en virtuell hårddisk.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-157">You can take all the defaults: Premium SSD, 1023 GB, and **None** (empty disk), although notice that here is where we could use a snapshot or Azure Blob storage to create a VHD.</span></span>

1. <span data-ttu-id="4ee5e-158">Klicka på **OK** så att skapa disken skapas och gå sedan tillbaka till avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-158">Click **OK** to create the disk and go back to the **DATA DISKS** section.</span></span>

1. <span data-ttu-id="4ee5e-159">En ny disk bör visas på den första raden.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-159">There should now be a new disk in the first row.</span></span>

    ![Skärmbild av Microsoft Azure-portalen som visar den nya raden för datadisken vid skapande av en virtuell dator.](../media/3-new-disk.png) 

## <a name="configure-the-network"></a><span data-ttu-id="4ee5e-161">Konfigurera nätverket</span><span class="sxs-lookup"><span data-stu-id="4ee5e-161">Configure the network</span></span>

1. <span data-ttu-id="4ee5e-162">Gå till avsnittet **Nätverk** genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-162">Click **Next** to move to the **Networking** section.</span></span>

1. <span data-ttu-id="4ee5e-163">I ett produktionssystem där vi redan har andra komponenter vill vi använda ett _befintligt_ virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-163">In a production system where we already have other components, we'd want to utilize an _existing_ virtual network.</span></span> <span data-ttu-id="4ee5e-164">På så sätt kan vår virtuella dator kommunicera med de andra molntjänsterna i vår lösning.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-164">That way, our VM can communicate with the other cloud services in our solution.</span></span> <span data-ttu-id="4ee5e-165">Om ingenting har definierats på den här platsen än kan vi skapa det här och konfigurera följande:</span><span class="sxs-lookup"><span data-stu-id="4ee5e-165">If there isn't one defined in this location yet, we can create it here and configure the:</span></span>
    - <span data-ttu-id="4ee5e-166">**Adressutrymme**: Hela det IPV4-utrymme som är tillgängligt för nätverket.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-166">**Address space**: The overall IPV4 space available to this network.</span></span>
    - <span data-ttu-id="4ee5e-167">**Intervall för undernät**: Det första undernätet som delar in adressutrymmet i underordnade nät – det måste ligga inom det definierade adressutrymmet.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-167">**Subnet range**: The first subnet to subdivide the address space - it must fit within the defined address space.</span></span> <span data-ttu-id="4ee5e-168">När det virtuella nätverket har skapats kan du lägga till fler undernät.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-168">Once the VNet is created, you can add additional subnets.</span></span>

> [!NOTE]  
> <span data-ttu-id="4ee5e-169">Som standard skapar Azure ett virtuellt nätverk, ett nätverksgränssnitt och en offentlig IP-adress för din virtuella dator.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-169">By default, Azure will create a virtual network, network interface, and public IP for your VM.</span></span> <span data-ttu-id="4ee5e-170">Det är inte helt okomplicerat att ändra nätverksalternativen i efterhand när den virtuella datorn redan har skapats. Därför bör du alltid dubbelkolla nätverkstilldelningarna för de tjänster som du skapar i Azure.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-170">It's not trivial to change the networking options after the VM has been created, so always double-check the network assignments on services you create in Azure.</span></span>

## <a name="finish-configuring-the-vm-and-create-the-image"></a><span data-ttu-id="4ee5e-171">Slutför konfigurationen av den virtuella datorn och skapa avbildningen.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-171">Finish configuring the VM and create the image</span></span>

<span data-ttu-id="4ee5e-172">Resten av alternativen har redan lämpliga standardinställningar och du behöver inte ändra dem.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-172">The rest of the options have reasonable defaults, and there's no need to change any of them.</span></span> <span data-ttu-id="4ee5e-173">Utforska de andra flikarna om du vill.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-173">You can explore the other tabs if you like.</span></span> <span data-ttu-id="4ee5e-174">Bredvid respektive alternativ visas en `(i)`-ikon som kan användas för att visa en hjälpbubbla med en beskrivning av alternativet.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-174">The individual options have an `(i)` icon next to them that will show a help bubble to explain the option.</span></span> <span data-ttu-id="4ee5e-175">Beskrivningen är ett bra sätt att lära dig mer om de olika alternativen som du kan använda för att konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-175">This is a great way to learn about the various options you can use to configure the VM:</span></span>

1. <span data-ttu-id="4ee5e-176">Klicka på knappen **Granska + skapa** längst ned på panelen.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-176">Click the **Review + create** button at the bottom of the panel.</span></span>

1. <span data-ttu-id="4ee5e-177">Systemet validerar alternativen och visar information om den virtuella datorn som skapas.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-177">The system will validate your options and give you details about the VM being created.</span></span>

1. <span data-ttu-id="4ee5e-178">Skapa och distribuera den virtuella datorn genom att klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-178">Click **Create** to create and deploy the VM.</span></span> <span data-ttu-id="4ee5e-179">På instrumentpanelen i Azure ser du den virtuella dator som distribueras.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-179">The Azure dashboard will show the VM that's being deployed.</span></span> <span data-ttu-id="4ee5e-180">Det här kan ta flera minuter.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-180">This may take several minutes.</span></span>

<span data-ttu-id="4ee5e-181">Medan den virtuella datorn distribueras ska vi titta närmare på vad vi kan göra med den.</span><span class="sxs-lookup"><span data-stu-id="4ee5e-181">While that's deploying, let's look at what we can do with this VM.</span></span>