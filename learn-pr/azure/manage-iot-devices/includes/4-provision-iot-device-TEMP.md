<span data-ttu-id="b52cb-101">Nu när du vet hur Azure IoT Hub samlar in data från IoT-enheter, till exempel Raspberry Pi, kan du gå vidare med att etablera andra IoT-enheter som också ska skicka sina data.</span><span class="sxs-lookup"><span data-stu-id="b52cb-101">Now that you have an understanding of how Azure IoT Hub collects data from IoT devices such as the Raspberry Pi you can now move forward to provision other IoT devices to send their data as well.</span></span> <span data-ttu-id="b52cb-102">En fullständig installation av IoT-enheter i ett litet projekt (1–5 enheter) kan göras 1 till 1.</span><span class="sxs-lookup"><span data-stu-id="b52cb-102">Completing setup of IoT devices in a small project (1-5 devices) can be done 1 to 1.</span></span> <span data-ttu-id="b52cb-103">Större distributioner kräver en bättre metod för etableringen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-103">Larger deployments would require a better method for provisioning.</span></span>

<span data-ttu-id="b52cb-104">Med Azure IoT Hub Device Provisioning Service kan kunderna konfigurera zero-touch-enhetsetablering på Azure IoT Hub, med all skalbarhet i molnet för något som en gång var en tidskrävande engångsprocess.</span><span class="sxs-lookup"><span data-stu-id="b52cb-104">Azure IoT Hub Device Provisioning Service enables customers to configure zero-touch device provisioning to Azure IoT Hub, and it brings the scalability of the cloud to what was once a lengthy one-at-a-time process.</span></span> <span data-ttu-id="b52cb-105">Processen har utformats med utmaningarna i leveranskedjan i åtanke för att kunna tillhandahålla den infrastruktur som krävs för att etablera miljontals enheter på ett säkert och skalbart sätt.</span><span class="sxs-lookup"><span data-stu-id="b52cb-105">The process was designed with the challenges of the supply chain in mind, providing the infrastructure needed to provision millions of devices in a secure and scalable manner.</span></span>

<span data-ttu-id="b52cb-106">Automatisk enhetsetablering med Device Provisioning Service har nu stöd för alla protokoll som stöds av IoT Hub, inklusive HTTP, AMQP, MQTT, AMQP via WebSockets och MQTT via WebSockets.</span><span class="sxs-lookup"><span data-stu-id="b52cb-106">Automatic device provisioning with the Device Provisioning Service now supports all protocols that IoT Hub supports including HTTP, AMQP, MQTT, AMQP over websockets, and MQTT over websockets.</span></span> <span data-ttu-id="b52cb-107">Den här versionen motsvarar också utökat SDK-språkstöd på både enhets- och klientsidan.</span><span class="sxs-lookup"><span data-stu-id="b52cb-107">This release also corresponds to expanded SDK language support for both the device and client side.</span></span>

## <a name="link-the-device-provisioning-service-to-an-iot-hub"></a><span data-ttu-id="b52cb-108">Länka Device Provisioning Service till en IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="b52cb-108">Link the Device Provisioning Service to an IoT hub</span></span>

<span data-ttu-id="b52cb-109">Nästa steg är att länka Device Provisioning-tjänsten och IoT Hub så att IoT Hub Device Provisioning-tjänsten kan registrera enheter till den hubben.</span><span class="sxs-lookup"><span data-stu-id="b52cb-109">The next step is to link the Device Provisioning Service and IoT hub so that the IoT Hub Device Provisioning Service can register devices to that hub.</span></span> <span data-ttu-id="b52cb-110">Tjänsten kan endast etablera enheter till IoT-hubbar som har länkats till Device Provisioning-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-110">The service can only provision devices to IoT hubs that have been linked to the Device Provisioning Service.</span></span> <span data-ttu-id="b52cb-111">Följ de här stegen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-111">Follow these steps.</span></span>

1.  <span data-ttu-id="b52cb-112">På sidan **Alla resurser** i Azure-portalen, klickar du på tjänstinstansen Device Provisioning som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="b52cb-112">In the **All resources** page on the Azure portal, click the Device Provisioning Service instance you created previously.</span></span>

2.  <span data-ttu-id="b52cb-113">Välj **Länkade IoT-hubbar** på Device Provisioning Service-sidan.</span><span class="sxs-lookup"><span data-stu-id="b52cb-113">In the Device Provisioning Service page, click **Linked IoT hubs**.</span></span>

3.  <span data-ttu-id="b52cb-114">Klicka på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="b52cb-114">Click **Add**.</span></span>

4.  <span data-ttu-id="b52cb-115">På sidan **Lägg till länk till IoT-hubb** anger du följande information och klickar på **Spara**:</span><span class="sxs-lookup"><span data-stu-id="b52cb-115">In the **Add link to IoT hub** page, provide the following information, and click **Save**:</span></span>

    - <span data-ttu-id="b52cb-116">**Prenumeration:** Se till att den prenumeration som innehåller IoT-hubben är markerad.</span><span class="sxs-lookup"><span data-stu-id="b52cb-116">**Subscription:** Make sure the subscription that contains the IoT hub is selected.</span></span> <span data-ttu-id="b52cb-117">Du kan länka till en IoT-hubb som finns i en annan prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b52cb-117">You can link to IoT hub that resides in a different subscription.</span></span>

    - <span data-ttu-id="b52cb-118">**IoT-hubb:** Välj namnet på den IoT-hubb som du vill länka med den här instansen för enhetsetableringstjänsten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-118">**IoT hub:** Choose the name of the IoT hub that you want to link with this Device Provisioning Service instance.</span></span>

    - <span data-ttu-id="b52cb-119">**Åtkomstprincip:** Välj **iothubowner** som de autentiseringsuppgifter som ska användas vid etablering av länken till IoT-hubben.</span><span class="sxs-lookup"><span data-stu-id="b52cb-119">**Access Policy:** Select **iothubowner** as the credentials to use for establishing the link to the IoT hub.</span></span>

![Länka hubbnamnet för att länka till DPS i portalen](../media/ee6e78754a1d39d86de71fb6872723f3.png)

## <a name="set-the-allocation-policy-on-the-device-provisioning-service"></a><span data-ttu-id="b52cb-121">Ange allokeringsprincip för enhetsetableringstjänsten</span><span class="sxs-lookup"><span data-stu-id="b52cb-121">Set the allocation policy on the Device Provisioning Service</span></span>

<span data-ttu-id="b52cb-122">Allokeringsprincipen är en inställning för IoT Hub Device Provisioning-tjänsten som bestämmer hur enheter tilldelas till en IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="b52cb-122">The allocation policy is a IoT Hub Device Provisioning Service setting that determines how devices are assigned to an IoT hub.</span></span> <span data-ttu-id="b52cb-123">Det finns tre allokeringsprinciper som stöds:</span><span class="sxs-lookup"><span data-stu-id="b52cb-123">There are three supported allocation policies:</span></span>

1. <span data-ttu-id="b52cb-124">**Kortast svarstid**: Enheter etableras till en IoT-hubb baserat på hubben med kortast svarstid till enheten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-124">**Lowest latency**: Devices are provisioned to an IoT hub based on the hub with the lowest latency to the device.</span></span>

2. <span data-ttu-id="b52cb-125">**Jämnt viktad distribution** (standard): Det är lika sannolikt att länkade IoT-hubbar får enheter etablerade till sig.</span><span class="sxs-lookup"><span data-stu-id="b52cb-125">**Evenly weighted distribution** (default): Linked IoT hubs are equally likely to have devices provisioned to them.</span></span> <span data-ttu-id="b52cb-126">Den här inställningen är standardinställningen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-126">This setting is the default.</span></span> <span data-ttu-id="b52cb-127">Om du endast etablerar enheter till en IoT-hubb kan du behålla den här inställningen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-127">If you are provisioning devices to only one IoT hub, you can keep this setting.</span></span>

3. <span data-ttu-id="b52cb-128">**Statisk konfiguration via registreringslistan**: Specificering av den önskade IoT-hubben på registreringslistan har högre prioritet än allokeringsprincipen på Device Provisioning-tjänstnivå.</span><span class="sxs-lookup"><span data-stu-id="b52cb-128">**Static configuration via the enrollment list**: Specification of the desired IoT hub in the enrollment list takes priority over the Device Provisioning Service-level allocation policy.</span></span>

<span data-ttu-id="b52cb-129">Om du vill ställa in allokeringsprincipen går du till Device Provisioning-tjänstsidan och klickar på **Hantera allokeringsprincip**.</span><span class="sxs-lookup"><span data-stu-id="b52cb-129">To set the allocation policy, in the Device Provisioning Service page click **Manage allocation policy**.</span></span> <span data-ttu-id="b52cb-130">Kontrollera att allokeringsprincipen är inställd på **Jämnt viktad distribution** (standardinställningen).</span><span class="sxs-lookup"><span data-stu-id="b52cb-130">Make sure the allocation policy is set to **Evenly weighted distribution** (the default).</span></span> <span data-ttu-id="b52cb-131">Om du gör några ändringar ska du klicka på **Spara** när du är klar.</span><span class="sxs-lookup"><span data-stu-id="b52cb-131">If you make any changes, click **Save** when you are done.</span></span>

![Hantera allokeringsprincip](../media/0c5fa5193156f17b4f5d64aab65a414d.png)

## <a name="enroll-the-device"></a><span data-ttu-id="b52cb-133">Registrera enheten</span><span class="sxs-lookup"><span data-stu-id="b52cb-133">Enroll the device</span></span>

<span data-ttu-id="b52cb-134">I det här steget ska du lägga till enhetens unika säkerhetsartefakter till Device Provisioning Service.</span><span class="sxs-lookup"><span data-stu-id="b52cb-134">This step involves adding the device's unique security artifacts to the Device Provisioning Service.</span></span> <span data-ttu-id="b52cb-135">Säkerhetsartefakterna baseras på enhetens [attesteringsmekanism](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism) enligt följande:</span><span class="sxs-lookup"><span data-stu-id="b52cb-135">These security artifacts are based on the device's [Attestation mechanism](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism) as follows:</span></span>

<span data-ttu-id="b52cb-136">För TPM-baserade enheter behöver du:</span><span class="sxs-lookup"><span data-stu-id="b52cb-136">For TPM-based devices you need:</span></span>

- <span data-ttu-id="b52cb-137">*Bekräftelsenyckeln* som är unik för varje TPM-krets eller -simulering, som hämtas från tillverkaren av TPM-kretsen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-137">The *Endorsement Key* that is unique to each TPM chip or simulation, which is obtained from the TPM chip manufacturer.</span></span> <span data-ttu-id="b52cb-138">Läs [Understand TPM Endorsement Key](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology) (Förstå TPM-bekräftelsenyckeln) för mer information.</span><span class="sxs-lookup"><span data-stu-id="b52cb-138">Read the [Understand TPM Endorsement Key](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology) for more information.</span></span>

- <span data-ttu-id="b52cb-139">*Registrerings-ID:t* som används för att unikt identifiera en enhet i namnrymden/omfattningen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-139">The *Registration ID* that is used to uniquely identify a device in the namespace/scope.</span></span> <span data-ttu-id="b52cb-140">ID:t kanske eller kanske inte är samma som enhetens ID.</span><span class="sxs-lookup"><span data-stu-id="b52cb-140">This ID may or may not be the same as the device ID.</span></span> <span data-ttu-id="b52cb-141">ID:t är obligatoriskt för alla enheter.</span><span class="sxs-lookup"><span data-stu-id="b52cb-141">The ID is mandatory for every device.</span></span> <span data-ttu-id="b52cb-142">För TPM-baserade enheter kan registrerings-ID:t härledas från själv TPM, till exempel en SHA-256-hash för TPM-bekräftelsenyckeln.</span><span class="sxs-lookup"><span data-stu-id="b52cb-142">For TPM-based devices, the registration ID may be derived from the TPM itself, for example, an SHA-256 hash of the TPM Endorsement Key.</span></span>

![Registreringsinformation för TPM i portalen](../media/11db90b7128e1cf222a4da45de7cbac8.png)

<span data-ttu-id="b52cb-144">För X.509-baserade enheter behöver du:</span><span class="sxs-lookup"><span data-stu-id="b52cb-144">For X.509 based devices you need:</span></span>

- <span data-ttu-id="b52cb-145">[Certifikatet som utfärdats till X.509](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates)-kretsen eller simuleringen är antingen en *.pem*- eller *.cer*-fil.</span><span class="sxs-lookup"><span data-stu-id="b52cb-145">The [certificate issued to the X.509](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates) chip or simulation, in the form of either a *.pem* or a *.cer* file.</span></span> <span data-ttu-id="b52cb-146">Vid enskild registrering måste du använda *undertecknarens         certifikat* per enhet för ditt X.509-system, och för registreringsgrupper måste du använda *rotcertifikatet*.</span><span class="sxs-lookup"><span data-stu-id="b52cb-146">For individual enrollment, you need to use the per-device *signer         certificate* for your X.509 system, while for enrollment groups, you need to use the *root certificate*.</span></span>

   ![Lägga till en enskild registrering för X.509-attestering i portalen](../media/8d56752f453f27e55dd15b7c894ae406.png)

<span data-ttu-id="b52cb-148">Det finns två sätt att registrera enheten i Device Provisioning Service på:</span><span class="sxs-lookup"><span data-stu-id="b52cb-148">There are two ways to enroll the device to the Device Provisioning Service:</span></span>

- <span data-ttu-id="b52cb-149">**Registreringsgrupper** Det här representerar en grupp med enheter som delar en specifik attesteringsmekanism.</span><span class="sxs-lookup"><span data-stu-id="b52cb-149">**Enrollment Groups** This represents a group of devices that share a specific attestation mechanism.</span></span> <span data-ttu-id="b52cb-150">Vi rekommenderar att du använder en registreringsgrupp för ett stort antal enheter som delar en önskad inledande konfiguration, eller för enheter som ska till samma klient.</span><span class="sxs-lookup"><span data-stu-id="b52cb-150">We recommend using an enrollment group for a large number of devices, which share a desired initial configuration, or for devices all going to the same tenant.</span></span> <span data-ttu-id="b52cb-151">Mer information om identitetsattestering för registreringsgrupper finns i [Säkerhet](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates).</span><span class="sxs-lookup"><span data-stu-id="b52cb-151">For more information on Identity attestation for enrollment groups, see [Security](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates).</span></span>

   ![Lägga till gruppregistrering för X.509-attestering i portalen](../media/4a9d9ea822887c70f1ff1e4b64b138f1.png)

- <span data-ttu-id="b52cb-153">**Enskilda registreringar** Detta motsvarar en inmatning för en enskild enhet som kan registreras med Device Provisioning Service.</span><span class="sxs-lookup"><span data-stu-id="b52cb-153">**Individual Enrollments** This represents an entry for a single device that may register with the Device Provisioning Service.</span></span> <span data-ttu-id="b52cb-154">Enskilda registreringar kan använda antingen x509-certifikat eller SAS-token (i en verklig eller virtuell TPM) som attesteringsmekanismer.</span><span class="sxs-lookup"><span data-stu-id="b52cb-154">Individual enrollments may use either x509 certificates or SAS tokens (in a real or virtual TPM) as attestation mechanisms.</span></span> <span data-ttu-id="b52cb-155">Vi rekommenderar att du använder enskilda registreringar för enheter som kräver unika första konfigurationer och enheter som endast kan använda SAS-token via TPM eller virtuella TPM:er som attesteringsmekanism.</span><span class="sxs-lookup"><span data-stu-id="b52cb-155">We recommend using individual enrollments for devices that require unique initial configurations, and devices that can only use SAS tokens via TPM or virtual TPM as the attestation mechanism.</span></span> <span data-ttu-id="b52cb-156">Enskilda registreringar kan ha angivet önskat enhets-ID för IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="b52cb-156">Individual enrollments may have the desired IoT hub device ID specified.</span></span>

<span data-ttu-id="b52cb-157">Nu registrerar du enheten med enhetsetableringstjänstens instans, med de säkerhetsartefakter som krävs baserat på enhetens attesteringsmekanism:</span><span class="sxs-lookup"><span data-stu-id="b52cb-157">Now you enroll the device with your Device Provisioning Service instance, using the required security artifacts based on the device's attestation mechanism:</span></span>

1. <span data-ttu-id="b52cb-158">Logga in på Azure Portal, klicka på knappen **Alla resurser** i den vänstra menyn och öppna Device Provisioning-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-158">Sign in to the Azure portal, click on the **All resources** button on the left-hand menu and open your Device Provisioning service.</span></span>

2. <span data-ttu-id="b52cb-159">På sammanfattningsbladet för Device Provisioning Service väljer du **Hantera registreringar**.</span><span class="sxs-lookup"><span data-stu-id="b52cb-159">On the Device Provisioning Service summary blade, select **Manage enrollments**.</span></span> <span data-ttu-id="b52cb-160">Välj fliken **Enskilda registreringar** eller **Registreringsgrupper** enligt enhetskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="b52cb-160">Select either **Individual Enrollments** tab or the **Enrollment Groups** tab as per your device setup.</span></span> <span data-ttu-id="b52cb-161">Klicka på knappen **Lägg till** högst upp.</span><span class="sxs-lookup"><span data-stu-id="b52cb-161">Click the **Add** button at the top.</span></span> <span data-ttu-id="b52cb-162">Välj **TPM** eller **X.509** som identitetsattesteringens *Metod* och ange de lämpliga säkerhetsartefakter som beskrevs     tidigare.</span><span class="sxs-lookup"><span data-stu-id="b52cb-162">Select **TPM** or **X.509** as the identity attestation *Mechanism*, and enter the appropriate security artifacts as discussed     previously.</span></span> <span data-ttu-id="b52cb-163">Du kan ange ett nytt **Enhets-ID för IoT Hub**.</span><span class="sxs-lookup"><span data-stu-id="b52cb-163">You may enter a new **IoT Hub device ID**.</span></span> <span data-ttu-id="b52cb-164">Klicka på knappen **Spara** när det är klart.</span><span class="sxs-lookup"><span data-stu-id="b52cb-164">Once complete, click the **Save** button.</span></span>

3. <span data-ttu-id="b52cb-165">När enheten har registrerats bör du se den i portalen på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="b52cb-165">When the device is successfully enrolled, you should see it displayed in the portal as follows:</span></span>

![Lyckad TPM-registrering i portalen](../media/cb277b2e5bc21cd02669775d536e89c0.png)

<span data-ttu-id="b52cb-167">Efter registreringen väntar etableringstjänsten tills enheten har startats och ansluter till den vid en senare tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="b52cb-167">After enrollment, the provisioning service then waits for the device to boot and connect with it at any later point in time.</span></span> <span data-ttu-id="b52cb-168">När enheten startar för första gången interagerar klient-SDK-biblioteket med din krets för att extrahera säkerhetsartefakterna från enheten. Registreringen verifieras med Device Provisioning-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-168">When your device boots for the first time, the client SDK library interacts with your chip to extract the security artifacts from the device, and verifies registration with your Device Provisioning service.</span></span>

## <a name="start-the-iot-device"></a><span data-ttu-id="b52cb-169">Starta IoT-enheten</span><span class="sxs-lookup"><span data-stu-id="b52cb-169">Start the IoT device</span></span>

<span data-ttu-id="b52cb-170">IoT-enheten kan vara en riktig enhet eller en simulerad enhet.</span><span class="sxs-lookup"><span data-stu-id="b52cb-170">Your IoT device can be a real device, or a simulated device.</span></span> <span data-ttu-id="b52cb-171">Eftersom IoT-enheten nu har registrerats med en instans av enhetsetableringstjänsten kan enheten nu starta och anropa etableringstjänsten för att identifieras med hjälp av attesteringsmetoden.</span><span class="sxs-lookup"><span data-stu-id="b52cb-171">Since the IoT device has now been enrolled with a Device Provisioning Service instance, the device can now boot up, and call the provisioning service to be recognized using the attestation mechanism.</span></span> <span data-ttu-id="b52cb-172">När etableringstjänsten har identifierat enheten tilldelas den till en IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="b52cb-172">Once the provisioning service has recognized the device, it will be assigned to an IoT hub.</span></span>

<span data-ttu-id="b52cb-173">Exempel på simulerade enheter, med både TPM- och X.509-attestering, ingår för C, Java, C\#, Node.js och Python.</span><span class="sxs-lookup"><span data-stu-id="b52cb-173">Simulated device examples, using both TPM and X.509 attestation, are included for C, Java, C\#, Node.js, and Python.</span></span> <span data-ttu-id="b52cb-174">Till exempel skulle en simulerad enhet med TPM och [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c) följa den process som beskrivs i avsnittet om att [Simulera den första startsekvensen för en enhet](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device).</span><span class="sxs-lookup"><span data-stu-id="b52cb-174">For example, a simulated device using TPM and the [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c) would follow the process covered in the [Simulate first boot sequence for a device](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device) section.</span></span> <span data-ttu-id="b52cb-175">För samma enhet som använder X.509-certifikatattestering skulle det här avsnittet om [startsekvens](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device) gälla.</span><span class="sxs-lookup"><span data-stu-id="b52cb-175">The same device using X.509 certificate attestation would refer to this [boot sequence](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device) section.</span></span>

<span data-ttu-id="b52cb-176">Se [instruktionsguiden för MXChip Iot DevKit](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit) för ett exempel på en riktig enhet.</span><span class="sxs-lookup"><span data-stu-id="b52cb-176">Refer to the [How-to guide for the MXChip Iot DevKit](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit) as an example for a real device.</span></span>

<span data-ttu-id="b52cb-177">Starta enheten för att låta enhetens klientprogram starta registreringen med din Device Provisioning-tjänst.</span><span class="sxs-lookup"><span data-stu-id="b52cb-177">Start the device to allow your device's client application to start the registration with your Device Provisioning service.</span></span>

## <a name="verify-the-device-is-registered"></a><span data-ttu-id="b52cb-178">Kontrollera att enheten är registrerad</span><span class="sxs-lookup"><span data-stu-id="b52cb-178">Verify the device is registered</span></span>

<span data-ttu-id="b52cb-179">När enheten startar ska följande åtgärder utföras:</span><span class="sxs-lookup"><span data-stu-id="b52cb-179">Once your device boots, the following actions should take place:</span></span>

1. <span data-ttu-id="b52cb-180">Enheten skickar en registreringsbegäran till Device Provisioning-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-180">The device sends a registration request to your Device Provisioning service.</span></span>

2. <span data-ttu-id="b52cb-181">För TPM-enheten skickar enhetsetableringstjänsten tillbaka en registreringskontroll som enheten svarar på.</span><span class="sxs-lookup"><span data-stu-id="b52cb-181">For TPM devices, the Device Provisioning Service sends back a registration challenge to which your device responds.</span></span>

3. <span data-ttu-id="b52cb-182">Om registringen har lyckats skickar enhetsetableringstjänsten tillbaka IoT-hubbens URI, enhets-ID och den krypterade nyckeln till enheten.</span><span class="sxs-lookup"><span data-stu-id="b52cb-182">On successful registration, the Device Provisioning Service sends the IoT hub URI, device ID, and the encrypted key back to the device.</span></span>

4. <span data-ttu-id="b52cb-183">IoT Hub-klientprogrammet på enheten ansluter därefter till hubben.</span><span class="sxs-lookup"><span data-stu-id="b52cb-183">The IoT Hub client application on the device then connects to your hub.</span></span>

5. <span data-ttu-id="b52cb-184">Om anslutningen till hubben lyckas bör enheten visas i IoT-hubbens utforskare för **IoT-enheter**.</span><span class="sxs-lookup"><span data-stu-id="b52cb-184">On successful connection to the hub, you should see the device appear in the IoT hub's **IoT Devices** explorer.</span></span>

![Lyckad anslutning till hubben i portalen](../media/12ea6da6eef9bf96be6bd80aa1721173.png)

<!--Reference links

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-set-up-cloud>

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-provision-device-to-hub>-->