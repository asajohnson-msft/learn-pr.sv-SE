<span data-ttu-id="5407e-101">Vi har gått igenom hur du skapar kostnadsuppskattningar för miljöer du vill skapa, vi har tittat på några verktyg som ger information om vart pengarna går och skapat prognoser för framtida utgifter.</span><span class="sxs-lookup"><span data-stu-id="5407e-101">We have seen how to create cost estimates for environments you'd like to build, walked through some tools to get details on where we're spending money, and projected future expenses.</span></span> <span data-ttu-id="5407e-102">Nästa utmaning är att titta på hur du kan sänka dina infrastrukturkostnader.</span><span class="sxs-lookup"><span data-stu-id="5407e-102">Our next challenge is to look at how to reduce those infrastructure costs.</span></span>

## <a name="use-reserved-instances"></a><span data-ttu-id="5407e-103">Använda reserverade instanser</span><span class="sxs-lookup"><span data-stu-id="5407e-103">Use reserved instances</span></span>

<span data-ttu-id="5407e-104">Om du har VM-arbetsbelastningar som är statiska och förutsägbara till sin natur, särskilt om de körs dygnet runt hela året, kan du spara upp till 70 procent genom att använda reserverade instanser beroende på de virtuella datorernas storlek.</span><span class="sxs-lookup"><span data-stu-id="5407e-104">If you have VM workloads that are static and predictable in nature, particularly ones that run 24x7x365, using reserved instances is a fantastic way to potentially save up to 70 percent, depending on the VM size.</span></span>

![Besparingar med reserverade instanser](../images/savings-coins.png)

<span data-ttu-id="5407e-106">Reserverade instanser köps under ett eller tre år, och du betalar för hela perioden i förskott.</span><span class="sxs-lookup"><span data-stu-id="5407e-106">Reserved instances are purchased in one-year or three-year terms, with payment required for the full term up front.</span></span> <span data-ttu-id="5407e-107">Efter köpet matchar Microsoft reservationen mot de instanser som körs och minskar antalet timmar i reservationen.</span><span class="sxs-lookup"><span data-stu-id="5407e-107">After it's purchased, Microsoft matches up the reservation to running instances and decrements the hours from your reservation.</span></span> <span data-ttu-id="5407e-108">Du kan köpa reservationer via Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="5407e-108">Reservations can be purchased through the Azure portal.</span></span> <span data-ttu-id="5407e-109">Eftersom reserverade instanser utgör en rabatt på databehandlingen är de tillgängliga för både Windows- och Linux-datorer.</span><span class="sxs-lookup"><span data-stu-id="5407e-109">And because reserved instances are a compute discount, they are available for both Windows and Linux VMs.</span></span>

## <a name="right-size-underutilized-virtual-machines"></a><span data-ttu-id="5407e-110">Ange rätt storlek för underutnyttjade virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="5407e-110">Right-size underutilized virtual machines</span></span>

<span data-ttu-id="5407e-111">Tidigare tog vi upp att Azure Cost Management och Azure Advisor kan rekommendera att du ändrar storlek på eller stänger av virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="5407e-111">Recall from our previous discussion that Azure Cost Management and Azure Advisor might recommend right-sizing or shutting down VMs.</span></span> <span data-ttu-id="5407e-112">Det här handlar om att dina virtuella datorer ska ha rätt storlek för uppgiften.</span><span class="sxs-lookup"><span data-stu-id="5407e-112">Right-sizing a virtual machine is the process of resizing it to a proper size.</span></span> <span data-ttu-id="5407e-113">Låt oss anta att du har en server som körs som en domänkontrollant och har storleken **Standard_D4sv3**, men den virtuella datorn är inaktiv 90 procent av tiden.</span><span class="sxs-lookup"><span data-stu-id="5407e-113">Let's imagine you have a server running as a domain controller that is sized as a **Standard_D4sv3**, but your VM is sitting at 90 percent idle the vast majority of the time.</span></span> <span data-ttu-id="5407e-114">Genom att ändra storlek på den virtuella datorn till **Standard_D2s_v3** kan du minska kostnaden för databehandlingen med 50 procent.</span><span class="sxs-lookup"><span data-stu-id="5407e-114">By resizing this VM to a **Standard_D2s_v3**, you reduce your compute cost by 50 percent.</span></span> <span data-ttu-id="5407e-115">Kostnaderna är linjära och fördubblas för varje större storlek i samma serie.</span><span class="sxs-lookup"><span data-stu-id="5407e-115">Costs are linear and double for each size larger in the same series.</span></span> <span data-ttu-id="5407e-116">I det här fallet kan du kanske även spara ännu mer genom att byta till en enklare serie virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="5407e-116">In this case, you might even benefit from changing the instance series to go to a less expensive VM series.</span></span>

![Ändra storlek på din virtuella dator](../images/vm-resize.png)

<span data-ttu-id="5407e-118">För stora virtuella datorer är en onödig utgift i Azure som är både vanligt förekommande och enkel att rätta till.</span><span class="sxs-lookup"><span data-stu-id="5407e-118">Oversized virtual machines are a common unnecessary expense on Azure and one that is easily fixed.</span></span> <span data-ttu-id="5407e-119">Du kan ändra storleken på en virtuell dator via Azure Portal, Azure PowerShell eller Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="5407e-119">You can change the size of a VM through the Azure portal, Azure PowerShell, or the Azure CLI.</span></span>

> [!NOTE]
> <span data-ttu-id="5407e-120">När du ändrar storlek på en virtuell dator måste du stoppa den, ändra storleken och sedan starta om datorn.</span><span class="sxs-lookup"><span data-stu-id="5407e-120">Resizing a VM requires that it be stopped, resized, and then restarted.</span></span> <span data-ttu-id="5407e-121">Det här kan ta några minuter beroende på hur stor ändringen är.</span><span class="sxs-lookup"><span data-stu-id="5407e-121">This may take a few minutes depending on how significant the size change is.</span></span> <span data-ttu-id="5407e-122">Planera för ett avbrott eller flytta trafiken till en annan instans medan du utför den här uppgiften.</span><span class="sxs-lookup"><span data-stu-id="5407e-122">Plan for an outage, or shift your traffic to another instance while you perform this task.</span></span>

## <a name="deallocate-virtual-machines-in-off-hours"></a><span data-ttu-id="5407e-123">Frigöra virtuella datorer utanför normal arbetstid</span><span class="sxs-lookup"><span data-stu-id="5407e-123">Deallocate virtual machines in off hours</span></span>

<span data-ttu-id="5407e-124">Om du har arbetsbelastningar på virtuella datorer som endast används under vissa perioder, men du kör dem kontinuerligt, så slösar du pengar.</span><span class="sxs-lookup"><span data-stu-id="5407e-124">If you have virtual machine workloads that are only used during certain periods of time, but you're running them every hour of every day, you're wasting money.</span></span> <span data-ttu-id="5407e-125">De här virtuella datorerna kan stängas av när de inte används och sedan startas enligt ett schema, så att du sparar in på datorkostnaderna när den virtuellt datorn är frigjord.</span><span class="sxs-lookup"><span data-stu-id="5407e-125">These VMs are great candidates to shut down when not in use and start back up on a schedule, saving you compute costs while the VM is deallocated.</span></span>

<span data-ttu-id="5407e-126">Den här metoden passar utmärkt för utvecklingsmiljöer.</span><span class="sxs-lookup"><span data-stu-id="5407e-126">This approach is a great strategy for development environments.</span></span> <span data-ttu-id="5407e-127">Utveckling sker ofta bara under arbetstid, och då kan du frigöra systemen utanför normal arbetstid så att du inte ådrar dig några beräkningskostnader.</span><span class="sxs-lookup"><span data-stu-id="5407e-127">It's often the case that development may happen only during business hours, giving you the flexibility to deallocate these systems in the off hours and stopping your compute costs from accruing.</span></span> <span data-ttu-id="5407e-128">Azure har nu en [automatiseringslösning](https://docs.microsoft.com/azure/automation/automation-solution-vm-management) som du kan använda i din miljö.</span><span class="sxs-lookup"><span data-stu-id="5407e-128">Azure now has an [automation solution](https://docs.microsoft.com/azure/automation/automation-solution-vm-management) fully available for you to leverage in your environment.</span></span>

<span data-ttu-id="5407e-129">Du kan också använda funktionen för automatisk avstängning om du vill schemalägga avstängningen av en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="5407e-129">You can also use the auto-shutdown feature on a virtual machine to schedule automated shutdowns.</span></span>

![Automatisk avstängning](../images/vm-auto-shutdown.png)

## <a name="delete-unused-virtual-machines"></a><span data-ttu-id="5407e-131">Ta bort virtuella datorer som inte används</span><span class="sxs-lookup"><span data-stu-id="5407e-131">Delete unused virtual machines</span></span> 

 <span data-ttu-id="5407e-132">Det här rådet kan låta uppenbart, men om du inte använder en tjänst bör du stänga av den.</span><span class="sxs-lookup"><span data-stu-id="5407e-132">This advice may sound obvious, but if you aren't using a service, you should shut it down.</span></span> <span data-ttu-id="5407e-133">Det är inte ovanligt att hitta system som använts utanför produktion eller till konceptbeskrivningar, som inte längre behövs eftersom projektet är avslutat.</span><span class="sxs-lookup"><span data-stu-id="5407e-133">It's not uncommon to find non-production or proof-of-concept systems left around following a project that is no longer needed.</span></span> <span data-ttu-id="5407e-134">Gå regelbundet igenom din miljö och försök identifiera sådana system.</span><span class="sxs-lookup"><span data-stu-id="5407e-134">Regularly review your environment and work to identify these systems.</span></span> <span data-ttu-id="5407e-135">Det kan också vara bra att stänga av sådana system eftersom du även kan spara pengar på licenser och drift.</span><span class="sxs-lookup"><span data-stu-id="5407e-135">Shutting down these systems can have a multifaceted benefit by saving you not only on infrastructure costs but also potential savings on licensing and operations.</span></span>

## <a name="migrate-to-paas-or-saas-services"></a><span data-ttu-id="5407e-136">Migrera till PaaS- eller SaaS-tjänster</span><span class="sxs-lookup"><span data-stu-id="5407e-136">Migrate to PaaS or SaaS services</span></span> 

<span data-ttu-id="5407e-137">När du migrerar arbetsbelastningar till molnet är det naturligt att börja med IaaS-tjänster och sedan stegvis flytta över lämpliga arbetsbelastningar till PaaS.</span><span class="sxs-lookup"><span data-stu-id="5407e-137">Lastly, as you move workloads to the cloud, a natural evolution is to start with infrastructure-as-a-service (IaaS) services and then move them to platform-as-a-service (PaaS) as appropriate, in an iterative process.</span></span>

<span data-ttu-id="5407e-138">PaaS-tjänster kan ofta ge betydande besparingar både när det gäller resurser och drift.</span><span class="sxs-lookup"><span data-stu-id="5407e-138">PaaS services typically provide substantial savings in both resource and operational costs.</span></span> <span data-ttu-id="5407e-139">Beroende på typen av tjänst så krävs det olika mycket tid och resurser till att flytta tjänsterna.</span><span class="sxs-lookup"><span data-stu-id="5407e-139">The challenge is that depending on the type of service, varying levels of effort will be required to move to these services from both a time and resource perspective.</span></span> <span data-ttu-id="5407e-140">Du kanske enkelt kan flytta en SQL Server-databas till Azure SQL Database, men det kan vara betydligt svårare att flytta dina program med flera nivåer till en container eller en serverfri arkitektur.</span><span class="sxs-lookup"><span data-stu-id="5407e-140">You might be able to easily move a SQL Server database to Azure SQL Database, but it might take substantially more effort to move your multitier application to a container or serverless-based architecture.</span></span> <span data-ttu-id="5407e-141">Det är en bra idé att kontinuerligt utvärdera arkitekturen i dina program och avgöra om du kan göra dem effektivare genom att övergå till PaaS-tjänster.</span><span class="sxs-lookup"><span data-stu-id="5407e-141">It's a good practice to continuously evaluate the architecture of your applications to determine if there are efficiencies to be gained through PaaS services.</span></span>  

<span data-ttu-id="5407e-142">Med Azure kan du testa de här tjänsterna riskfritt eftersom du relativt enkelt kan prova nya arkitekturmönster.</span><span class="sxs-lookup"><span data-stu-id="5407e-142">Azure makes it easy to test these services with little risk, giving you the ability to try out new architecture patterns relatively easily.</span></span> <span data-ttu-id="5407e-143">Det här är dock normalt en längre process och kanske inte är till hjälp omedelbart om du är ute efter snabba kostnadsbesparingar.</span><span class="sxs-lookup"><span data-stu-id="5407e-143">That said, it's typically a longer journey and might not be of immediate help if you're looking for quick wins from a cost-savings perspective.</span></span> <span data-ttu-id="5407e-144">Azure Architecture Center är en bra plats för att få idéer om hur du kan omvandla ditt program, där du även hittar metodtips för en mängd olika arkitekturer och Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="5407e-144">The Azure Architecture Center is a great place to get ideas for transforming your application, as well as best practices across a wide array of architectures and Azure services.</span></span> 