<span data-ttu-id="25c54-101">Vårt mål är alltså att flytta en befintlig Linux-server som kör Apache till Azure.</span><span class="sxs-lookup"><span data-stu-id="25c54-101">Recall that our goal is to move an existing Linux server running Apache to Azure.</span></span> <span data-ttu-id="25c54-102">Vi börjar med att skapa en Ubuntu Linux-server.</span><span class="sxs-lookup"><span data-stu-id="25c54-102">We'll start by creating an Ubuntu Linux server.</span></span>

## <a name="create-a-new-linux-virtual-machine"></a><span data-ttu-id="25c54-103">Skapa en ny virtuell Linux-dator</span><span class="sxs-lookup"><span data-stu-id="25c54-103">Create a new Linux virtual machine</span></span>

<span data-ttu-id="25c54-104">Vi kan skapa en virtuell Linux-dator med Azure-portalen, Azure CLI eller Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="25c54-104">We can create Linux VMs with the Azure portal, Azure CLI, or Azure PowerShell.</span></span> <span data-ttu-id="25c54-105">Den enklaste metoden när du börjar med Azure är att använda portalen eftersom den går igenom den information som krävs samt visar tips och användbara meddelanden när vi skapar den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="25c54-105">The easiest approach when you are starting with Azure is to use the portal because it walks you through the required information and provides hints and helpful messages during the creation.</span></span>

1. <span data-ttu-id="25c54-106">Logga in på [Azure-portalen](https://portal.azure.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="25c54-106">Sign into the [Azure portal](https://portal.azure.com?azure-portal=true).</span></span>

1. <span data-ttu-id="25c54-107">Klicka på **Skapa en resurs** uppe till vänster i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="25c54-107">Click **Create a resource** in the upper left corner of the Azure portal.</span></span>

1. <span data-ttu-id="25c54-108">I sökrutan anger du **Ubuntu Server** för att se de olika versionerna som är tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="25c54-108">In the search box, enter  **Ubuntu Server** to see the different versions available.</span></span> <span data-ttu-id="25c54-109">Välj **Ubuntu Server 18.04** från den visade listan.</span><span class="sxs-lookup"><span data-stu-id="25c54-109">Select **Ubuntu Server 18.04** from the presented list.</span></span>

1. <span data-ttu-id="25c54-110">Klicka på knappen **Skapa** för att börja konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="25c54-110">Click the **Create** button to start configuring the VM.</span></span>

## <a name="configure-the-vm-settings"></a><span data-ttu-id="25c54-111">Konfigurera inställningar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="25c54-111">Configure the VM settings</span></span>

<span data-ttu-id="25c54-112">När du skapar en virtuell dator på portalen går du igenom en guide som vägleder dig genom alla konfigurationsområden.</span><span class="sxs-lookup"><span data-stu-id="25c54-112">The VM creation experience in the portal is presented in a "wizard" format to walk you through all the configuration areas for the VM.</span></span> <span data-ttu-id="25c54-113">När du klickar på ”Nästa” kommer du till nästa konfigurerbara avsnitt.</span><span class="sxs-lookup"><span data-stu-id="25c54-113">Clicking the "Next" button will take you to the next configurable section.</span></span> <span data-ttu-id="25c54-114">Du kan dock förflytta dig mellan avsnitten när du vill med hjälp av flikarna som visas längs överkanten och som identifierar varje del.</span><span class="sxs-lookup"><span data-stu-id="25c54-114">However, you can move between the sections at will with the tabs running across the top that identify each part.</span></span>

![Skapa en virtuell dator på Azure Portal](../media-drafts/3-azure-portal-create-vm.png)

<span data-ttu-id="25c54-116">När du har fyllt i alla obligatoriska alternativ (som visas med röda stjärnor) kan du hoppa över resten av guiden och börja skapa den virtuella datorn med hjälp av knappen **Granska + skapa** längst ned.</span><span class="sxs-lookup"><span data-stu-id="25c54-116">Once you fill in all the required options (identified with red stars), you can skip the remainder of the wizard experience and start creating the VM through the **Review + Create** button at the bottom.</span></span>

<span data-ttu-id="25c54-117">Vi börjar med avsnittet **Grundläggande inställningar**.</span><span class="sxs-lookup"><span data-stu-id="25c54-117">We'll start with the **Basics** section.</span></span>

### <a name="configure-basic-vm-settings"></a><span data-ttu-id="25c54-118">Konfigurera grundläggande inställningar för en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="25c54-118">Configure basic VM settings</span></span>

1. <span data-ttu-id="25c54-119">Välj den **prenumeration** som den virtuella datorns körningstimmar ska debiteras mot.</span><span class="sxs-lookup"><span data-stu-id="25c54-119">Select the **Subscription** that should be billed for VM hours.</span></span>

1. <span data-ttu-id="25c54-120">Välj **Skapa ny** för **Resursgrupp** och ge resursgruppen namnet **ExerciseResources**.</span><span class="sxs-lookup"><span data-stu-id="25c54-120">For **Resource group**, select **Create new** and give the resource group the name **ExerciseResources**.</span></span>

> [!NOTE]
> <span data-ttu-id="25c54-121">När du ändrar inställningar och flyttar från fälten valideras värdena automatiskt av Azure och en grön bock visas bredvid dem om de är giltiga.</span><span class="sxs-lookup"><span data-stu-id="25c54-121">As you change settings and tab out of each field Azure will validate each value automatically and place a green check-mark next to it when it's good.</span></span> <span data-ttu-id="25c54-122">Du kan hovra över felindikatorerna om du vill ha mer information om problem som identifieras.</span><span class="sxs-lookup"><span data-stu-id="25c54-122">You can hover over error indicators to get more information on issues it discovers.</span></span>

1. <span data-ttu-id="25c54-123">I avsnittet **INSTANSINFORMATION** anger du ett namn på den virtuella webbserverdatorn, ”test-web-eus-vm1”.</span><span class="sxs-lookup"><span data-stu-id="25c54-123">In the **INSTANCE DETAILS** section, enter a name for your web server VM, such as "test-web-eus-vm1".</span></span> <span data-ttu-id="25c54-124">Detta anger miljön (”test”), rollen (”webb”), platsen (”USA, östra”), tjänsten (”vm”) och instansnummer (”1”).</span><span class="sxs-lookup"><span data-stu-id="25c54-124">This indicates the environment ("test"), the role ("web"), location ("East US"), service ("vm"), and instance number ("1").</span></span>
    - <span data-ttu-id="25c54-125">Det är bästa praxis att standardisera resursnamnen så att du snabbt kan identifiera deras syfte.</span><span class="sxs-lookup"><span data-stu-id="25c54-125">It's best practice to standardize your resource names so you can quickly identify their purpose.</span></span> <span data-ttu-id="25c54-126">Namnen på virtuella Linux-datorer måste vara mellan 1 och 64 tecken och måste bestå av siffror, bokstäver och bindestreck.</span><span class="sxs-lookup"><span data-stu-id="25c54-126">Linux VM names must be between 1 and 64 characters and be comprised of numbers, letters, and dashes.</span></span>

1. <span data-ttu-id="25c54-127">Välj en region nära dig; vi har valt USA, östra.</span><span class="sxs-lookup"><span data-stu-id="25c54-127">Select a region close to you; we've chosen East US.</span></span>

1. <span data-ttu-id="25c54-128">Lämna **Tillgänglighetsalternativ** som ”Inga”.</span><span class="sxs-lookup"><span data-stu-id="25c54-128">Leave **Availability options** as "None".</span></span> <span data-ttu-id="25c54-129">Det här alternativet säkerställer att den virtuella datorn har hög tillgänglighet genom att gruppera flera virtuella datorer för att underlätta hanteringen av planerade eller oplanerade underhållsåtgärder eller avbrott.</span><span class="sxs-lookup"><span data-stu-id="25c54-129">This option is used to ensure the VM is highly available by grouping multiple VMs together a set to deal with planned or unplanned maintenance events or outages.</span></span>

1. <span data-ttu-id="25c54-130">Se till att avbildningen är inställd på ”Ubuntu Server 18.04 LTS”.</span><span class="sxs-lookup"><span data-stu-id="25c54-130">Ensure the image is set to "Ubuntu Server 18.04 LTS".</span></span> <span data-ttu-id="25c54-131">Du kan öppna listrutan för att visa alla tillgängliga alternativ.</span><span class="sxs-lookup"><span data-stu-id="25c54-131">You can open the drop-down list to see all the options available.</span></span>

1. <span data-ttu-id="25c54-132">Fältet **Storlek** kan inte redigeras direkt och har en standardstorlek på **DS2_v3**, vilket är ett av valen för beräkning för generell användning.</span><span class="sxs-lookup"><span data-stu-id="25c54-132">The **Size** field is not directly editable and has a **DS2_v3** default size which is one of the General purpose computing selections.</span></span> <span data-ttu-id="25c54-133">Det här valet är perfekt för en offentlig webbserver, men klicka på länken **Ändra storlek** om du vill utforska andra storlekar på virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="25c54-133">This choice is perfect for a public web server, but click the **Change size** link to explore other VM sizes.</span></span> <span data-ttu-id="25c54-134">I dialogrutan som visas kan du filtrera baserat på antal processorer, namn och disktyp.</span><span class="sxs-lookup"><span data-stu-id="25c54-134">The resulting dialog allows you to filter based on # of CPUs, Name, and Disk Type.</span></span> <span data-ttu-id="25c54-135">Välj samma **DS2_v3**-val, vilket ger dig två virtuella processorer med 8 GB RAM.</span><span class="sxs-lookup"><span data-stu-id="25c54-135">Select the same **DS2_v3** choice which gives you two vCPUs with 8 GB of RAM.</span></span>

    > [!TIP]
    > <span data-ttu-id="25c54-136">Du kan även dra vyn åt vänster för att gå tillbaka till inställningarna för den virtuella datorn eftersom ett nytt fönster öppnades till höger och placerades ovanpå det.</span><span class="sxs-lookup"><span data-stu-id="25c54-136">You can also slide the view to the left to get back to the VM settings as it opened a new window off to the right and slid the window over to view it.</span></span>

1. <span data-ttu-id="25c54-137">I avsnittet **ADMINISTRATÖRSÅTKOMST** väljer du alternativet offentlig SSH-nyckel för **Autentiseringstyp**.</span><span class="sxs-lookup"><span data-stu-id="25c54-137">In the **ADMINISTRATOR ACCESS** section, select the SSH public key option for **Authentication type**.</span></span>

1. <span data-ttu-id="25c54-138">Ange ett **användarnamn** som du kommer att använda för att logga in med SSH.</span><span class="sxs-lookup"><span data-stu-id="25c54-138">Enter a **username** you'll use to sign in with SSH.</span></span>

1. <span data-ttu-id="25c54-139">Kopiera SSH-nyckeln från filen med din offentliga nyckel och klistra in den i fältet **Offentlig SSH-nyckel**.</span><span class="sxs-lookup"><span data-stu-id="25c54-139">Copy the SSH key from your public key file and paste it into the **SSH public key** field.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="25c54-140">När du kopierar den offentliga nyckeln till Azure-portalen ska du se till att inte lägga till några extra blanksteg eller radmatningstecken.</span><span class="sxs-lookup"><span data-stu-id="25c54-140">When you copy the public key into the Azure portal, make sure not to add any additional whitespace or linefeed characters.</span></span>

1. <span data-ttu-id="25c54-141">I avsnittet **REGLER FÖR INKOMMANDE PORTAR** öppnar du listan och _avmarkerar_ ”Inga”.</span><span class="sxs-lookup"><span data-stu-id="25c54-141">In the **INBOUND PORT RULES** section, open the list and _uncheck_ "None".</span></span> <span data-ttu-id="25c54-142">Eftersom det här är en virtuell Linux-dator vill vi kunna komma åt den virtuella datorn med hjälp av SSH via en fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="25c54-142">Since this is a Linux VM, we want to be able to access the VM using SSH remotely.</span></span> <span data-ttu-id="25c54-143">Bläddra i listan om det behövs tills du hittar ssh (22) och välj det.</span><span class="sxs-lookup"><span data-stu-id="25c54-143">Scroll the list if necessary until you find ssh (22) and select it.</span></span> <span data-ttu-id="25c54-144">Som anmärkningen i användargränssnittet indikerar kan vi även ändra nätverksportarna efter att vi har skapat den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="25c54-144">As the note in the UI indicates, we can also adjust the network ports after we create the VM.</span></span>

    ![Öppna porten för SSH-åtkomst på den virtuella Linux-datorn](../media-drafts/3-open-ports.png)

## <a name="configure-disks-for-the-vm"></a><span data-ttu-id="25c54-146">Konfigurera diskar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="25c54-146">Configure Disks for the VM</span></span>

1. <span data-ttu-id="25c54-147">Gå till avsnittet Diskar genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="25c54-147">Click **Next** to move to the Disks section.</span></span>

    ![Konfigurera diskar för den virtuella datorn](../media-drafts/3-configure-disks.png)

1. <span data-ttu-id="25c54-149">Välj ”Premium SSD” för **OS-disktypen**.</span><span class="sxs-lookup"><span data-stu-id="25c54-149">Choose "Premium SSD" for the **OS disk type**.</span></span>

1. <span data-ttu-id="25c54-150">Använd hanterade diskar så att vi inte behöver arbeta med lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="25c54-150">Use managed disks, so we don't have to work with storage accounts.</span></span> <span data-ttu-id="25c54-151">Om du vill kan du växla inställningen i det grafiska användargränssnittet för att se skillnaden mellan vilken information Azure behöver.</span><span class="sxs-lookup"><span data-stu-id="25c54-151">You can flip the switch in the GUI to see the difference in information that Azure needs if you like.</span></span>

### <a name="create-a-data-disk"></a><span data-ttu-id="25c54-152">Skapa en datadisk</span><span class="sxs-lookup"><span data-stu-id="25c54-152">Create a data disk</span></span>

<span data-ttu-id="25c54-153">Som du kanske minns får vi en operativsystemdisk (/dev/sda) och en temporär disk (/dev/sdb).</span><span class="sxs-lookup"><span data-stu-id="25c54-153">Recall we will get an OS disk (/dev/sda) and Temporary disk (/dev/sdb).</span></span> <span data-ttu-id="25c54-154">Nu ska vi lägga till en datadisk också.</span><span class="sxs-lookup"><span data-stu-id="25c54-154">Let's add a data disk as well.</span></span>

1. <span data-ttu-id="25c54-155">Klicka på länken **Create and attach a new disk** (Skapa och koppla en ny disk) i avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="25c54-155">Click the **Create and attach a new disk** link in the **DATA DISKS** section.</span></span>

    ![Skapa en datadisk för den virtuella datorn på portalen](../media-drafts/3-add-data-disk.png)

1. <span data-ttu-id="25c54-157">Du kan använda alla standardvärden: Premium SSD, 1 023 GB och Inget (tom disk). Observera att det är här vi skulle kunna använda en ögonblicksbild eller Storage Blob för att skapa en virtuell hårddisk.</span><span class="sxs-lookup"><span data-stu-id="25c54-157">You can take all the defaults: Premium SSD, 1023 GB, and None (empty disk); although notice that here is where we could use a snapshot, or Storage Blob to create a VHD.</span></span>

1. <span data-ttu-id="25c54-158">Klicka på **OK** för att skapa disken och gå tillbaka till avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="25c54-158">Click **OK** to create the disk and go back to the **DATA DISKS** section.</span></span>

1. <span data-ttu-id="25c54-159">En ny disk bör visas på den första raden.</span><span class="sxs-lookup"><span data-stu-id="25c54-159">There should now be a new disk in the first row.</span></span>

    ![Ny disk på den virtuella datorn](../media-drafts/3-new-disk.png)

## <a name="configure-the-network"></a><span data-ttu-id="25c54-161">Konfigurera nätverket</span><span class="sxs-lookup"><span data-stu-id="25c54-161">Configure the Network</span></span>

1. <span data-ttu-id="25c54-162">Gå till avsnittet Nätverk genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="25c54-162">Click **Next** to move to the Networking section.</span></span>

1. <span data-ttu-id="25c54-163">I ett produktionssystem där vi redan har andra komponenter vill vi använda ett _befintligt_ virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="25c54-163">In a production system where we already have other components, we'd want to utilize an _existing_ virtual network.</span></span> <span data-ttu-id="25c54-164">På så sätt kan vår virtuella dator kommunicera med de andra molntjänsterna i vår lösning.</span><span class="sxs-lookup"><span data-stu-id="25c54-164">That way our VM can communicate with the other cloud services in our solution.</span></span> <span data-ttu-id="25c54-165">Om ingenting har definierats på den här platsen än kan vi skapa det här och konfigurera:</span><span class="sxs-lookup"><span data-stu-id="25c54-165">If there isn't one defined in this location yet, we can create it here and configure the:</span></span>
    - <span data-ttu-id="25c54-166">**Adressutrymme**: Hela det IPV4-utrymme som är tillgängligt för det här nätverket.</span><span class="sxs-lookup"><span data-stu-id="25c54-166">**Address space**: the overall IPV4 space available to this network.</span></span>
    - <span data-ttu-id="25c54-167">**Intervall för undernät**: Det första undernätet som delar in adressutrymmet i underordnade nät – det var giltigt i det definierade adressutrymmet.</span><span class="sxs-lookup"><span data-stu-id="25c54-167">**Subnet range**: the first subnet to subdivide the address space - it must fit within the defined address space.</span></span> <span data-ttu-id="25c54-168">När det virtuella nätverket har skapats kan du lägga till fler undernät.</span><span class="sxs-lookup"><span data-stu-id="25c54-168">Once the VNet is created, you can add additional subnets.</span></span>

> [!NOTE]
> <span data-ttu-id="25c54-169">Som standard skapar Azure ett virtuellt nätverk, ett nätverksgränssnitt och en offentlig IP för din virtuella dator.</span><span class="sxs-lookup"><span data-stu-id="25c54-169">By default, Azure will create a virtual network, network interface, and public IP for your VM.</span></span> <span data-ttu-id="25c54-170">Det är inte helt okomplicerat att ändra nätverksalternativen i efterhand, när den virtuella datorn har skapats. Därför bör du alltid dubbelkolla nätverkstilldelningarna för tjänster som du skapar i Azure.</span><span class="sxs-lookup"><span data-stu-id="25c54-170">It's not trivial to change the networking options after the VM has been created so always double-check the network assignments on services you create in Azure.</span></span>

## <a name="finish-configuring-the-vm-and-create-the-image"></a><span data-ttu-id="25c54-171">Slutför konfigurationen av den virtuella datorn och skapa avbildningen</span><span class="sxs-lookup"><span data-stu-id="25c54-171">Finish configuring the VM and create the image</span></span>

<span data-ttu-id="25c54-172">Resten av alternativen har redan lämpliga standardinställningar och du behöver inte ändra dem.</span><span class="sxs-lookup"><span data-stu-id="25c54-172">The rest of the options have reasonable defaults, and there's no need to change any of them.</span></span> <span data-ttu-id="25c54-173">Utforska de andra flikarna om du vill.</span><span class="sxs-lookup"><span data-stu-id="25c54-173">You can explore the other tabs if you like.</span></span> <span data-ttu-id="25c54-174">Bredvid respektive alternativ visas en `(i)`-ikon som öppnar en hjälpbubbla med en beskrivning av alternativet.</span><span class="sxs-lookup"><span data-stu-id="25c54-174">The individual options have an `(i)` icon next to them that will show a help bubble to explain the option.</span></span> <span data-ttu-id="25c54-175">Beskrivningen är ett bra sätt att lära dig mer om de olika alternativen som du kan använda för att konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="25c54-175">This is a great way to learn about the various options you can use to configure the VM.</span></span>

1. <span data-ttu-id="25c54-176">Klicka på knappen **Granska + skapa** längst ned på panelen.</span><span class="sxs-lookup"><span data-stu-id="25c54-176">Click the **Review + create** button at the bottom of the panel.</span></span>

1. <span data-ttu-id="25c54-177">Systemet validerar alternativen och visar information om den virtuella datorn som skapas.</span><span class="sxs-lookup"><span data-stu-id="25c54-177">The system will validate your options and give you details about the VM being created.</span></span>

1. <span data-ttu-id="25c54-178">Skapa och distribuera den virtuella datorn genom att klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="25c54-178">Click **Create** to create and deploy the VM.</span></span> <span data-ttu-id="25c54-179">På instrumentpanelen i Azure ser du den virtuella dator som distribueras.</span><span class="sxs-lookup"><span data-stu-id="25c54-179">The Azure dashboard will show the VM that's being deployed.</span></span> <span data-ttu-id="25c54-180">Det här kan ta flera minuter.</span><span class="sxs-lookup"><span data-stu-id="25c54-180">This may take several minutes.</span></span>

<span data-ttu-id="25c54-181">Medan den virtuella datorn distribueras ska vi titta närmare på vad vi kan göra med den.</span><span class="sxs-lookup"><span data-stu-id="25c54-181">While that's deploying, let's look at what we can do with this VM.</span></span>