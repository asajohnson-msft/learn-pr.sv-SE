<span data-ttu-id="18ff6-101">Som nätverksadministratör på ett dataanalysföretag är du ansvarig för att ansluta till virtuella datorer i Azure och kontrollera att de är rätt konfigurerade.</span><span class="sxs-lookup"><span data-stu-id="18ff6-101">As a network administrator at a data analysis company, you're responsible for connecting to virtual machines in Azure and checking that they're properly configured.</span></span> <span data-ttu-id="18ff6-102">Detta kan göras med en Remote Desktop Protocol-klient som ansluter till den virtuella Windows-datorns användargränssnitt.</span><span class="sxs-lookup"><span data-stu-id="18ff6-102">You do that using a Remote Desktop Protocol client to connect to the VM's Windows desktop UI.</span></span>

## <a name="what-is-the-remote-desktop-protocol"></a><span data-ttu-id="18ff6-103">Vad är Remote Desktop Protocol?</span><span class="sxs-lookup"><span data-stu-id="18ff6-103">What is the Remote Desktop Protocol?</span></span>

<span data-ttu-id="18ff6-104">Med Remote Desktop Protocol (RDP) kan du fjärransluta till användargränssnittet i Windows-baserade datorer.</span><span class="sxs-lookup"><span data-stu-id="18ff6-104">Remote Desktop Protocol (RDP) provides remote connectivity to the UI of Windows-based computers.</span></span> <span data-ttu-id="18ff6-105">Du kan logga in på en fjärransluten fysisk eller virtuell Windows-dator och styra datorn, precis som när du sitter vid den.</span><span class="sxs-lookup"><span data-stu-id="18ff6-105">RDP enables you to sign in to a remote physical or virtual Windows computer and control that computer as if you were seated at the console.</span></span>

> [!Note]
> <span data-ttu-id="18ff6-106">Windows Hyper-V i Windows Server 2016 och Windows 10 ansluter till virtuella datorer som körs i hypervisor-programmet med Remote Desktop Protocol.</span><span class="sxs-lookup"><span data-stu-id="18ff6-106">Windows Hyper-V in Windows Server 2016 and Windows 10 uses RDP to connect to virtual machines running on the hypervisor.</span></span>

<span data-ttu-id="18ff6-107">Med en RDP-anslutning kan du utföra merparten av de åtgärder som du kan göra från konsolen på en fysisk dator, med undantag för vissa ström- och maskinvarurelaterade funktioner.</span><span class="sxs-lookup"><span data-stu-id="18ff6-107">An RDP connection enables you to carry out the vast majority of operations that you can do from the console of a physical computer, with the exception of some power and hardware-related functions.</span></span>

<span data-ttu-id="18ff6-108">En RDP-anslutning kräver en RDP-klient.</span><span class="sxs-lookup"><span data-stu-id="18ff6-108">An RDP connection requires an RDP client.</span></span> <span data-ttu-id="18ff6-109">Microsoft tillhandahåller RDP-klienter för följande operativsystem:</span><span class="sxs-lookup"><span data-stu-id="18ff6-109">Microsoft provides RDP clients for the following operating systems:</span></span>

* <span data-ttu-id="18ff6-110">Windows</span><span class="sxs-lookup"><span data-stu-id="18ff6-110">Windows</span></span>
* <span data-ttu-id="18ff6-111">iOS</span><span class="sxs-lookup"><span data-stu-id="18ff6-111">iOS</span></span>
* <span data-ttu-id="18ff6-112">MacOS</span><span class="sxs-lookup"><span data-stu-id="18ff6-112">MacOS</span></span>
* <span data-ttu-id="18ff6-113">Android</span><span class="sxs-lookup"><span data-stu-id="18ff6-113">Android</span></span>

<span data-ttu-id="18ff6-114">Det finns även Linux-klienter med öppen källkod, till exempel Remmina som gör det möjligt att ansluta till en Windows-dator från en Ubuntu-distribution.</span><span class="sxs-lookup"><span data-stu-id="18ff6-114">There are also open-source Linux clients, such as Remmina that enable you to connect to a Windows PC from an Ubuntu distribution.</span></span>

<span data-ttu-id="18ff6-115">Windows 10 innehåller en RDP-klient.</span><span class="sxs-lookup"><span data-stu-id="18ff6-115">Windows 10 includes an RDP client.</span></span>

![Windows RDP-klient](../images/2-rdp-client.PNG)

## <a name="what-functionality-does-an-rdp-connection-support"></a><span data-ttu-id="18ff6-117">Vilka funktioner stöds med en RDP-anslutning?</span><span class="sxs-lookup"><span data-stu-id="18ff6-117">What functionality does an RDP connection support?</span></span>

<span data-ttu-id="18ff6-118">Du kan interagera med användargränssnittet med en RDP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="18ff6-118">With an RDP connection, you can interact with the UI.</span></span> <span data-ttu-id="18ff6-119">Du kan även ansluta till andra tjänster på fjärrdatorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-119">However, you can also connect to other services on the remote computer.</span></span> <span data-ttu-id="18ff6-120">Några exempel är:</span><span class="sxs-lookup"><span data-stu-id="18ff6-120">These services include:</span></span>

* <span data-ttu-id="18ff6-121">Skrivaranslutningar så att du kan skriva ut till den lokala utskriftsenheten från fjärrdatorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-121">Printer connections that enable the remote computer to print to your local print device.</span></span>
* <span data-ttu-id="18ff6-122">Ljuduppspelning där ljud kan spelas upp på den lokala datorn eller på den fjärranslutna enheten.</span><span class="sxs-lookup"><span data-stu-id="18ff6-122">Audio playback, where audio can play either on the local computer or on the remote device.</span></span>
* <span data-ttu-id="18ff6-123">Ljudinspelning där du kan spela in ljud från den lokala datorn och dirigera ljudet till den fjärranslutna enheten.</span><span class="sxs-lookup"><span data-stu-id="18ff6-123">Audio recording, where you can record audio from the local computer and direct that sound to the remote device.</span></span>
* <span data-ttu-id="18ff6-124">Portar som kan omdirigeras till portar på den lokala datorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-124">Ports, which you can redirect to the ports on the local computer.</span></span>
* <span data-ttu-id="18ff6-125">Enheter – inklusive mappade nätverksenheter – som visas som anslutna till fjärrdatorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-125">Drives, including mapped network drives, where the drives will appear as connected to the remote computer.</span></span>
* <span data-ttu-id="18ff6-126">Videoinspelningsenheter som integrerade webbkameror.</span><span class="sxs-lookup"><span data-stu-id="18ff6-126">Video capture devices, such as integrated web cams.</span></span>
* <span data-ttu-id="18ff6-127">Andra plug and play-enheter som stöds.</span><span class="sxs-lookup"><span data-stu-id="18ff6-127">Other supported plug and play devices.</span></span>

<span data-ttu-id="18ff6-128">Alla dessa funktioner stöds inte i Azure. Det finns begränsningar för vilka fysiska resurser som är tillgängliga på plattformen.</span><span class="sxs-lookup"><span data-stu-id="18ff6-128">Not all of these features are supported in Azure, as there are restrictions on what physical assets are available on that platform.</span></span> <span data-ttu-id="18ff6-129">Till exempel kan endast programvaruskrivare omdirigeras via en RDP-anslutning från en Azure-baserad virtuell dator till den anslutna klientens utskriftsenheter.</span><span class="sxs-lookup"><span data-stu-id="18ff6-129">For example, only software printers can be redirected across an RDP connection from an Azure-hosted VM to the connecting client's print devices.</span></span>

## <a name="configure-network-settings-for-rdp-access-to-virtual-machines"></a><span data-ttu-id="18ff6-130">Konfigurera nätverksinställningarna för RDP-åtkomst till virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="18ff6-130">Configure network settings for RDP access to virtual machines</span></span>

<span data-ttu-id="18ff6-131">Du kan ansluta till virtuella Azure-datorer på tre sätt:</span><span class="sxs-lookup"><span data-stu-id="18ff6-131">Connections to Azure VMs can be made in three ways:</span></span>

1. <span data-ttu-id="18ff6-132">Direkt till den virtuella datorns offentliga IP-adress.</span><span class="sxs-lookup"><span data-stu-id="18ff6-132">Directly to the public IP address of the VM.</span></span>
2. <span data-ttu-id="18ff6-133">Via en anslutning för ett virtuellt privat nätverk (VPN).</span><span class="sxs-lookup"><span data-stu-id="18ff6-133">Through a virtual private network (VPN) connection.</span></span>
3. <span data-ttu-id="18ff6-134">Via en ExpressRoute-anslutning.</span><span class="sxs-lookup"><span data-stu-id="18ff6-134">Through an ExpressRoute connection.</span></span>

<span data-ttu-id="18ff6-135">En offentlig IP-adress kan vara permanent tilldelad eller dynamisk.</span><span class="sxs-lookup"><span data-stu-id="18ff6-135">A public IP address can be either permanently allocated or dynamic.</span></span> <span data-ttu-id="18ff6-136">Du måste också se till att ha åtkomst till den virtuella datorns offentliga adress på porten 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="18ff6-136">You also need to ensure that you have access to the VM's public address on port 3389 (RDP).</span></span> <span data-ttu-id="18ff6-137">Det här kan innebära förhandlingar med teamet som hanterar din organisations brandväggssäkerhet, och att en regel konfigureras för din virtuella dators offentliga IP-adress på porten 3389.</span><span class="sxs-lookup"><span data-stu-id="18ff6-137">This provision may require negotiation with the team that's managing your organization's firewall security, setting up a rule to your VM's public IP address on port 3389.</span></span>

<span data-ttu-id="18ff6-138">Dynamiska offentliga IP-adresser tilldelas varje gång den virtuella datorn startas om.</span><span class="sxs-lookup"><span data-stu-id="18ff6-138">Dynamic public IP addresses are reallocated every time the VM restarts.</span></span> <span data-ttu-id="18ff6-139">Statiska adresser är beständiga men kostar mer.</span><span class="sxs-lookup"><span data-stu-id="18ff6-139">Static addresses are persistent, but cost more.</span></span>

<span data-ttu-id="18ff6-140">Om du vill ansluta via ett VPN måste det lokala nätverket ha en aktiv VPN-anslutning till Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="18ff6-140">To connect through a VPN, your local network must have an active VPN connection to Microsoft Azure.</span></span>

<span data-ttu-id="18ff6-141">ExpressRoute-länkmetoden hanterar anslutningen till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-141">The ExpressRoute link approach manages connectivity to the VM.</span></span> <span data-ttu-id="18ff6-142">Den här metoden ger även lägst svarstid och högst bandbredd.</span><span class="sxs-lookup"><span data-stu-id="18ff6-142">This approach also provides the lowest latency and highest bandwidth connection.</span></span>

> [!Note]
> <span data-ttu-id="18ff6-143">Oavsett vilket alternativ du använder för att ansluta till Azure måste du se till att den virtuella datorn nås via RDP, vanligtvis på standardporten 3389.</span><span class="sxs-lookup"><span data-stu-id="18ff6-143">Regardless of which option you use to connect to Azure, you need to ensure the virtual machine is accessible over RDP, typically on the default port 3389.</span></span> <span data-ttu-id="18ff6-144">Du kan konfigurera den virtuella datorn så att den nås enbart från din egen klient-IP-adress.</span><span class="sxs-lookup"><span data-stu-id="18ff6-144">You can configure the VM so it can be accessed only from your own client IP address.</span></span> <span data-ttu-id="18ff6-145">Att ansluta till en virtuell dator via porten 3389 på en offentlig IP-adress rekommenderas endast för testmiljöer.</span><span class="sxs-lookup"><span data-stu-id="18ff6-145">Connecting to a VM over port 3389 on a public IP address is only recommended for test environments.</span></span> <span data-ttu-id="18ff6-146">Använd alternativ 2 eller 3 i produktionsmiljöer.</span><span class="sxs-lookup"><span data-stu-id="18ff6-146">In production environments, use option 2 or 3.</span></span>

## <a name="how-do-you-connect-to-a-vm-in-azure-using-rdp"></a><span data-ttu-id="18ff6-147">Hur ansluter du till en virtuell dator i Azure med RDP?</span><span class="sxs-lookup"><span data-stu-id="18ff6-147">How do you connect to a VM in Azure using RDP?</span></span>

<span data-ttu-id="18ff6-148">Det är enkelt att ansluta till en virtuell dator i Azure med RDP.</span><span class="sxs-lookup"><span data-stu-id="18ff6-148">Connecting to a VM in Azure using RDP is a simple process.</span></span> <span data-ttu-id="18ff6-149">Gå till egenskaperna för din virtuella dator i Azure-portalen och klicka på **Anslut** högst upp.</span><span class="sxs-lookup"><span data-stu-id="18ff6-149">In the Azure portal, you go to the properties of your VM, and at the top, click **Connect**.</span></span> <span data-ttu-id="18ff6-150">Genom den här åtgärden hämtas en förkonfigurerad .RDP-fil som Windows öppnar i RDP-klienten.</span><span class="sxs-lookup"><span data-stu-id="18ff6-150">This action downloads a preconfigured .RDP file that Windows then opens in the RDP client.</span></span> <span data-ttu-id="18ff6-151">Du kan välja att ansluta via den offentliga IP-adressen till den virtuella datorn i RDP-filen.</span><span class="sxs-lookup"><span data-stu-id="18ff6-151">You can choose to connect over the public IP address of the VM in the RDP file.</span></span> <span data-ttu-id="18ff6-152">Om du ansluter via VPN eller ExpressRoute kan du välja den interna IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="18ff6-152">Alternatively, if you're connecting over VPN or ExpressRoute, you can select the internal IP address.</span></span> <span data-ttu-id="18ff6-153">Du kan också välja portnumret för anslutningen.</span><span class="sxs-lookup"><span data-stu-id="18ff6-153">You can also select the port number for the connection.</span></span>

<span data-ttu-id="18ff6-154">Om du använder en statisk offentlig IP-adress för den virtuella datorn kan du spara .RDP-filen på skrivbordet.</span><span class="sxs-lookup"><span data-stu-id="18ff6-154">If you're using a static public IP address for the VM, you can save the .RDP file to your desktop.</span></span> <span data-ttu-id="18ff6-155">Om du använder dynamisk IP-adresshantering är .RDP-filen endast giltig när den virtuella datorn körs.</span><span class="sxs-lookup"><span data-stu-id="18ff6-155">If you're using dynamic IP addressing, the .RDP file only remains valid while the VM is running.</span></span> <span data-ttu-id="18ff6-156">Om du stoppar och startar om den virtuella datorn måste du hämta en annan .RDP-fil.</span><span class="sxs-lookup"><span data-stu-id="18ff6-156">If you stop and restart the VM, you must download another .RDP file.</span></span>

> [!Note]
> <span data-ttu-id="18ff6-157">Du kan också ange den offentliga IP-adressen till den virtuella datorn i Windows RDP-klient och klicka på **Anslut**.</span><span class="sxs-lookup"><span data-stu-id="18ff6-157">You can also enter the public IP address of the VM into the Windows RDP client and click **Connect**.</span></span>

<span data-ttu-id="18ff6-158">När du ansluter får du troligtvis två varningar.</span><span class="sxs-lookup"><span data-stu-id="18ff6-158">When you connect, you will typically receive two warnings.</span></span> <span data-ttu-id="18ff6-159">Dessa är:</span><span class="sxs-lookup"><span data-stu-id="18ff6-159">These are:</span></span>

* <span data-ttu-id="18ff6-160">Utgivarvarning – .RDP-filen har inte signerats offentligt.</span><span class="sxs-lookup"><span data-stu-id="18ff6-160">Publisher warning - caused by the .RDP file not being publicly signed.</span></span>
* <span data-ttu-id="18ff6-161">Certifikatvarning – datorcertifikatet är inte betrott.</span><span class="sxs-lookup"><span data-stu-id="18ff6-161">Certificate warning - caused by the machine certificate not being trusted.</span></span>

<span data-ttu-id="18ff6-162">Dessa varningar kan ignoreras i testmiljö.</span><span class="sxs-lookup"><span data-stu-id="18ff6-162">In test environments, these warnings can be ignored.</span></span> <span data-ttu-id="18ff6-163">I produktionsmiljö kan .RDP-filen signeras med hjälp av RDPSIGN. EXE och datorcertifikatet kan placeras i klientens arkiv för **betrodda rotcertifikatutfärdare**.</span><span class="sxs-lookup"><span data-stu-id="18ff6-163">In production environments, the .RDP file could be signed using RDPSIGN.EXE and the machine certificate placed in the client's **Trusted Root Certification Authorities** store.</span></span>

## <a name="summary"></a><span data-ttu-id="18ff6-164">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="18ff6-164">Summary</span></span>

<span data-ttu-id="18ff6-165">Du kan nu ansluta till en virtuell Windows-dator med hjälp av RDP.</span><span class="sxs-lookup"><span data-stu-id="18ff6-165">Now you can connect to a Windows VM by using RDP.</span></span> <span data-ttu-id="18ff6-166">I nästa övning kommer du att använda RDP för att ansluta till en virtuell dator, och sedan installerar du en serverroll på datorn.</span><span class="sxs-lookup"><span data-stu-id="18ff6-166">In the following exercise, you will use RDP to connect to a VM, then install a server role on that computer.</span></span>
