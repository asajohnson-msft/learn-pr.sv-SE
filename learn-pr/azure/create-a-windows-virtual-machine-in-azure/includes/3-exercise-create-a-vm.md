<span data-ttu-id="01083-101">Som du kanske minns sysslar vårt företag med bearbetning av videoinnehåll på virtuella Windows-datorer.</span><span class="sxs-lookup"><span data-stu-id="01083-101">Recall that our company processes video content on Windows VMs.</span></span> <span data-ttu-id="01083-102">En ny stad har anlitat oss för att bearbeta video från deras trafikkameror, men det är en modell som vi inte har arbetat med tidigare.</span><span class="sxs-lookup"><span data-stu-id="01083-102">A new city has contracted us to process their traffic cameras, but it's a model we've not worked with before.</span></span> <span data-ttu-id="01083-103">Vi måste skapa en ny virtuell Windows-dator och installera några tillverkarspecifika codec-rutiner så att vi kan börja bearbeta och analysera kundens bilder.</span><span class="sxs-lookup"><span data-stu-id="01083-103">We need to create a new Windows VM and install some proprietary codecs so we can begin processing and analyzing their images.</span></span>

## <a name="create-a-new-windows-virtual-machine"></a><span data-ttu-id="01083-104">Skapa en ny virtuell Windows-dator</span><span class="sxs-lookup"><span data-stu-id="01083-104">Create a new Windows virtual machine</span></span>

<span data-ttu-id="01083-105">Vi kan skapa en virtuell Windows-dator med Azure Portal, Azure CLI eller Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="01083-105">We can create Windows VMs with the Azure portal, Azure CLI, or Azure PowerShell.</span></span> <span data-ttu-id="01083-106">Den enklaste metoden är portalen eftersom den går igenom den information som krävs samt visar tips och användbara meddelanden när vi skapar den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="01083-106">The easiest approach is to the portal because it walks you through the required information and provides hints and helpful messages during the creation.</span></span>

1. <span data-ttu-id="01083-107">Logga in till [Azure Portal](https://portal.azure.com?azure-portal=true).</span><span class="sxs-lookup"><span data-stu-id="01083-107">Sign into the [Azure portal](https://portal.azure.com?azure-portal=true).</span></span>

1. <span data-ttu-id="01083-108">Klicka på **Skapa en resurs** uppe till vänster på Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="01083-108">Click **Create a resource** in the upper left corner of the Azure portal.</span></span>

1. <span data-ttu-id="01083-109">Ange **Windows Server 2016 Datacenter** i sökrutan och klicka sedan på länken med samma namn i listan som visas.</span><span class="sxs-lookup"><span data-stu-id="01083-109">In the search box, enter  **Windows Server 2016 Datacenter**  and then click on the link with the same title in the presented list.</span></span>

1. <span data-ttu-id="01083-110">Klicka på knappen **Skapa** för att börja konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="01083-110">Click the **Create** button to start configuring the VM.</span></span>

## <a name="configure-the-vm-settings"></a><span data-ttu-id="01083-111">Konfigurera inställningar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="01083-111">Configure the VM settings</span></span>

<span data-ttu-id="01083-112">När du skapar en virtuell dator på portalen går du igenom en guide som vägleder dig genom alla konfigurationsområden.</span><span class="sxs-lookup"><span data-stu-id="01083-112">The VM creation experience in the portal is presented in a "wizard" format to walk you through all the configuration areas for the VM.</span></span> <span data-ttu-id="01083-113">När du klickar på ”Nästa” kommer du till nästa konfigurerbara avsnitt.</span><span class="sxs-lookup"><span data-stu-id="01083-113">Clicking the "Next" button will take you to the next configurable section.</span></span> <span data-ttu-id="01083-114">Du kan dock förflytta dig mellan avsnitten när du vill med hjälp av flikarna som visas längs överkanten och som identifierar varje avsnitt.</span><span class="sxs-lookup"><span data-stu-id="01083-114">However, you can move between the sections at will with the tabs running across the top that identify each section.</span></span>

![Skapa en virtuell dator på Azure Portal](../media-drafts/3-azure-portal-create-vm.png)

<span data-ttu-id="01083-116">När du har fyllt i alla obligatoriska alternativ (som visas med röda stjärnor) kan du hoppa över resten av guiden och börja skapa den virtuella datorn med hjälp av knappen **Granska + skapa** längst ned.</span><span class="sxs-lookup"><span data-stu-id="01083-116">Once you fill in all the required options (identified with red stars), you can skip the remainder of the wizard experience and start creating the VM through the **Review + Create** button at the bottom.</span></span>

<span data-ttu-id="01083-117">Vi börjar med avsnittet **Grundläggande inställningar**.</span><span class="sxs-lookup"><span data-stu-id="01083-117">We'll start with the **Basics** section.</span></span>

### <a name="configure-basic-vm-settings"></a><span data-ttu-id="01083-118">Konfigurera grundläggande inställningar för en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="01083-118">Configure basic VM settings</span></span>

1. <span data-ttu-id="01083-119">Välj den **prenumeration** som den virtuella datorns körningstimmar ska debiteras mot.</span><span class="sxs-lookup"><span data-stu-id="01083-119">Select the **Subscription** that should be billed for VM hours.</span></span>

1. <span data-ttu-id="01083-120">Välj **Skapa ny** för **Resursgrupp** och ge resursgruppen namnet **ExerciseResources**.</span><span class="sxs-lookup"><span data-stu-id="01083-120">For **Resource group**, select **Create new** and give the resource group the name **ExerciseResources**.</span></span>

> [!NOTE]
> <span data-ttu-id="01083-121">När du ändrar inställningen för ett fält och sedan flyttar från fältet valideras det nya värdet automatiskt av Azure och en grön bock visas bredvid värdet om det är giltigt.</span><span class="sxs-lookup"><span data-stu-id="01083-121">As you change settings and tab out of each field Azure will validate each value automatically and place a green check-mark next to it when it's good.</span></span> <span data-ttu-id="01083-122">Du kan hovra över felindikatorerna om du vill ha mer information om problem som identifieras.</span><span class="sxs-lookup"><span data-stu-id="01083-122">You can hover over error indicators to get more information for issues it discovers.</span></span>

1. <span data-ttu-id="01083-123">I avsnittet **INSTANSINFORMATION** anger du ett namn på den virtuella datorn, till exempel ”test-vp-vm2” (för Test Video Processor VM #2).</span><span class="sxs-lookup"><span data-stu-id="01083-123">In the **INSTANCE DETAILS** section, enter a name for your VM, such as "test-vp-vm2" (for Test Video Processor VM #2).</span></span>
    - <span data-ttu-id="01083-124">Det är bästa praxis att standardisera resursnamnen så att du enkelt kan identifiera deras syfte.</span><span class="sxs-lookup"><span data-stu-id="01083-124">It's best practice to standardize your resource names so you can easily identify their purpose.</span></span> <span data-ttu-id="01083-125">Namnen på virtuella Windows-datorer är en aning begränsade – de måste vara mellan 2 och 15 tecken och måste bestå av siffror, bokstäver och bindestreck.</span><span class="sxs-lookup"><span data-stu-id="01083-125">Windows VM names are a bit limited - they must be between 2 and 15 characters and be comprised of numbers, letters, and dashes.</span></span>

1. <span data-ttu-id="01083-126">Välj en region nära dig.</span><span class="sxs-lookup"><span data-stu-id="01083-126">Select a region close to you.</span></span>

1. <span data-ttu-id="01083-127">Lämna **Tillgänglighetsalternativ** som ”Inga”.</span><span class="sxs-lookup"><span data-stu-id="01083-127">Leave **Availability options** as "None".</span></span> <span data-ttu-id="01083-128">Det här alternativet används för att se till att den virtuella datorn har hög tillgänglighet. Detta görs genom att flera virtuella datorer grupperas för att underlätta hanteringen av planerade eller oplanerade underhållsåtgärder eller avbrott.</span><span class="sxs-lookup"><span data-stu-id="01083-128">This option is used to ensure the VM is highly available by grouping multiple VMs together a set to deal with planned or unplanned maintenance events or outages.</span></span>

1. <span data-ttu-id="01083-129">Kontrollera att avbildningen är inställd på ”Windows Server 2016 Datacenter”.</span><span class="sxs-lookup"><span data-stu-id="01083-129">Ensure the image is set to "Windows Server 2016 Datacenter".</span></span> <span data-ttu-id="01083-130">Du kan öppna listrutan för att visa alla tillgängliga alternativ.</span><span class="sxs-lookup"><span data-stu-id="01083-130">You can open the drop-down list to see all the options available.</span></span>

1. <span data-ttu-id="01083-131">I fältet **Typ av virtuell datordisk** klickar du på listrutan så att du ser alternativen.</span><span class="sxs-lookup"><span data-stu-id="01083-131">In the **VM Disk Type** field, click the drop-down menu to see the options.</span></span> <span data-ttu-id="01083-132">Kontrollera att **SSD** är valt.</span><span class="sxs-lookup"><span data-stu-id="01083-132">Ensure that **SSD** is selected.</span></span>

1. <span data-ttu-id="01083-133">Fältet **Storlek** kan inte ändras direkt och har standardstorleken DS1.</span><span class="sxs-lookup"><span data-stu-id="01083-133">The **Size** field is not directly editable and has a DS1 default size.</span></span> <span data-ttu-id="01083-134">Klicka på länken **Ändra storlek** om du vill utforska andra storlekar på virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="01083-134">Click the **Change size** link to explore other VM sizes.</span></span> <span data-ttu-id="01083-135">I dialogrutan som visas kan du filtrera baserat på antal processorer, namn och disktyp.</span><span class="sxs-lookup"><span data-stu-id="01083-135">The resulting dialog allows you to filter based on # of CPUs, Name, and Disk Type.</span></span> <span data-ttu-id="01083-136">Välj ”Standard DS1 v2” (vanligtvis standardinställningen) när du är klar.</span><span class="sxs-lookup"><span data-stu-id="01083-136">Select "Standard DS1 v2" (normally the default) when you are done.</span></span> <span data-ttu-id="01083-137">Med det här alternativet tilldelas den virtuella datorn 1 processor och 3,5 GB minne.</span><span class="sxs-lookup"><span data-stu-id="01083-137">That will give the VM 1 CPU and 3.5 GB of memory.</span></span>

    > [!TIP]
    > <span data-ttu-id="01083-138">Du kan också dra vyn åt vänster för att gå tillbaka till inställningarna för den virtuella datorn eftersom ett nytt fönster öppnades till höger och placerades ovanpå det.</span><span class="sxs-lookup"><span data-stu-id="01083-138">You can also just slide the view to the left to get back to the VM settings as it opened a new window off to the right and slid the window over to view it.</span></span>

1. <span data-ttu-id="01083-139">I fältet **Användarnamn** i avsnittet **ADMINISTRATÖRSÅTKOMST** anger du ett användarnamn som du ska använda för att logga in på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="01083-139">In the **ADMINISTRATOR ACCESS** section, set the **Username** field to a username you will use to sign in to the VM.</span></span>

1. <span data-ttu-id="01083-140">I fältet **Lösenord** anger du ett lösenord som är minst 12 tecken långt.</span><span class="sxs-lookup"><span data-stu-id="01083-140">In the **Password** field, enter a password that's at least 12 characters long.</span></span> <span data-ttu-id="01083-141">Det måste innehålla tre av följande typer av tecken: en gemen, en versal, en siffra och ett specialtecken som inte är ”\'” eller ”-”.</span><span class="sxs-lookup"><span data-stu-id="01083-141">It must have three of the following: one lower case character, one uppercase character, one number, and one special character that is not '\' or '-'.</span></span> <span data-ttu-id="01083-142">Använd något som är enkelt att komma ihåg eller skriv ned det eftersom du behöver det senare.</span><span class="sxs-lookup"><span data-stu-id="01083-142">Use something you will remember or write it down, you will need it later.</span></span>

1. <span data-ttu-id="01083-143">Bekräfta **lösenordet**.</span><span class="sxs-lookup"><span data-stu-id="01083-143">Confirm the **password**.</span></span>

1. <span data-ttu-id="01083-144">I avsnittet **REGLER FÖR INKOMMANDE PORTAR** öppnar du listan och _avmarkerar_ ”Inga”.</span><span class="sxs-lookup"><span data-stu-id="01083-144">In the **INBOUND PORT RULES** section, open the list and _uncheck_ "None".</span></span> <span data-ttu-id="01083-145">Eftersom det här är en virtuell Windows-dator vill vi kunna komma åt skrivbordet via RDP.</span><span class="sxs-lookup"><span data-stu-id="01083-145">Since this is a Windows VM, we want to be able to access the desktop using RDP.</span></span> <span data-ttu-id="01083-146">Bläddra i listan om det behövs tills du hittar RDP (3389) och välj det.</span><span class="sxs-lookup"><span data-stu-id="01083-146">Scroll the list if necessary until you find RDP (3389) and select it.</span></span> <span data-ttu-id="01083-147">Som meddelandet i användargränssnittet indikerar kan vi även ändra nätverksportarna efter att vi har skapat den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="01083-147">As the note in the UI indicates, we can also adjust the network ports after we create the VM.</span></span>

    ![Öppna porten för RDP-åtkomst på den virtuella Windows-datorn](../media-drafts/3-open-ports.png)

## <a name="configure-disks-for-the-vm"></a><span data-ttu-id="01083-149">Konfigurera diskar för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="01083-149">Configure Disks for the VM</span></span>

1. <span data-ttu-id="01083-150">Gå till avsnittet Diskar genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="01083-150">Click **Next** to move to the Disks section.</span></span>

    ![Konfigurera diskar för den virtuella datorn](../media-drafts/3-configure-disks.png)

1. <span data-ttu-id="01083-152">Välj ”Premium SSD” för **OS-disktypen**.</span><span class="sxs-lookup"><span data-stu-id="01083-152">Choose "Premium SSD" for the **OS disk type**.</span></span>

1. <span data-ttu-id="01083-153">Använd hanterade diskar så att vi inte behöver arbeta med lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="01083-153">Use managed disks so we don't have to work with storage accounts.</span></span> <span data-ttu-id="01083-154">Om du vill kan du växla inställningen i det grafiska användargränssnittet för att se skillnaden i vilken typ av information Azure behöver.</span><span class="sxs-lookup"><span data-stu-id="01083-154">You can flip the switch in the GUI to see the difference in information that Azure needs if you like.</span></span>

### <a name="create-a-data-disk"></a><span data-ttu-id="01083-155">Skapa en datadisk</span><span class="sxs-lookup"><span data-stu-id="01083-155">Create a data disk</span></span>

<span data-ttu-id="01083-156">Som du kanske minns får vi en operativsystemdisk (C:) och en temporär disk (D:).</span><span class="sxs-lookup"><span data-stu-id="01083-156">Recall we will get an OS disk (C:) and Temporary disk (D:).</span></span> <span data-ttu-id="01083-157">Nu ska vi lägga till en datadisk också.</span><span class="sxs-lookup"><span data-stu-id="01083-157">Let's add a data disk as well.</span></span>

1. <span data-ttu-id="01083-158">Klicka på länken **Create and attach a new disk** (Skapa och koppla en ny disk) i avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="01083-158">Click the **Create and attach a new disk** link in the **DATA DISKS** section.</span></span>

    ![Skapa en datadisk för den virtuella datorn på portalen](../media-drafts/3-add-data-disk.png)

1. <span data-ttu-id="01083-160">Du kan använda alla standardvärden: Premium SSD, 1 023 GB och Inget (tom disk). Observera att det är här vi skulle kunna använda en ögonblicksbild eller Storage Blob för att skapa en virtuell hårddisk.</span><span class="sxs-lookup"><span data-stu-id="01083-160">You can take all the defaults: Premium SSD, 1023 GB, and None (empty disk); although notice that here is where we could use a snapshot, or Storage Blob to create a VHD.</span></span>

1. <span data-ttu-id="01083-161">Klicka på **OK** för att skapa disken och gå tillbaka till avsnittet **DATADISKAR**.</span><span class="sxs-lookup"><span data-stu-id="01083-161">Click **OK** to create the disk and go back to the **DATA DISKS** section.</span></span>

1. <span data-ttu-id="01083-162">En ny disk bör visas på den första raden.</span><span class="sxs-lookup"><span data-stu-id="01083-162">There should now be a new disk in the first row.</span></span>

    ![Ny disk på den virtuella datorn](../media-drafts/3-new-disk.png)

## <a name="configure-the-network"></a><span data-ttu-id="01083-164">Konfigurera nätverket</span><span class="sxs-lookup"><span data-stu-id="01083-164">Configure the Network</span></span>

1. <span data-ttu-id="01083-165">Gå till avsnittet Nätverk genom att klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="01083-165">Click **Next** to move to the Networking section.</span></span>

1. <span data-ttu-id="01083-166">I ett produktionssystem där vi redan har andra komponenter vill vi använda ett _befintligt_ virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="01083-166">In a production system where we already have other components, we'd want to utilize an _existing_ virtual network.</span></span> <span data-ttu-id="01083-167">På så sätt kan vår virtuella dator kommunicera med de andra molntjänsterna i vår lösning.</span><span class="sxs-lookup"><span data-stu-id="01083-167">That way our VM can communicate with the other cloud services in our solution.</span></span> <span data-ttu-id="01083-168">Om ingenting har definierats på den här platsen än kan vi skapa det här och konfigurera:</span><span class="sxs-lookup"><span data-stu-id="01083-168">If there isn't one defined in this location yet, we can create it here and configure the:</span></span>
    - <span data-ttu-id="01083-169">**Adressutrymme**: Hela det IPV4-utrymme som är tillgängligt för det här nätverket.</span><span class="sxs-lookup"><span data-stu-id="01083-169">**Address space**: the overall IPV4 space available to this network.</span></span>
    - <span data-ttu-id="01083-170">**Intervall för undernät**: Det första undernätet som delar in adressutrymmet i underordnade nät – det måste ligga inom det definierade adressutrymmet.</span><span class="sxs-lookup"><span data-stu-id="01083-170">**Subnet range**: the first subnet to subdivide the address space - it must fit within the defined address space.</span></span> <span data-ttu-id="01083-171">När det virtuella nätverket har skapats kan du lägga till fler undernät.</span><span class="sxs-lookup"><span data-stu-id="01083-171">Once the VNet is created you can add additional subnets.</span></span>

1. <span data-ttu-id="01083-172">Nu ska vi ändra standardintervallen och i stället använda IP-adressutrymmet `172.xxx`.</span><span class="sxs-lookup"><span data-stu-id="01083-172">Let's change the default ranges to use the `172.xxx` IP address space.</span></span>
    - <span data-ttu-id="01083-173">Ändra fältet **Adressutrymme** till `172.16.0.0/16` så att det tilldelas hela adressintervallet</span><span class="sxs-lookup"><span data-stu-id="01083-173">Change the **Address space** field to be `172.16.0.0/16` to give it the full range of addresses</span></span>
    - <span data-ttu-id="01083-174">Ändra fältet **Subnet Range** (Intervall för undernät) till `172.16.1.0/24` och tilldela 256 IP-adresser av utrymmet.</span><span class="sxs-lookup"><span data-stu-id="01083-174">Change the **Subnet range** field to be `172.16.1.0/24` to give it 256 IP addresses of the space.</span></span>

> [!NOTE]
> <span data-ttu-id="01083-175">Som standard skapar Azure ett virtuellt nätverk, ett nätverksgränssnitt och en offentlig IP-adress för din virtuella dator.</span><span class="sxs-lookup"><span data-stu-id="01083-175">By default, Azure will create a virtual network, network interface, and public IP for your VM.</span></span> <span data-ttu-id="01083-176">Det är inte helt okomplicerat att ändra nätverksalternativen i efterhand, när den virtuella datorn har skapats. Därför bör du alltid dubbelkolla nätverkstilldelningarna för tjänster som du skapar i Azure.</span><span class="sxs-lookup"><span data-stu-id="01083-176">It's not trivial to change the networking options after the VM has been created so always double-check the network assignments on services you create in Azure.</span></span>

## <a name="finish-configuring-the-vm-and-create-the-image"></a><span data-ttu-id="01083-177">Slutför konfigurationen av den virtuella datorn och skapa avbildningen</span><span class="sxs-lookup"><span data-stu-id="01083-177">Finish configuring the VM and create the image</span></span>

<span data-ttu-id="01083-178">Resten av alternativen har redan lämpliga standardinställningar och du behöver inte ändra dem.</span><span class="sxs-lookup"><span data-stu-id="01083-178">The rest of the options have reasonable defaults and there's no need to change any of them.</span></span> <span data-ttu-id="01083-179">Utforska de andra flikarna om du vill.</span><span class="sxs-lookup"><span data-stu-id="01083-179">You can explore the other tabs if you like.</span></span> <span data-ttu-id="01083-180">Bredvid respektive alternativ visas en `(i)`-ikon som öppnar en hjälpbubbla med en beskrivning av alternativet.</span><span class="sxs-lookup"><span data-stu-id="01083-180">The individual options have an `(i)` icon next to them that will show a help bubble to explain the option.</span></span> <span data-ttu-id="01083-181">Beskrivningen är ett bra sätt att lära dig mer om de olika alternativen som du kan använda för att konfigurera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="01083-181">This is a great way to learn about the various options you can use to configure the VM.</span></span>

1. <span data-ttu-id="01083-182">Klicka på knappen **Granska + skapa** längst ned på panelen.</span><span class="sxs-lookup"><span data-stu-id="01083-182">Click the **Review + create** button at the bottom of the panel.</span></span>

1. <span data-ttu-id="01083-183">Systemet validerar alternativen och visar information om den virtuella datorn som skapas.</span><span class="sxs-lookup"><span data-stu-id="01083-183">The system will validate your options and give you details about the VM being created.</span></span>

1. <span data-ttu-id="01083-184">Skapa och distribuera den virtuella datorn genom att klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="01083-184">Click **Create** to create and deploy the VM.</span></span> <span data-ttu-id="01083-185">På instrumentpanelen i Azure ser du den virtuella dator som distribueras.</span><span class="sxs-lookup"><span data-stu-id="01083-185">The Azure dashboard will show the VM that's being deployed.</span></span> <span data-ttu-id="01083-186">Det här kan ta flera minuter.</span><span class="sxs-lookup"><span data-stu-id="01083-186">This may take several minutes.</span></span>

<span data-ttu-id="01083-187">Medan den virtuella datorn distribueras ska vi titta närmare på vad vi kan göra med den.</span><span class="sxs-lookup"><span data-stu-id="01083-187">While that's deploying, let's look at what we can do with this VM.</span></span>