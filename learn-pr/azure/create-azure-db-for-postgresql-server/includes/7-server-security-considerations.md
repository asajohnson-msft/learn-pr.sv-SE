<span data-ttu-id="0ea22-101">Vi antar att du använder en lokal PostgreSQL-databas.</span><span class="sxs-lookup"><span data-stu-id="0ea22-101">Let's assume you're using an on-premises PostgreSQL database.</span></span> <span data-ttu-id="0ea22-102">Du hanterar alla säkerhetsaspekter och har låst all åtkomst till dina servrar med brandväggsregler på standardservernivå i PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="0ea22-102">You're managing all security aspects and you've locked down all access to your servers using the standard PostgreSQL server-level firewall rules.</span></span> <span data-ttu-id="0ea22-103">Nu vill du se till att du kan konfigurera samma brandväggsregler på servernivå i Azure.</span><span class="sxs-lookup"><span data-stu-id="0ea22-103">Now you want to make sure that you can configure the same server-level firewall rules in Azure.</span></span>

## <a name="server-security-considerations-and-connection-methods"></a><span data-ttu-id="0ea22-104">Säkerhetsöverväganden för server och anslutningsmetoder</span><span class="sxs-lookup"><span data-stu-id="0ea22-104">Server security considerations and connection methods</span></span>

<span data-ttu-id="0ea22-105">Det finns flera olika alternativ för att begränsa åtkomsten till Azure Database for PostgreSQL:s server och databaser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-105">You have a number of options to restrict access to your Azure Database for PostgreSQL server and databases.</span></span> <span data-ttu-id="0ea22-106">Nätverksåtkomst kan begränsas på nätverks-, server- eller databasnivå.</span><span class="sxs-lookup"><span data-stu-id="0ea22-106">Network access can be restricted at a network, server, or database level.</span></span> <span data-ttu-id="0ea22-107">Du kan välja något av följande alternativ:</span><span class="sxs-lookup"><span data-stu-id="0ea22-107">You can use any of the following options:</span></span>

- <span data-ttu-id="0ea22-108">Användarkonton för att begränsa databasåtkomst</span><span class="sxs-lookup"><span data-stu-id="0ea22-108">User accounts to restrict database access</span></span>
- <span data-ttu-id="0ea22-109">Virtuella nätverk för att begränsa nätverksåtkomsten</span><span class="sxs-lookup"><span data-stu-id="0ea22-109">Virtual networks to restrict network access</span></span>
- <span data-ttu-id="0ea22-110">Brandväggsregler för att begränsa serveråtkomst</span><span class="sxs-lookup"><span data-stu-id="0ea22-110">Firewall rules to restrict server access</span></span>

### <a name="authentication-and-authorization"></a><span data-ttu-id="0ea22-111">Autentisering och auktorisering</span><span class="sxs-lookup"><span data-stu-id="0ea22-111">Authentication and authorization</span></span>

<span data-ttu-id="0ea22-112">Azure Database for PostgreSQL-servern stöder ursprunglig PostgreSQL-autentisering.</span><span class="sxs-lookup"><span data-stu-id="0ea22-112">The Azure Database for PostgreSQL server supports native PostgreSQL authentication.</span></span> <span data-ttu-id="0ea22-113">Du kan ansluta och autentisera till servern med serverns administratörsinloggning.</span><span class="sxs-lookup"><span data-stu-id="0ea22-113">You can connect and authenticate to the server with the server's admin login.</span></span> <span data-ttu-id="0ea22-114">Du kommer också att skapa användare som kan ansluta till specifika databaser för att begränsa åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="0ea22-114">You'll also create users to connect to specific databases to limit access.</span></span>

### <a name="what-is-a-virtual-network"></a><span data-ttu-id="0ea22-115">Vad är ett virtuellt nätverk?</span><span class="sxs-lookup"><span data-stu-id="0ea22-115">What is a virtual network?</span></span>

<span data-ttu-id="0ea22-116">Ett virtuellt nätverk är ett logiskt isolerat nätverk som har skapats i Azure-nätverket.</span><span class="sxs-lookup"><span data-stu-id="0ea22-116">A virtual network is a logically isolated network that's created within the Azure network.</span></span> <span data-ttu-id="0ea22-117">Du kan använda ett virtuellt nätverk till att styra vilka Azure-resurser som kan ansluta till andra resurser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-117">You can use a virtual network to control what Azure resources can connect to other resources.</span></span>

<span data-ttu-id="0ea22-118">Anta att du kör en webbapp som ansluter till en databas.</span><span class="sxs-lookup"><span data-stu-id="0ea22-118">Imagine you're running a web application that connects to a database.</span></span> <span data-ttu-id="0ea22-119">Du använder undernät till att isolera olika delar av nätverket.</span><span class="sxs-lookup"><span data-stu-id="0ea22-119">You'll use subnets to isolate different parts of the network.</span></span> <span data-ttu-id="0ea22-120">Ett undernät är en del av ett nätverk som baseras på ett intervall med IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-120">A subnet is a part of a network that's based on a range of IP addresses.</span></span>

<span data-ttu-id="0ea22-121">När du ska konfigurera undernäten skapar du ett virtuellt nätverk och delar sedan in nätverket i undernät.</span><span class="sxs-lookup"><span data-stu-id="0ea22-121">To configure these subnets, you'll create a virtual network and then subdivide the network into subnets.</span></span> <span data-ttu-id="0ea22-122">Webbappen körs i ett undernät och databasen i ett annat.</span><span class="sxs-lookup"><span data-stu-id="0ea22-122">The web application will operate on one subnet and the database on another subnet.</span></span> <span data-ttu-id="0ea22-123">Varje undernät har sina egna regler för kommunikation till och från det andra nätverket.</span><span class="sxs-lookup"><span data-stu-id="0ea22-123">Each subnet will have its own rules for communicating to and from the other network.</span></span> <span data-ttu-id="0ea22-124">De här reglerna gör att du kan begränsa åtkomsten från databasen till webbappen.</span><span class="sxs-lookup"><span data-stu-id="0ea22-124">These rules give you the ability to restrict access from the database to the web application.</span></span>

<span data-ttu-id="0ea22-125">Att skapa ett virtuellt nätverk ligger utanför den här modulens omfattning.</span><span class="sxs-lookup"><span data-stu-id="0ea22-125">Creating a virtual network is beyond the scope of this module.</span></span> <span data-ttu-id="0ea22-126">Om du behöver mer information kan du utforska andra inlärningsmoduler som relaterar till virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="0ea22-126">If you need more information, please explore other learning modules related to virtual networks.</span></span>

### <a name="what-is-a-firewall"></a><span data-ttu-id="0ea22-127">Vad är en brandvägg?</span><span class="sxs-lookup"><span data-stu-id="0ea22-127">What is a firewall?</span></span>

<span data-ttu-id="0ea22-128">En brandvägg är en tjänst som ger serveråtkomst baserat på vilken IP-adress som varje begäran kommer från.</span><span class="sxs-lookup"><span data-stu-id="0ea22-128">A firewall is a service that grants server access based on the originating IP address of each request.</span></span> <span data-ttu-id="0ea22-129">Du skapar brandväggsregler som anger intervall med IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-129">You create firewall rules that specify ranges of IP addresses.</span></span> <span data-ttu-id="0ea22-130">Det är bara klienter från dessa beviljade IP-adresser som har åtkomst till servern.</span><span class="sxs-lookup"><span data-stu-id="0ea22-130">Only clients from these granted IP addresses will be allowed to access the server.</span></span> <span data-ttu-id="0ea22-131">Brandväggsregler inkluderar även i allmänhet specifika nätverksprotokoll och portinformation.</span><span class="sxs-lookup"><span data-stu-id="0ea22-131">Firewall rules, generally speaking, also include specific network protocol and port information.</span></span> <span data-ttu-id="0ea22-132">En PostgreSQL-server lyssnar till exempel som standard till TCP-begäranden på port 5432.</span><span class="sxs-lookup"><span data-stu-id="0ea22-132">For example, a PostgreSQL server by default listens to TCP requests on port 5432.</span></span>

### <a name="azure-database-for-postgresql-server-firewall"></a><span data-ttu-id="0ea22-133">Azure Database for PostgreSQL-serverbrandvägg</span><span class="sxs-lookup"><span data-stu-id="0ea22-133">Azure Database for PostgreSQL server firewall</span></span>

<span data-ttu-id="0ea22-134">Azure Database for PostgreSQL-serverbrandvägg en förhindrar brandväggar all åtkomst till din databasserver tills du anger vilka datorer som har behörighet.</span><span class="sxs-lookup"><span data-stu-id="0ea22-134">The Azure Database for PostgreSQL server firewall prevents all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="0ea22-135">I brandväggskonfigurationen kan du ange ett intervall med IP-adresser som ska kunna ansluta till servern.</span><span class="sxs-lookup"><span data-stu-id="0ea22-135">The firewall configuration allows you to specify a range of IP addresses that are allowed to connect to the server.</span></span> <span data-ttu-id="0ea22-136">Servern använder alltid standardinställningen för PostgreSQL-anslutningens information.</span><span class="sxs-lookup"><span data-stu-id="0ea22-136">The server always uses the default PostgreSQL connection information.</span></span>

![En bild som visar hur Azure Database for PostgreSQL-serverbrandväggen genomsöker IP-adressen för alla inkommande förfrågningar.](../media/7-firewall-diagram.png)

### <a name="azure-database-for-postgresql-server-ssl-connections"></a><span data-ttu-id="0ea22-139">SSL-anslutningar till Azure Database for PostgreSQL-server</span><span class="sxs-lookup"><span data-stu-id="0ea22-139">Azure Database for PostgreSQL server SSL connections</span></span>

<span data-ttu-id="0ea22-140">Azure Database for PostgreSQL föredrar att dina klientprogram ansluts till PostgreSQL-tjänsten med Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="0ea22-140">Azure Database for PostgreSQL prefers that your client applications connect to the PostgreSQL service using the Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="0ea22-141">Användning av SSL-anslutningar mellan databasservern och klientprogrammen skyddar mot ”man in the middle”-attacker och liknande attacker genom att kryptera datan mellan servern och klienten.</span><span class="sxs-lookup"><span data-stu-id="0ea22-141">Enforcing SSL connections between your database server and your client applications helps protect against "man in the middle" and similar attacks by encrypting the data between the server and client.</span></span> <span data-ttu-id="0ea22-142">För att aktivera SSL krävs utbyte av nycklar och strikt autentisering mellan klienten och servern för att anslutningen ska fungera.</span><span class="sxs-lookup"><span data-stu-id="0ea22-142">Enabling SSL requires the exchange of keys and strict authentication between client and server for the connection to work.</span></span> <span data-ttu-id="0ea22-143">Information om att använda SSL ligger utanför den här modulens omfattning.</span><span class="sxs-lookup"><span data-stu-id="0ea22-143">Details about using SSL are beyond the scope of this learning module.</span></span> <span data-ttu-id="0ea22-144">Om du behöver mer information kan du utforska andra inlärningsmoduler som relaterar till SSL.</span><span class="sxs-lookup"><span data-stu-id="0ea22-144">If you need more information, please explore other learning modules related to SSL.</span></span>

## <a name="configure-connection-security"></a><span data-ttu-id="0ea22-145">Konfigurera anslutningssäkerhet</span><span class="sxs-lookup"><span data-stu-id="0ea22-145">Configure connection security</span></span>

<span data-ttu-id="0ea22-146">Låt oss ta en titt på de beslut och steg som du tar för att konfigurera en Azure Database for PostgreSQL-serverbrandvägg.</span><span class="sxs-lookup"><span data-stu-id="0ea22-146">Let's look at the decisions and steps you make to configure an Azure Database for PostgreSQL server firewall.</span></span> <span data-ttu-id="0ea22-147">Du kommer också se hur du ansluter till servern som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="0ea22-147">You'll also see how to connect to the server that you created earlier.</span></span>

<span data-ttu-id="0ea22-148">Logga in på [Azure-portalen](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) med samma konto som du aktiverade sandbox-miljön.</span><span class="sxs-lookup"><span data-stu-id="0ea22-148">Sign into the [Azure portal](https://portal.azure.com/triplecrownlabs.onmicrosoft.com?azure-portal=true) using the same account you activated the sandbox with.</span></span> <span data-ttu-id="0ea22-149">Gå till serverresursen som du vill skapa en brandväggsregel för.</span><span class="sxs-lookup"><span data-stu-id="0ea22-149">Navigate to the server resource for which you'd like to create a firewall rule.</span></span>

<span data-ttu-id="0ea22-150">Välj sedan alternativet **Anslutningssäkerhet** för att öppna bladet Anslutningssäkerhet till höger.</span><span class="sxs-lookup"><span data-stu-id="0ea22-150">Then, you'll select the **Connection Security** option to open the connection security blade to the right.</span></span>

![Skärmbild av Azure Portal som visar avsnittet Anslutningssäkerhet på resursbladet för PostgreSQL-databasen](../media/7-db-security-settings.png)

<span data-ttu-id="0ea22-152">På den här skärmen finns det flera alternativ.</span><span class="sxs-lookup"><span data-stu-id="0ea22-152">On this screen, you have several options.</span></span> <span data-ttu-id="0ea22-153">Du kan:</span><span class="sxs-lookup"><span data-stu-id="0ea22-153">You can:</span></span>

- <span data-ttu-id="0ea22-154">Lägga till de IP-adresser som du använder för att få åtkomst till portalen som en brandväggspost genom att klicka på knappen **Lägg till klient-IP**.</span><span class="sxs-lookup"><span data-stu-id="0ea22-154">Add the IP address that you use to access the portal as a firewall entry by clicking on the **Add client IP** button.</span></span>
- <span data-ttu-id="0ea22-155">Tillåta åtkomst till Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="0ea22-155">Allow access to Azure services.</span></span> <span data-ttu-id="0ea22-156">Som standard har **inte** alla Azure-tjänster åtkomst till PostgreSQL-servern.</span><span class="sxs-lookup"><span data-stu-id="0ea22-156">By default, all Azure services **don't** have access to the PostgreSQL server.</span></span>
- <span data-ttu-id="0ea22-157">Lägga till brandväggsregler genom att ange IP-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="0ea22-157">Add firewall rules by entering ranges of IP addresses.</span></span>
- <span data-ttu-id="0ea22-158">Framtvinga SSL-anslutningar.</span><span class="sxs-lookup"><span data-stu-id="0ea22-158">Enforce SSL connections.</span></span> <span data-ttu-id="0ea22-159">Med det här alternativet tvingas klienten ansluta till servern med ett SSL-certifikat.</span><span class="sxs-lookup"><span data-stu-id="0ea22-159">This option forces your client to connect to the server using an SSL certificate.</span></span>

<span data-ttu-id="0ea22-160">Kom alltid ihåg att klicka på ikonen **Spara** ovanför inmatningsfältet för att spara din uppdaterade konfiguration när du har gjort ändringar.</span><span class="sxs-lookup"><span data-stu-id="0ea22-160">Always remember to click on the **Save** icon above the entry fields to save the updated configuration after you've made changes.</span></span>

### <a name="allow-access-to-azure-services"></a><span data-ttu-id="0ea22-161">Tillåta åtkomst till Azure-tjänster</span><span class="sxs-lookup"><span data-stu-id="0ea22-161">Allow access to Azure services</span></span>

<span data-ttu-id="0ea22-162">För att använda Azure Cloud Shell för att få åtkomst till eller konfigurera din server ska du se till att aktivera **Tillåt åtkomst till Azure-tjänster**.</span><span class="sxs-lookup"><span data-stu-id="0ea22-162">To use Azure Cloud Shell to access or configure your server, make sure to enable **Allow Access to Azure Services**.</span></span> <span data-ttu-id="0ea22-163">Det här steget lägger till en brandväggsregel till serverkonfigurationen för att tillåta åtkomst från Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="0ea22-163">This step is going to add a firewall rule to the server configuration to allow access from Cloud Shell.</span></span> <span data-ttu-id="0ea22-164">Regeln visas inte som en av de anpassade regler du lägger till.</span><span class="sxs-lookup"><span data-stu-id="0ea22-164">This rule won't show as one of the custom rules that you add.</span></span>

<span data-ttu-id="0ea22-165">Du måste också inaktivera **Framtvinga SSL-anslutning**.</span><span class="sxs-lookup"><span data-stu-id="0ea22-165">You also need to disable **Enforce SSL connection**.</span></span> <span data-ttu-id="0ea22-166">PowerShell kan inte ansluta till servern om SSL krävs för klientanslutningar.</span><span class="sxs-lookup"><span data-stu-id="0ea22-166">PowerShell can't connect to the server if SSL is required for client connections.</span></span>

<span data-ttu-id="0ea22-167">Båda alternativen leder till ett felmeddelande som visas på kommandoraden om konfigurationen är fel.</span><span class="sxs-lookup"><span data-stu-id="0ea22-167">Both of these options will result in an error message that's displayed on the command line if not configured correctly.</span></span>

<span data-ttu-id="0ea22-168">Om exempelvis åtkomst inte tillåts för Azure-tjänster och framtvingande av SSL-anslutningar är aktiverat, visas något som liknar det här felet när brandväggen blockerar åtkomsten:</span><span class="sxs-lookup"><span data-stu-id="0ea22-168">For example, if access is not allowed to Azure services and enforce SSL connections is enabled, then you'll see something similar to this error when the firewall is blocking access:</span></span>

```output
psql: FATAL: no pg_hba.conf entry for host "123.45.67.89", user "adminuser", database "postgres", SSL on FATAL:  SSL connection is required. Please specify SSL options and retry.
```

### <a name="create-a-firewall-rule-using-the-portal"></a><span data-ttu-id="0ea22-169">Skapa en brandväggsregel med portalen</span><span class="sxs-lookup"><span data-stu-id="0ea22-169">Create a firewall rule using the portal</span></span>

<span data-ttu-id="0ea22-170">Vi antar att du vill skapa en brandväggsregel som ger åtkomst från alla IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-170">Let's say you want to create a firewall rule that provides access from any IP address.</span></span>

> [!WARNING]
> <span data-ttu-id="0ea22-171">Om du skapar den här brandväggsregeln får alla IP-adresser på Internet tillåtelse att försöka ansluta till din server.</span><span class="sxs-lookup"><span data-stu-id="0ea22-171">Creating this firewall rule will allow any IP address on the Internet to attempt to connect to your server.</span></span> <span data-ttu-id="0ea22-172">Trots att klienterna inte får åtkomst till servern utan användarnamn och lösenord, bör du aktivera den här regeln med försiktighet och se till att du förstår säkerhetsriskerna.</span><span class="sxs-lookup"><span data-stu-id="0ea22-172">Even though clients won't be able access the server without the username and password, enable this rule with caution and make sure you understand the security implications.</span></span>

<span data-ttu-id="0ea22-173">Du kan skapa en ny brandväggsregel genom att ange följande information i fälten med etiketter:</span><span class="sxs-lookup"><span data-stu-id="0ea22-173">You create a new firewall rule by entering the following data in the labeled fields:</span></span>

- <span data-ttu-id="0ea22-174">Regelnamn: `AllowAll`</span><span class="sxs-lookup"><span data-stu-id="0ea22-174">Rule Name: `AllowAll`</span></span>
- <span data-ttu-id="0ea22-175">Start-IP: `0.0.0.0`</span><span class="sxs-lookup"><span data-stu-id="0ea22-175">Start IP: `0.0.0.0`</span></span>
- <span data-ttu-id="0ea22-176">Slut-IP: `255.255.255.255`</span><span class="sxs-lookup"><span data-stu-id="0ea22-176">End IP: `255.255.255.255`</span></span>

<span data-ttu-id="0ea22-177">För att ta bort en brandväggsregel klickar du på de tre punkterna (...) i slutet av regeln du vill ta bort.</span><span class="sxs-lookup"><span data-stu-id="0ea22-177">To remove a firewall rule, you'll click the ellipsis (...) at the end of the rule that you want to delete.</span></span> <span data-ttu-id="0ea22-178">Klicka på knappen **Ta bort** för att ta bort regeln.</span><span class="sxs-lookup"><span data-stu-id="0ea22-178">Click the **Delete** button to delete the rule.</span></span>

<span data-ttu-id="0ea22-179">Klicka på ikonen **Spara** ovanför inmatningsfälten för att genomföra borttagningen av regeln.</span><span class="sxs-lookup"><span data-stu-id="0ea22-179">Click on the **Save** icon above the entry fields to commit the deletion of the rule.</span></span>

### <a name="create-a-firewall-rule-using-the-azure-cli"></a><span data-ttu-id="0ea22-180">Skapa en brandväggsregel med Azure CLI</span><span class="sxs-lookup"><span data-stu-id="0ea22-180">Create a firewall rule using the Azure CLI</span></span>

<span data-ttu-id="0ea22-181">Du kan använda Azure CLI för att lägga till brandväggsregler till servern med kommandot `az postgres server firewall-rule create`.</span><span class="sxs-lookup"><span data-stu-id="0ea22-181">You can use the Azure CLI to add firewall rules to your server with the `az postgres server firewall-rule create` command.</span></span> <span data-ttu-id="0ea22-182">Här är ett exempel som skapar regeln ovan.</span><span class="sxs-lookup"><span data-stu-id="0ea22-182">Here's an example that creates the rule from above.</span></span>

```azurecli
az postgres server firewall-rule create \
  --resource-group <rgn>[Sandbox resource group name]</rgn> \
  --server <server-name> \
  --name AllowAll \
  --start-ip-address 0.0.0.0 \
  --end-ip-address 255.255.255.255
```

<span data-ttu-id="0ea22-183">Du tar bort brandväggsregler från servern med kommandot `az postgres server firewall-rule delete`.</span><span class="sxs-lookup"><span data-stu-id="0ea22-183">You remove firewall rules from your server with the command `az postgres server firewall-rule delete`.</span></span> <span data-ttu-id="0ea22-184">Här är ett exempel:</span><span class="sxs-lookup"><span data-stu-id="0ea22-184">Here's an example:</span></span>

```azurecli
az postgres server firewall-rule delete \
  --name AllowAll \
  --resource-group <rgn>[Sandbox resource group name]</rgn> \
  --server-name <server-name>
```

## <a name="connecting-to-your-server"></a><span data-ttu-id="0ea22-185">Ansluta till servern</span><span class="sxs-lookup"><span data-stu-id="0ea22-185">Connecting to your server</span></span>

<span data-ttu-id="0ea22-186">Precis som vilken modern databas som helst kräver PostgreSQL regelbunden serveradministration för att uppnå bästa möjliga prestanda.</span><span class="sxs-lookup"><span data-stu-id="0ea22-186">Like any modern database, PostgreSQL requires regular server administration to achieve best performance.</span></span> <span data-ttu-id="0ea22-187">Det finns ett antal alternativ för att ansluta och hantera din Azure Database for PostgreSQL-server.</span><span class="sxs-lookup"><span data-stu-id="0ea22-187">You have a number of options to connect and manage your Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="0ea22-188">Vi använder `psql` för att ansluta till servern.</span><span class="sxs-lookup"><span data-stu-id="0ea22-188">We'll use `psql` to connect to the server.</span></span>

### <a name="what-is-psql"></a><span data-ttu-id="0ea22-189">Vad är psql?</span><span class="sxs-lookup"><span data-stu-id="0ea22-189">What is psql?</span></span>

<span data-ttu-id="0ea22-190">Kommandoradsverktyget som kallas för `psql` är en distribuerad interaktiv PostgreSQL-terminal som samverkar med PostgreSQL:s server och databaser.</span><span class="sxs-lookup"><span data-stu-id="0ea22-190">The command-line tool called `psql` is the PostgreSQL distributed interactive terminal for working with PostgreSQL servers and databases.</span></span> <span data-ttu-id="0ea22-191">`psql` fungerar på samma sätt med Azure Database for PostgreSQL som andra PostgreSQL-implementeringar och medföljer Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="0ea22-191">`psql` works with Azure Database for PostgreSQL the same as with any other PostgreSQL implementation and is included with Azure Cloud Shell.</span></span> <span data-ttu-id="0ea22-192">Med verktyget `psql` kan du hantera databaser och köra strukturfrågor mot databaserna.</span><span class="sxs-lookup"><span data-stu-id="0ea22-192">The `psql` tool allows you to manage databases as well as execute structure queries against these databases.</span></span>

<span data-ttu-id="0ea22-193">Med hjälp av `psql` kräver en anslutning till en PostgreSQL-server.</span><span class="sxs-lookup"><span data-stu-id="0ea22-193">Using `psql` requires a successful connection to a PostgreSQL server.</span></span> <span data-ttu-id="0ea22-194">Det finns ett antal tillgängliga kommandoradsparametrar som du kan använda när du arbetar med `psql`.</span><span class="sxs-lookup"><span data-stu-id="0ea22-194">There are a number of command-line parameters available for use when working with `psql`.</span></span>

- <span data-ttu-id="0ea22-195">`--host` – Värden som du vill ansluta till.</span><span class="sxs-lookup"><span data-stu-id="0ea22-195">`--host` - The host to which you'd like to connect.</span></span>
- <span data-ttu-id="0ea22-196">`--username` – Användarens namn/ID som du ska ansluta till.</span><span class="sxs-lookup"><span data-stu-id="0ea22-196">`--username` - The user name/ID with which to connect.</span></span>
- <span data-ttu-id="0ea22-197">`--dbname` – Namnet på databasen som du ska ansluta till.</span><span class="sxs-lookup"><span data-stu-id="0ea22-197">`--dbname` - The name of the database to connect to.</span></span>

> [!TIP]
> <span data-ttu-id="0ea22-198">Du ansluter vanligen till hanteringsdatabasen `postgres` när du hanterar din serveråtkomst och databasernas konfiguration.</span><span class="sxs-lookup"><span data-stu-id="0ea22-198">You'll typically connect to the `postgres` management database when managing your server access and database configurations.</span></span>

<span data-ttu-id="0ea22-199">Här är det fullständiga kommandot:</span><span class="sxs-lookup"><span data-stu-id="0ea22-199">Here is the complete command:</span></span>

```bash
psql --host=<server-name>.postgres.database.azure.com
      --username=<admin-user>@<server-name> 
      --dbname=<database>
```

<span data-ttu-id="0ea22-200">När du är ansluten ser du en kommandotolk där du kan köra kommandon till servern och databaserna.</span><span class="sxs-lookup"><span data-stu-id="0ea22-200">After you're connected, you'll be presented with a command prompt and can execute commands to your server and databases.</span></span>

<span data-ttu-id="0ea22-201">Nu har du sett vilka åtgärder du vidtar för att konfigurera Azure Database for PostgreSQL:s säkerhetsinställningar.</span><span class="sxs-lookup"><span data-stu-id="0ea22-201">You've now seen the steps that you take to configure Azure Database for PostgreSQL security settings.</span></span> <span data-ttu-id="0ea22-202">I nästa del ska du konfigurera säkerhetsinställningarna för Azure Database for PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="0ea22-202">In the next unit, you'll configure Azure Database for PostgreSQL security settings.</span></span> <span data-ttu-id="0ea22-203">Du ska även ansluta till servern med Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="0ea22-203">You'll also connect to the server using Cloud Shell.</span></span>
