<span data-ttu-id="9f1d9-101">Design för hög tillgänglighet bidrar till att hålla igång ett program eller en process trots ogynnsamma händelser och förhållanden.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-101">Designing for high availability helps keep an application or process running despite unfavorable events and adverse conditions.</span></span> <span data-ttu-id="9f1d9-102">Men vad gör du när det händer något betydande så att du har förlorat data och det är omöjligt att undvika att dina appar och processer stängs av?</span><span class="sxs-lookup"><span data-stu-id="9f1d9-102">But what do you do when something so significant happens that you've lost data and it's impossible to keep your apps and processes from going down?</span></span> <span data-ttu-id="9f1d9-103">När katastrofen är framme måste du ha en plan.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-103">When disaster strikes, you need to have a plan.</span></span> <span data-ttu-id="9f1d9-104">Du bör veta vad du har för mål och förväntningar för återställning, vad planens kostnader och begränsningar är och hur de ska köras.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-104">You should know what your goals and expectations are for recovering, what the costs and limitations of your plan are, and how to execute on it.</span></span>

## <a name="what-is-disaster-recovery"></a><span data-ttu-id="9f1d9-105">Vad är haveriberedskap?</span><span class="sxs-lookup"><span data-stu-id="9f1d9-105">What is disaster recovery?</span></span>

<span data-ttu-id="9f1d9-106">Haveriberedskap handlar om att *återställa från kraftfulla händelser* som leder till driftstopp och dataförlust.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-106">Disaster recovery is about *recovering from high-impact events* that result in downtime and loss of data.</span></span> <span data-ttu-id="9f1d9-107">En katastrof är en enskild, stor händelse vars påverkan är mycket större och varaktig än hur mycket programmet kan minimera via designdelen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-107">A disaster is a single, major event with an impact much larger and long-lasting than the application can mitigate through the high-availability portion of its design.</span></span>

<span data-ttu-id="9f1d9-108">Ordet ”katastrof” leder ofta tanken till *naturkatastrofer* och externa händelser (jordbävningar, översvämningar, tropiska stormar med mera) men det finns även många andra typer av katastrofer.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-108">The word "disaster" often evokes thoughts of *natural* disasters and external events (earthquakes, floods, tropical storms, etc) but many other kinds of disaster exist as well.</span></span> <span data-ttu-id="9f1d9-109">En distribution eller uppgradering som går väldigt fel kan göra en app oigenkännlig.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-109">A deployment or upgrade that goes horribly wrong can leave an app in an unrecognizable state.</span></span> <span data-ttu-id="9f1d9-110">Diskreta implementerings- eller konfigurationsfel kan skriva felaktiga data eller ta bort data som antas vara permanenta.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-110">Subtle implementation or configuration errors can write bad data or delete data assumed to be permanent.</span></span> <span data-ttu-id="9f1d9-111">Hackare kan skada eller ta bort data och vålla andra typer av skador som kan försätta en app i offlineläge eller eliminera en del av dess funktioner.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-111">Malicious hackers can corrupt or delete data and inflict other kinds of damage that take an app offline or eliminate some of its functionality.</span></span>

<span data-ttu-id="9f1d9-112">Oavsett orsak är den enda lösningen på en katastrof när den har inträffat en väldefinierad, testad haveriberedskapsplan och ett program vars design aktivt stöder haveriberedskapsförsök.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-112">Regardless of its cause, the only remedy for a disaster once it has occurred is a well-defined, tested disaster recovery plan and an application that actively supports disaster recovery efforts through its design.</span></span>

## <a name="how-to-create-a-disaster-recovery-plan"></a><span data-ttu-id="9f1d9-113">Skapa en haveriberedskapsplan</span><span class="sxs-lookup"><span data-stu-id="9f1d9-113">How to create a disaster recovery plan</span></span>

<span data-ttu-id="9f1d9-114">En haveriberedskapsplan är ett enskilt dokument som beskriver procedurerna som krävs för att återställa efter dataförlust och stilleståndstid som orsakas av en katastrof och identifierar vem som ansvarar för att dirigera sådana procedurer.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-114">A disaster recovery plan is a single document that details the procedures required to recover from data loss and downtime caused by a disaster, and identifies who is in charge of directing those procedures.</span></span> <span data-ttu-id="9f1d9-115">Operatörer bör kunna använda planen som en handbok för att återställa anslutningen och data efter en katastrof.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-115">Operators should be able to use the plan as a manual to restore application connectivity and recover data after a disaster occurs.</span></span> <span data-ttu-id="9f1d9-116">En detaljerad, skriftlig haveriberedskapsplan är avgörande för att garantera goda resultat: processen med att skapa en plan hjälper till att sätta ihop en bild av programmet, och de resulterande skriftliga stegen främjar bra beslutsfattande och uppföljning i de panikartade och kaotiska efterdyningarna av en katastrof.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-116">A detailed, written plan dedicated to disaster recovery is critical to ensuring a favorable outcome: the process of creating the plan will help to assemble a complete picture of the application, and the resulting written steps will promote good decision-making and follow-through in the panicked, chaotic aftermath of a disaster event.</span></span>

<span data-ttu-id="9f1d9-117">Att skapa en haveriberedskapsplan kräver goda kunskaper om programmets arbetsflöden, data, infrastruktur och beroenden.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-117">Creating a disaster recovery plan requires expert knowledge of the application's workflows, data, infrastructure, and dependencies.</span></span>

### <a name="risk-assessment-and-process-inventory"></a><span data-ttu-id="9f1d9-118">Riskbedömning och processinventering</span><span class="sxs-lookup"><span data-stu-id="9f1d9-118">Risk assessment and process inventory</span></span>

<span data-ttu-id="9f1d9-119">Det första steget i att skapa en haveriberedskapsplan är att utföra en riskanalys som undersöker programmets påverkan av olika typer av katastrofer.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-119">The first step in creating a disaster recovery plan is performing a risk analysis that examines the impact of different kinds of disasters on the application.</span></span> <span data-ttu-id="9f1d9-120">Den exakta typen av en katastrof är inte lika viktig för riskanalysen som dess potentiella påverkan via dataförlust och driftstopp i programmet.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-120">The exact nature of a disaster isn't as important to the risk analysis as its potential impact through data loss and application downtime.</span></span> <span data-ttu-id="9f1d9-121">Utforska olika typer av hypotetiska katastrofer och försök vara specifik när du tänker på deras effekter. En riktad skadlig attack till exempel leder till andra typer av påverkan än en jordbävning som avbryter nätverksanslutningen och tillgängligheten för datacentret.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-121">Explore various kinds of hypothetical disasters and try to be specific when thinking about their effects: for example, a targeted malicious attack may modify code or data that results in a different kind of impact than an earthquake that disrupts network connectivity and datacenter availability.</span></span>

<span data-ttu-id="9f1d9-122">Riskbedömningen behöver överväga *varje* process som inte klarar ett obegränsat driftstopp, och varje kategori med data som inte klarar obegränsad förlust.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-122">The risk assessment needs to consider *every* process that can't afford unlimited downtime, and every category of data that can't afford unlimited loss.</span></span> <span data-ttu-id="9f1d9-123">När det inträffar en katastrof som påverkar flera programkomponenter är det viktigt att planens ägare kan använda planen för att göra en fullständig förteckning över vad som kräver åtgärder och hur varje del ska prioriteras.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-123">When a disaster that affects multiple application components occurs, it's critical that the plan owners can use the plan to take a complete inventory of what needs attention and how to prioritize each item.</span></span>

<span data-ttu-id="9f1d9-124">Vissa appar kanske endast utgör en enda process eller klassificering av data.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-124">Some apps may only constitute a single process or classification of data.</span></span> <span data-ttu-id="9f1d9-125">Det är ändå viktigt att notera, eftersom det är sannolikt att programmet är en komponent av en större haveriberedskapsplan son inbegriper flera program i organisationen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-125">This is still important to note, as the application will likely be one component of a larger disaster recovery plan that includes multiple applications with the organization.</span></span>

### <a name="recovery-objectives"></a><span data-ttu-id="9f1d9-126">Återställningsmål</span><span class="sxs-lookup"><span data-stu-id="9f1d9-126">Recovery objectives</span></span>

<span data-ttu-id="9f1d9-127">En fullständig plan måste ange två viktiga affärskrav för varje process som implementeras av programmet:</span><span class="sxs-lookup"><span data-stu-id="9f1d9-127">A complete plan needs to specify two critical business requirements for each process implemented by the application:</span></span>

* <span data-ttu-id="9f1d9-128">**Mål för återställningspunkter (RPO)**: Den maximala mängden acceptabel dataförlust.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-128">**Recovery Point Objective (RPO)**: The maximum duration of acceptable data loss.</span></span> <span data-ttu-id="9f1d9-129">RPO mäts i tidsenheter, inte volym: ”30 minuters data”, ”fyra timmars data” osv. RPO handlar om att begränsa och återställa från *dataförlust*, inte *datastöld*.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-129">RPO is measured in units of time, not volume: "30 minutes of data", "four hours of data", etc. RPO is about limiting and recovering from data *loss*, not data *theft*.</span></span>
* <span data-ttu-id="9f1d9-130">**Mål för återställningstid (RTO)**: Den maximala längden på ett acceptabelt driftstopp, där ”driftstopp” måste definieras av din specifikation.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-130">**Recovery Time Objective (RTO)**: The maximum duration of acceptable downtime, where "downtime" needs to be defined by your specification.</span></span>

![Mål för återställningstid och återställningspunkter (RTO och RPO)](../media-draft/rto-rpo.png)

<span data-ttu-id="9f1d9-132">Varje större process eller arbetsbelastning som implementeras av en app bör ha separata RPO- och RTO-värden.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-132">Each major process or workload implemented by an app should have separate RPO and RTO values.</span></span> <span data-ttu-id="9f1d9-133">Även om du kommer till samma värden för olika processer ska vart och ett genereras via en separat analys som undersöker olika katastrofscenariers risker och potentiella återställningsstrategier för varje respektive process.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-133">Even if you arrive at the same values for different processes, each one should be generated through a separate analysis that examines disaster scenario risks and potential recovery strategies for each respective process.</span></span>

<span data-ttu-id="9f1d9-134">Processen för att ange RPO och RTO är i praktiken skapandet av krav på haveriberedskap för ditt program.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-134">The process of specifying an RPO and RTO is effectively the creation of disaster recovery requirements for your application.</span></span> <span data-ttu-id="9f1d9-135">Det kräver upprättande av prioritet för varje arbetsbelastning och kategori av data och utför en kostnadsfördelsanalys som innefattar aspekter som kostnader för implementering och underhåll, driftskostnader, omkostnader för processer och inverkan från driftstopp och förlorade data.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-135">It requires establishing the priority of each workload and category of data and performing a cost-benefit analysis that includes concerns such as implementation and maintenance cost, operational expense, process overhead, performance impact, and the impact of downtime and lost data.</span></span> <span data-ttu-id="9f1d9-136">Du måste definiera exakt vad ”avbrottstid” innebär för ditt program, och i vissa fall kan du upprätta separata RPO- och RTO-värden för olika funktionsnivåer.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-136">You will need to define exactly what "downtime" means for your application, and in some cases, you may establish separate RPO and RTO values for different levels of functionality.</span></span> <span data-ttu-id="9f1d9-137">Att ange RPO och RTO ska innebära mer än att bara välja valfria värden.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-137">Specifying RPO and RTO should be more than simply choosing arbitrary values.</span></span> <span data-ttu-id="9f1d9-138">En stor del av värdet av en haveriberedskapsplan kommer från forskning och analys som leder till upptäckter av eventuell påverkan från en katastrof och kostnaderna för att minimera riskerna.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-138">Much of the value of a disaster recovery plan comes from the research and analysis that goes into discovering the potential impact of a disaster and the cost of mitigating the risks.</span></span>

<span data-ttu-id="9f1d9-139">RPO och RTO är *mål*.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-139">RPO and RTO are *objectives*.</span></span> <span data-ttu-id="9f1d9-140">Katastrofer är oförutsägbara och du kanske inte kan uppfylla dina etablerade RPO:er och RTO:er för en viss händelse.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-140">Disasters are unpredictable, and you may not be able to meet your established RPO and RTO for a given event.</span></span> <span data-ttu-id="9f1d9-141">Företaget har gått med på att ta på sig de kostnader som krävs för att upprätthålla godkända värden för RPO och RTO, och i utbyte skulle de här målen allmänt uppnås i ett haveriberedskapsscenario.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-141">The business has agreed to take on the costs required to maintain the agreed-upon RPO and RTO values, and in return those targets should generally be achieved in a disaster recovery scenario.</span></span> <span data-ttu-id="9f1d9-142">Alla katastrofhändelser bör inkludera en tillbakablick efter återställningen som undersöker styrkor och svagheter, men katastrofer som leder till underlåtenhet att uppfylla RPO eller RTO kräver extra uppmärksamhet.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-142">All disaster events should include a post-recovery retrospective that examines strengths and weaknesses, but disasters that result in a failure to meet RPO or RTO merit special attention.</span></span>

### <a name="detailing-recovery-steps"></a><span data-ttu-id="9f1d9-143">Information om åtgärder för återställning</span><span class="sxs-lookup"><span data-stu-id="9f1d9-143">Detailing recovery steps</span></span>

<span data-ttu-id="9f1d9-144">Den slutgiltiga planen ska ange i detalj exakt vilka åtgärder som ska vidtas för att återställa förlorade data och förlorad programanslutning.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-144">The final plan should go into detail about exactly what steps should be taken to restore lost data and application connectivity.</span></span> <span data-ttu-id="9f1d9-145">Stegen omfattar ofta information om:</span><span class="sxs-lookup"><span data-stu-id="9f1d9-145">Steps often include information about:</span></span>

* <span data-ttu-id="9f1d9-146">**Säkerhetskopior**: hur ofta de skapas, var de finns, hur du återställer data från dem.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-146">**Backups**: how often they are created; where they are located; how to restore data from them.</span></span>
* <span data-ttu-id="9f1d9-147">**Datarepliker**: antalet repliker och deras platser, replikerade datas natur och konsekvensegenskaper, hur man växlar över till en annan replik.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-147">**Data replicas**: number and locations of replicas; the nature and consistency characteristics of the replicated data; how to switch over to a different replica.</span></span>
* <span data-ttu-id="9f1d9-148">**Distributioner**: Hur distributioner körs, hur återställningar inträffar, scenarier för distribution.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-148">**Deployments**: How deployments are executed; how rollbacks occur; failure scenarios for deployments.</span></span>
* <span data-ttu-id="9f1d9-149">**Infrastruktur**: Lokala resurser och molnresurser, nätverksinfrastruktur, maskinvaruinventering.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-149">**Infrastructure**: On-premises and cloud resources; network infrastructure; hardware inventory.</span></span>
* <span data-ttu-id="9f1d9-150">**Beroenden**: Externa tjänster som används av programmet, däribland serviceavtal och kontaktinformation.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-150">**Dependencies**: External services used by the application, including SLAs and contact information.</span></span>
* <span data-ttu-id="9f1d9-151">**Konfiguration och meddelanden**: Flaggor eller alternativ som kan ställas in för att försämra programmet på ett bra sätt, tjänster som används för att meddela användare om programpåverkan.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-151">**Configuration and notification**: Flags or options that can be set to gracefully degrade the application; services used to notify users of application impact.</span></span>

<span data-ttu-id="9f1d9-152">De exakta åtgärderna som krävs beror mycket på appens implementeringsinformation, vilket gör det viktigt att hålla planen uppdaterad.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-152">The exact steps required will depend heavily on implementation details of the app, making it important to keep the plan updated.</span></span> <span data-ttu-id="9f1d9-153">Regelbundna tester av planen hjälper till att identifiera luckor och inaktuella delar.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-153">Routinely testing the plan will help identify gaps and outdated sections.</span></span>

## <a name="designing-for-disaster-recovery"></a><span data-ttu-id="9f1d9-154">Utforma för haveriberedskap</span><span class="sxs-lookup"><span data-stu-id="9f1d9-154">Designing for disaster recovery</span></span>

<span data-ttu-id="9f1d9-155">Haveriberedskap är ingen automatisk funktion.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-155">Disaster recovery is not an automatic feature.</span></span> <span data-ttu-id="9f1d9-156">Den måste utformas, skapas och testas.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-156">It must be designed, built, and tested.</span></span> <span data-ttu-id="9f1d9-157">En app som behöver stödja en solid strategi för haveriberedskap måste vara skapad från grunden med haveriberedskap i åtanke.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-157">An app that needs to support a solid disaster recovery strategy must be built from the ground up with disaster recovery in mind.</span></span> <span data-ttu-id="9f1d9-158">Azure erbjuder tjänster, funktioner och vägledning för att hjälpa dig att skapa appar som stöder haveriberedskap, men det är upp till dig att lägga till dem i din design.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-158">Azure offers services, features, and guidance to help you create apps that support disaster recovery, but it's up to you to include them in your design.</span></span>

<span data-ttu-id="9f1d9-159">Det finns två huvudsakliga frågeställningar när det gäller att utforma för haveriberedskap:</span><span class="sxs-lookup"><span data-stu-id="9f1d9-159">Designing for disaster recovery has two main concerns:</span></span>

* <span data-ttu-id="9f1d9-160">**Dataåterställning**: Använda säkerhetskopiering och replikering för att återställa förlorade data.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-160">**Data recovery**: Using backups and replication to restore lost data.</span></span>
* <span data-ttu-id="9f1d9-161">**Process för återställning**: Återställa tjänster och distribuera kod för att återställa efter avbrott.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-161">**Process recovery**: Recovering services and deploying code to recover from outages.</span></span>

### <a name="data-recovery-and-replication"></a><span data-ttu-id="9f1d9-162">Återställning av data och replikering</span><span class="sxs-lookup"><span data-stu-id="9f1d9-162">Data recovery and replication</span></span>

<span data-ttu-id="9f1d9-163">Replikering duplicerar lagrade data mellan flera datalagringsrepliker.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-163">Replication duplicates stored data between multiple data store replicas.</span></span> <span data-ttu-id="9f1d9-164">Till skillnad från *säkerhetskopiering*, som skapar långlivade, skrivskyddade ögonblicksbilder av data för användning vid återställning skapar replikering kopior av livedata i realtid eller nästan realtid.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-164">Unlike *backup*, which creates long-lived, read-only snapshots of data for use in recovery, replication creates real-time or near-real-time copies of live data.</span></span> <span data-ttu-id="9f1d9-165">Målet med replikering är att hålla repliker synkroniserade med så låg fördröjning som möjligt samtidigt som programmets svarstider bibehålls.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-165">The goal of replication is to keep replicas synchronized with as little latency as possible while maintaining application responsiveness.</span></span> <span data-ttu-id="9f1d9-166">Replikering är en viktig del av att utforma för hög tillgänglighet och haveriberedskap och är en vanlig funktion i program i produktionsklassen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-166">Replication is a key component of designing for high availability and disaster recovery, and is a common feature of production-grade applications.</span></span>

<span data-ttu-id="9f1d9-167">Replikering används för att minska ett misslyckat eller otillgängligt datalager genom att köra en *redundans*: ändra programmets konfiguration för att dirigera databegäranden till en aktiv replik.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-167">Replication is used to mitigate a failed or unreachable data store by executing a *failover*: changing application configuration to route data requests to a working replica.</span></span> <span data-ttu-id="9f1d9-168">Redundans är ofta automatiserat, utlöst av felidentifiering som skapats i en produkt för lagring av data eller identifiering som du implementerar via din lösning för övervakning.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-168">Failover is often automated, triggered by error detection built into a data storage product, or detection that you implement through your monitoring solution.</span></span> <span data-ttu-id="9f1d9-169">Beroende på implementering och scenario kan redundans köras manuellt av systemoperatörer.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-169">Depending on the implementation and the scenario, failover may need to be manually executed by system operators.</span></span>

<span data-ttu-id="9f1d9-170">Replikering är inget du implementerar från grunden.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-170">Replication is not something you implement from scratch.</span></span> <span data-ttu-id="9f1d9-171">De flesta funktionsrika databassystem och andra datalagringsprodukter och tjänster innehåller någon typ av replikering som en väl integrerad funktion på grund av dess krav på funktionalitet och prestanda.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-171">Most fully featured database systems and other data storage products and services include some kind of replication as a tightly integrated feature due to its functional and performance requirements.</span></span> <span data-ttu-id="9f1d9-172">Men det är upp till dig att inkludera de här funktionerna i programmets design och använda den på ett lämpligt sätt.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-172">However, it's up to you to include these features in your application design and make appropriate use of them.</span></span>

<span data-ttu-id="9f1d9-173">Olika Azure-tjänster stöder olika nivåer och begrepp för replikering.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-173">Different Azure services support various levels and concepts of replication.</span></span> <span data-ttu-id="9f1d9-174">Exempel:</span><span class="sxs-lookup"><span data-stu-id="9f1d9-174">For example:</span></span>

* <span data-ttu-id="9f1d9-175">**Azure Storage**-replikering är i praktiken automatisk.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-175">**Azure Storage** replication is effectively automatic.</span></span> <span data-ttu-id="9f1d9-176">Varken ditt program eller dina operatörer kan interagera med det direkt.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-176">Neither your application nor your operators interact with it directly.</span></span> <span data-ttu-id="9f1d9-177">Redundanser är automatiska och genomskinliga, och du måste helt enkelt välja en replikeringsnivå som balanserar kostnad och risk.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-177">Failovers are automatic and transparent, and you simply need to select a replication level that balances cost and risk.</span></span>
* <span data-ttu-id="9f1d9-178">**Azure SQL Database**-replikering är automatisk i liten skala, men återställning från ett fullständigt Azure-datacenter eller regionalt strömavbrott kräver geo-replikering.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-178">**Azure SQL Database** replication is automatic at a small scale, but recovery from a full Azure datacenter or regional outage requires geo-replication.</span></span> <span data-ttu-id="9f1d9-179">Konfiguration av geo-replikering görs manuellt men är en förstaklassfunktion i tjänsten och är väl understödd av dokumentation.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-179">Setting up geo-replication is manual but is a first-class feature of the service and is well supported by documentation.</span></span>
* <span data-ttu-id="9f1d9-180">**Cosmos DB** är ett globalt distribuerat databassystem och replikering är centralt för dess implementering.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-180">**Cosmos DB** is a globally distributed database system, and replication is central to its implementation.</span></span> <span data-ttu-id="9f1d9-181">Med Cosmos DB konfigurerar du alternativ som relaterar till partitionering och datakonsekvens istället för att konfigurera replikering direkt.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-181">With Cosmos DB, instead of configuring replication directly, you configure options related to partitioning and data consistency.</span></span>

<span data-ttu-id="9f1d9-182">Det finns många olika replikeringsutformningar som har olika prioriteringar för datakonsekvens, prestanda och kostnad.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-182">Many different replication designs exist that place different priorities on data consistency, performance, and cost.</span></span> <span data-ttu-id="9f1d9-183">*Aktiv* replikering kräver att uppdateringar sker på flera repliker samtidigt, vilket garanterar konsekvens på bekostnad av dataflöde.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-183">*Active* replication requires updates to take place on multiple replicas simultaneously, guaranteeing consistency at the cost of throughput.</span></span> <span data-ttu-id="9f1d9-184">Däremot utför *passiv* replikering synkronisering i bakgrunden, vilket tar bort replikering som en begränsning av programprestanda men ökar återställningspunktmålet (RPO).</span><span class="sxs-lookup"><span data-stu-id="9f1d9-184">In contrast, *passive* replication performs synchronization in the background, removing replication as a constraint on application performance but increasing RPO.</span></span> <span data-ttu-id="9f1d9-185">*Aktiv-aktiv* replikering eller replikering med *flera original* gör det möjligt för flera repliker att användas samtidigt, vilket möjliggör belastningsutjämning till priset av mer komplicerad datakonsekvens, medan *aktiv-passiv* replikering reserverar repliker för liveanvändning endast under redundans.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-185">*Active-active* or *multi-master* replication enables multiple replicas to be used simultaneously, enabling load balancing at the cost of complicating data consistency, while *active-passive* replication reserves replicas for live use only during failover.</span></span>

![Azure SQL Database Geo-replikering](../media-draft/geo-replication.png)

> [!IMPORTANT]
> <span data-ttu-id="9f1d9-187">**Varken replikering eller säkerhetskopiering är fullständiga lösningar för haveriberedskap på egen hand**.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-187">**Neither replication nor backup are complete disaster recovery solutions on their own**.</span></span> <span data-ttu-id="9f1d9-188">Dataåterställning är enbart en komponent av haveriberedskap, och replikering uppfyller inte helt många typer av haveriberedskapsscenarier.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-188">Data recovery is only one component of disaster recovery, and replication will not fully satisfy many kinds of disaster recovery scenarios.</span></span> <span data-ttu-id="9f1d9-189">I till exempel ett scenario med skadade data kan typen av skada göra att skadan sprider sig från det primära datalagret till replikerna. Det gör alla repliker oanvändbara och kräver en säkerhetskopia för återställning.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-189">For example, in a data corruption scenario, the nature of the corruption may allow it to spread from the primary data store to the replicas, rendering all the replicas useless and requiring a backup for recovery.</span></span>

### <a name="process-recovery"></a><span data-ttu-id="9f1d9-190">Process för återställning</span><span class="sxs-lookup"><span data-stu-id="9f1d9-190">Process recovery</span></span>

<span data-ttu-id="9f1d9-191">Efter en katastrof är inte affärsdata den enda tillgången som behöver återställas.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-191">After a disaster, business data isn't the only asset that needs recovering.</span></span> <span data-ttu-id="9f1d9-192">Katastrofscenarier leder även till driftstopp, oavsett om det beror på problem med nätverksanslutning, datacenteravbrott eller skadade VM-instanser eller skadad distribution av programvara.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-192">Disaster scenarios will also commonly result in downtime, whether it's due to network connectivity problems, datacenter outages, or damaged VM instances or software deployments.</span></span> <span data-ttu-id="9f1d9-193">Programmets design måste göra det möjligt för dig att återställa det till ett fungerande tillstånd.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-193">The design of your application needs to enable you to restore it to a working state.</span></span>

<span data-ttu-id="9f1d9-194">I de flesta fall inbegriper processåterställning redundans till en separat fungerande distribution.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-194">In most cases, process restoration involves failover to a separate, working deployment.</span></span> <span data-ttu-id="9f1d9-195">Beroende på scenario kan geografisk plats vara en viktig aspekt: till exempel kan en storskalig naturkatastrof som leder till att en hel Azure-region försätts i offlineläge kräva att tjänsten återställs i en annan region.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-195">Depending on the scenario, geographic location may be a critical aspect: for example, a large-scale natural disaster that brings an entire Azure region offline will necessitate restoring service in another region.</span></span> <span data-ttu-id="9f1d9-196">Programmets krav på haveriberedskap, särskilt RTO, bör påverka din design och hjälpa dig att bestämma hur många replikerade miljöer du ska ha, var de ska finnas och om de ska underhållas i ett körklart tillstånd eller om de ska vara redo att godkänna en distribution vid en katastrof.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-196">Your application's disaster recovery requirements, especially RTO, should drive your design and help you to decide how many replicated environments you should have, where they should be located, and whether they should be maintained in a ready-to-run state or should be ready to accept a deployment in the event of disaster.</span></span>

<span data-ttu-id="9f1d9-197">Beroende på programmets design finns det några olika strategier och Azure-tjänster och -funktioner du kan använda för att förbättra appens stöd för processåterställning efter en katastrof.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-197">Depending on the design of your application, there are a few different strategies and Azure services and features you can take advantage of to improve your app's support for process recovery after a disaster.</span></span>

#### <a name="azure-site-recovery"></a><span data-ttu-id="9f1d9-198">Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9f1d9-198">Azure Site Recovery</span></span>

<span data-ttu-id="9f1d9-199">Azure Site Recovery är en tjänst som är dedikerad för att hantera processåterställning för arbetsbelastningar som körs på virtuella datorer som är distribuerade i Azure, virtuella datorer som körs på fysiska servrar och arbetsbelastningar som körs direkt på fysiska servrar.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-199">Azure Site Recovery is a service dedicated to managing process recovery for workloads running on VMs deployed to Azure, VMs running on physical servers, and workloads running directly on physical servers.</span></span> <span data-ttu-id="9f1d9-200">Site Recovery replikerar arbetsbelastningar till alternativa platser och hjälper dig att växla över när ett avbrott sker och stöder testning av en haveriberedskapsplan.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-200">Site Recovery replicates workloads to alternate locations and helps you to fail over when an outage occurs and supports testing of a disaster recovery plan.</span></span>

![Azure Site Recovery](../media-draft/asr.png)

<span data-ttu-id="9f1d9-202">Site Recovery stöder replikering av hela virtuella datorer och avbildningar av fysiska servrar och enskilda *arbetsbelastningar*, där en arbetsbelastning kan vara ett enskilt program eller en hel virtuell dator eller operativsystem med sina program.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-202">Site Recovery supports replicating whole VMs and physical server images as well as individual *workloads*, where a workload may be an individual application or an entire VM or operating system with its applications.</span></span> <span data-ttu-id="9f1d9-203">Alla programs arbetsbelastningar kan replikeras, men Site Recovery har ett förstklassigt inbyggt stöd för många Microsoft Server-program som SQL Server och SharePoint, samt en mängd tredjepartsprogram som SAP.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-203">Any application workload can be replicated, but Site Recovery has first-class integrated support for many Microsoft server applications, such as SQL Server and SharePoint, as well as a handful of third-party applications like SAP.</span></span>

<span data-ttu-id="9f1d9-204">Alla appar som körs på virtuella datorer eller fysiska servrar bör åtminstone undersöka användningen av Azure Site Recovery, eftersom det är ett bra sätt att identifiera och utforska scenarier och möjligheter för återställning av processen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-204">Any app that runs on VMs or physical servers should at least investigate the use of Azure Site Recovery, as it's a great way to discover and explore scenarios and possibilities for process recovery.</span></span>

#### <a name="service-specific-features"></a><span data-ttu-id="9f1d9-205">Tjänstspecifika funktioner</span><span class="sxs-lookup"><span data-stu-id="9f1d9-205">Service-specific features</span></span>

<span data-ttu-id="9f1d9-206">För appar som körs på Azure PaaS-erbjudanden som App Service erbjuder de flesta sådana tjänster funktioner och vägledning för att stödja haveriberedskap.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-206">For apps that run on Azure PaaS offerings like App Service, most such services offer features and guidance for supporting disaster recovery.</span></span> <span data-ttu-id="9f1d9-207">I många fall är haveriberedskap automatiskt och utförs av Azure genomskinligt.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-207">In many cases, disaster recovery is automatic and performed transparently by Azure.</span></span> <span data-ttu-id="9f1d9-208">För vissa scenarier kan du använda tjänstspecifika funktioner för att stödja snabb återställning.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-208">For certain scenarios, you can use service-specific features to support fast recovery.</span></span> <span data-ttu-id="9f1d9-209">Azure SQL Server till exempel stöder geo-replikering för att snabbt återställa tjänsten i en annan region.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-209">For example, Azure SQL Server supports geo-replication for quickly restoring service in another region.</span></span> <span data-ttu-id="9f1d9-210">I Azure App Service finns en funktion för säkerhetskopiering och återställning, och dokumentationen innehåller vägledning för att använda Azure Traffic Manager för att stödja dirigering av trafik till en sekundär region.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-210">Azure App Service has a Backup and Restore feature, and the documentation includes guidance for using Azure Traffic Manager to support routing traffic to a secondary region.</span></span>

![Regionpar](../media-draft/AzRegionPairs.png)

## <a name="testing-a-disaster-recovery-plan"></a><span data-ttu-id="9f1d9-212">Testa en haveriberedskapsplan</span><span class="sxs-lookup"><span data-stu-id="9f1d9-212">Testing a disaster recovery plan</span></span>

<span data-ttu-id="9f1d9-213">Planering för haveriberedskap slutar inte när du har en färdig plan i handen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-213">Disaster recovery planning doesn't end once you have a completed plan in hand.</span></span> <span data-ttu-id="9f1d9-214">Det är viktigt för att testa haveriberedskapsplanen för att garantera att anvisningarna och förklaringarna är tydliga och uppdaterade.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-214">Testing the plan is a crucial aspect of disaster recovery, to ensure that the directions and explanations are clear and up-to-date.</span></span>

<span data-ttu-id="9f1d9-215">Välj intervaller för att utföra tester av olika typer och omfattningar, som att testa mekanismer för säkerhetskopiering och redundans varje månad och genomföra en fullskalig simulering av haveriberedskap var sjätte månad.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-215">Choose intervals to perform different types and scopes of tests, such as testing backups and failover mechanisms every month, and performing a full-scale disaster recovery simulation every six months.</span></span> <span data-ttu-id="9f1d9-216">Följ alltid anvisningarna och informationen exakt som det står i planen, och överväg att låta någon som är obekant med planen ge sitt perspektiv på vad som kan göras tydligare.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-216">Always follow the steps and details exactly as they are documented in the plan, and consider having someone unfamiliar with the plan give perspective on anything that could be made clearer.</span></span>

<span data-ttu-id="9f1d9-217">Testa även ditt övervakningssystem.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-217">Make sure to including your monitoring system in your testing as well.</span></span> <span data-ttu-id="9f1d9-218">Om ditt program till exempel stöder automatisk redundans kan du introducera fel i ett beroende eller någon annan kritisk komponent för att garantera att programmet beter sig korrekt från slutpunkt till slutpunkt, och att det identifierar felet och utlöser den automatiska redundansen.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-218">For example, if your application supports automated failover, introduce failures in a dependency or other critical component to ensure that the application behaves correctly end-to-end, including detection of the failure and triggering of the automated failover.</span></span>

 <span data-ttu-id="9f1d9-219">Genom att noggrant identifiera dina krav och utforma en plan kan du avgöra vilka typer av tjänster du behöver använda för att uppfylla dina återställningsmål.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-219">By carefully identifying your requirements and laying out a plan, you'll be able to determine what types of services you'll need to use to meet your recovery objectives.</span></span> <span data-ttu-id="9f1d9-220">Azure tillhandahåller flera tjänster och funktioner för att hjälpa dig att uppnå dessa mål.</span><span class="sxs-lookup"><span data-stu-id="9f1d9-220">Azure provides several services and features to help you meet these objectives.</span></span>
